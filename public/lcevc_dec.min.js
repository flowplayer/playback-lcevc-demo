/* Copyright (c) V-Nova International Limited 2021-2024. All rights reserved. */

var Module = {}; // eslint-disable-line no-var
if (!Module)
{
	Module = (typeof Module !== 'undefined' ? Module : null) || {};
}


var libDPIModule = (function() {
  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;
  
  return (
function(libDPIModule) {
  libDPIModule = libDPIModule || {};


var e;e||(e=typeof libDPIModule !== 'undefined' ? libDPIModule : {});var aa,ba;e.ready=new Promise(function(a,b){aa=a;ba=b});var k={},p;for(p in e)e.hasOwnProperty(p)&&(k[p]=e[p]);var x="";"undefined"!==typeof document&&document.currentScript&&(x=document.currentScript.src);_scriptDir&&(x=_scriptDir);0!==x.indexOf("blob:")?x=x.substr(0,x.lastIndexOf("/")+1):x="";var ca=e.print||console.log.bind(console),y=e.printErr||console.warn.bind(console);for(p in k)k.hasOwnProperty(p)&&(e[p]=k[p]);k=null;
function da(a){A||(A={});A[a]||(A[a]=1,y(a))}var A,B;e.wasmBinary&&(B=e.wasmBinary);var noExitRuntime=e.noExitRuntime||!0;"object"!==typeof WebAssembly&&E("no native wasm support detected");var ea,fa=!1,ha="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;
function F(a,b,c){var d=b+c;for(c=b;a[c]&&!(c>=d);)++c;if(16<c-b&&a.subarray&&ha)return ha.decode(a.subarray(b,c));for(d="";b<c;){var f=a[b++];if(f&128){var g=a[b++]&63;if(192==(f&224))d+=String.fromCharCode((f&31)<<6|g);else{var h=a[b++]&63;f=224==(f&240)?(f&15)<<12|g<<6|h:(f&7)<<18|g<<12|h<<6|a[b++]&63;65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else d+=String.fromCharCode(f)}return d}var ia,G,H,ja,I,ka;
function la(){var a=ea.buffer;ia=a;e.HEAP8=G=new Int8Array(a);e.HEAP16=ja=new Int16Array(a);e.HEAP32=I=new Int32Array(a);e.HEAPU8=H=new Uint8Array(a);e.HEAPU16=new Uint16Array(a);e.HEAPU32=new Uint32Array(a);e.HEAPF32=new Float32Array(a);e.HEAPF64=ka=new Float64Array(a)}var ma,na=[],oa=[],pa=[];function qa(){var a=e.preRun.shift();na.unshift(a)}var J=0,ra=null,K=null;e.preloadedImages={};e.preloadedAudios={};
function E(a){if(e.onAbort)e.onAbort(a);y(a);fa=!0;a=new WebAssembly.RuntimeError("abort("+a+"). Build with -s ASSERTIONS=1 for more info.");ba(a);throw a;}function sa(){return L.startsWith("data:application/octet-stream;base64,")}var L="liblcevc_dpi.wasm";if(!sa()){var ta=L;L=e.locateFile?e.locateFile(ta,x):x+ta}function ua(){var a=L;try{if(a==L&&B)return new Uint8Array(B);throw"both async and sync fetching of the wasm failed";}catch(b){E(b)}}
function va(){return B||"function"!==typeof fetch?Promise.resolve().then(function(){return ua()}):fetch(L,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+L+"'";return a.arrayBuffer()}).catch(function(){return ua()})}var M,wa;function ya(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b(e);else{var c=b.Ma;"number"===typeof c?void 0===b.ia?ma.get(c)():ma.get(c)(b.ia):c(void 0===b.ia?null:b.ia)}}}
function za(a,b){for(var c=0,d=a.length-1;0<=d;d--){var f=a[d];"."===f?a.splice(d,1):".."===f?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a}function N(a){var b="/"===a.charAt(0),c="/"===a.substr(-1);(a=za(a.split("/").filter(function(d){return!!d}),!b).join("/"))||b||(a=".");a&&c&&(a+="/");return(b?"/":"")+a}
function Aa(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);a=b[0];b=b[1];if(!a&&!b)return".";b&&(b=b.substr(0,b.length-1));return a+b}function Ba(a){if("/"===a)return"/";a=N(a);a=a.replace(/\/$/,"");var b=a.lastIndexOf("/");return-1===b?a:a.substr(b+1)}
function Ca(){if("object"===typeof crypto&&"function"===typeof crypto.getRandomValues){var a=new Uint8Array(1);return function(){crypto.getRandomValues(a);return a[0]}}return function(){E("randomDevice")}}
function Da(){for(var a="",b=!1,c=arguments.length-1;-1<=c&&!b;c--){b=0<=c?arguments[c]:"/";if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");if(!b)return"";a=b+"/"+a;b="/"===b.charAt(0)}a=za(a.split("/").filter(function(d){return!!d}),!b).join("/");return(b?"/":"")+a||"."}var Ea=[];function Fa(a,b){Ea[a]={input:[],U:[],ba:b};Ga(a,Ha)}
var Ha={open:function(a){var b=Ea[a.node.ga];if(!b)throw new O(43);a.T=b;a.seekable=!1},close:function(a){a.T.ba.flush(a.T)},flush:function(a){a.T.ba.flush(a.T)},read:function(a,b,c,d){if(!a.T||!a.T.ba.ra)throw new O(60);for(var f=0,g=0;g<d;g++){try{var h=a.T.ba.ra(a.T)}catch(m){throw new O(29);}if(void 0===h&&0===f)throw new O(6);if(null===h||void 0===h)break;f++;b[c+g]=h}f&&(a.node.timestamp=Date.now());return f},write:function(a,b,c,d){if(!a.T||!a.T.ba.ka)throw new O(60);try{for(var f=0;f<d;f++)a.T.ba.ka(a.T,
b[c+f])}catch(g){throw new O(29);}d&&(a.node.timestamp=Date.now());return f}},Ja={ra:function(a){if(!a.input.length){var b=null;"undefined"!=typeof window&&"function"==typeof window.prompt?(b=window.prompt("Input: "),null!==b&&(b+="\n")):"function"==typeof readline&&(b=readline(),null!==b&&(b+="\n"));if(!b)return null;a.input=Ia(b)}return a.input.shift()},ka:function(a,b){null===b||10===b?(ca(F(a.U,0)),a.U=[]):0!=b&&a.U.push(b)},flush:function(a){a.U&&0<a.U.length&&(ca(F(a.U,0)),a.U=[])}},Ka={ka:function(a,
b){null===b||10===b?(y(F(a.U,0)),a.U=[]):0!=b&&a.U.push(b)},flush:function(a){a.U&&0<a.U.length&&(y(F(a.U,0)),a.U=[])}},P={V:null,X:function(){return P.createNode(null,"/",16895,0)},createNode:function(a,b,c,d){if(24576===(c&61440)||4096===(c&61440))throw new O(63);P.V||(P.V={dir:{node:{Z:P.P.Z,W:P.P.W,ca:P.P.ca,ea:P.P.ea,wa:P.P.wa,ya:P.P.ya,xa:P.P.xa,va:P.P.va,ha:P.P.ha},stream:{aa:P.R.aa}},file:{node:{Z:P.P.Z,W:P.P.W},stream:{aa:P.R.aa,read:P.R.read,write:P.R.write,ma:P.R.ma,sa:P.R.sa,ua:P.R.ua}},
link:{node:{Z:P.P.Z,W:P.P.W,da:P.P.da},stream:{}},na:{node:{Z:P.P.Z,W:P.P.W},stream:La}});c=Ma(a,b,c,d);16384===(c.mode&61440)?(c.P=P.V.dir.node,c.R=P.V.dir.stream,c.O={}):32768===(c.mode&61440)?(c.P=P.V.file.node,c.R=P.V.file.stream,c.S=0,c.O=null):40960===(c.mode&61440)?(c.P=P.V.link.node,c.R=P.V.link.stream):8192===(c.mode&61440)&&(c.P=P.V.na.node,c.R=P.V.na.stream);c.timestamp=Date.now();a&&(a.O[b]=c,a.timestamp=c.timestamp);return c},Na:function(a){return a.O?a.O.subarray?a.O.subarray(0,a.S):
new Uint8Array(a.O):new Uint8Array(0)},oa:function(a,b){var c=a.O?a.O.length:0;c>=b||(b=Math.max(b,c*(1048576>c?2:1.125)>>>0),0!=c&&(b=Math.max(b,256)),c=a.O,a.O=new Uint8Array(b),0<a.S&&a.O.set(c.subarray(0,a.S),0))},Ea:function(a,b){if(a.S!=b)if(0==b)a.O=null,a.S=0;else{var c=a.O;a.O=new Uint8Array(b);c&&a.O.set(c.subarray(0,Math.min(b,a.S)));a.S=b}},P:{Z:function(a){var b={};b.La=8192===(a.mode&61440)?a.id:1;b.Pa=a.id;b.mode=a.mode;b.Ra=1;b.uid=0;b.Oa=0;b.ga=a.ga;16384===(a.mode&61440)?b.size=
4096:32768===(a.mode&61440)?b.size=a.S:40960===(a.mode&61440)?b.size=a.link.length:b.size=0;b.Ia=new Date(a.timestamp);b.Qa=new Date(a.timestamp);b.Ka=new Date(a.timestamp);b.za=4096;b.Ja=Math.ceil(b.size/b.za);return b},W:function(a,b){void 0!==b.mode&&(a.mode=b.mode);void 0!==b.timestamp&&(a.timestamp=b.timestamp);void 0!==b.size&&P.Ea(a,b.size)},ca:function(){throw Na[44];},ea:function(a,b,c,d){return P.createNode(a,b,c,d)},wa:function(a,b,c){if(16384===(a.mode&61440)){try{var d=Oa(b,c)}catch(g){}if(d)for(var f in d.O)throw new O(55);
}delete a.parent.O[a.name];a.parent.timestamp=Date.now();a.name=c;b.O[c]=a;b.timestamp=a.parent.timestamp;a.parent=b},ya:function(a,b){delete a.O[b];a.timestamp=Date.now()},xa:function(a,b){var c=Oa(a,b),d;for(d in c.O)throw new O(55);delete a.O[b];a.timestamp=Date.now()},va:function(a){var b=[".",".."],c;for(c in a.O)a.O.hasOwnProperty(c)&&b.push(c);return b},ha:function(a,b,c){a=P.createNode(a,b,41471,0);a.link=c;return a},da:function(a){if(40960!==(a.mode&61440))throw new O(28);return a.link}},
R:{read:function(a,b,c,d,f){var g=a.node.O;if(f>=a.node.S)return 0;a=Math.min(a.node.S-f,d);if(8<a&&g.subarray)b.set(g.subarray(f,f+a),c);else for(d=0;d<a;d++)b[c+d]=g[f+d];return a},write:function(a,b,c,d,f,g){b.buffer===G.buffer&&(g=!1);if(!d)return 0;a=a.node;a.timestamp=Date.now();if(b.subarray&&(!a.O||a.O.subarray)){if(g)return a.O=b.subarray(c,c+d),a.S=d;if(0===a.S&&0===f)return a.O=b.slice(c,c+d),a.S=d;if(f+d<=a.S)return a.O.set(b.subarray(c,c+d),f),d}P.oa(a,f+d);if(a.O.subarray&&b.subarray)a.O.set(b.subarray(c,
c+d),f);else for(g=0;g<d;g++)a.O[f+g]=b[c+g];a.S=Math.max(a.S,f+d);return d},aa:function(a,b,c){1===c?b+=a.position:2===c&&32768===(a.node.mode&61440)&&(b+=a.node.S);if(0>b)throw new O(28);return b},ma:function(a,b,c){P.oa(a.node,b+c);a.node.S=Math.max(a.node.S,b+c)},sa:function(a,b,c,d,f,g){if(0!==b)throw new O(28);if(32768!==(a.node.mode&61440))throw new O(43);a=a.node.O;if(g&2||a.buffer!==ia){if(0<d||d+c<a.length)a.subarray?a=a.subarray(d,d+c):a=Array.prototype.slice.call(a,d,d+c);d=!0;g=65536*
Math.ceil(c/65536);for(b=Pa(g);c<g;)G[b+c++]=0;c=b;if(!c)throw new O(48);G.set(a,c)}else d=!1,c=a.byteOffset;return{Ua:c,Ha:d}},ua:function(a,b,c,d,f){if(32768!==(a.node.mode&61440))throw new O(43);if(f&2)return 0;P.R.write(a,b,0,d,c,!1);return 0}}},Qa=null,Ra={},Q=[],Sa=1,R=null,Ta={},O=null,Na={};
function S(a,b){a=Da("/",a);b=b||{};if(!a)return{path:"",node:null};var c={qa:!0,la:0},d;for(d in c)void 0===b[d]&&(b[d]=c[d]);if(8<b.la)throw new O(32);a=za(a.split("/").filter(function(h){return!!h}),!1);var f=Qa;c="/";for(d=0;d<a.length;d++){var g=d===a.length-1;if(g&&b.parent)break;f=Oa(f,a[d]);c=N(c+"/"+a[d]);f.fa&&(!g||g&&b.qa)&&(f=f.fa.root);if(!g||b.pa)for(g=0;40960===(f.mode&61440);)if(f=Ua(c),c=Da(Aa(c),f),f=S(c,{la:b.la}).node,40<g++)throw new O(32);}return{path:c,node:f}}
function Va(a){for(var b;;){if(a===a.parent)return a=a.X.ta,b?"/"!==a[a.length-1]?a+"/"+b:a+b:a;b=b?a.name+"/"+b:a.name;a=a.parent}}function Wa(a,b){for(var c=0,d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%R.length}function Oa(a,b){var c;if(c=a.P.ca?0:2)throw new O(c,a);for(c=R[Wa(a.id,b)];c;c=c.Da){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return a.P.ca(a,b)}function Ma(a,b,c,d){a=new Xa(a,b,c,d);b=Wa(a.parent.id,a.name);a.Da=R[b];return R[b]=a}
var Ya={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090};function Za(a,b){try{return Oa(a,b),20}catch(c){}return 0}function $a(a){var b=4096;for(a=a||0;a<=b;a++)if(!Q[a])return a;throw new O(33);}function ab(a,b){bb||(bb=function(){},bb.prototype={});var c=new bb,d;for(d in a)c[d]=a[d];a=c;b=$a(b);a.Y=b;return Q[b]=a}var La={open:function(a){a.R=Ra[a.node.ga].R;a.R.open&&a.R.open(a)},aa:function(){throw new O(70);}};function Ga(a,b){Ra[a]={R:b}}
function cb(a,b){var c="/"===b,d=!b;if(c&&Qa)throw new O(10);if(!c&&!d){var f=S(b,{qa:!1});b=f.path;f=f.node;if(f.fa)throw new O(10);if(16384!==(f.mode&61440))throw new O(54);}b={type:a,Sa:{},ta:b,Ca:[]};a=a.X(b);a.X=b;b.root=a;c?Qa=a:f&&(f.fa=b,f.X&&f.X.Ca.push(b))}function db(a,b,c){var d=S(a,{parent:!0}).node;a=Ba(a);if(!a||"."===a||".."===a)throw new O(28);var f=Za(d,a);if(f)throw new O(f);if(!d.P.ea)throw new O(63);return d.P.ea(d,a,b,c)}function T(a){return db(a,16895,0)}
function eb(a,b,c){"undefined"===typeof c&&(c=b,b=438);db(a,b|8192,c)}function fb(a,b){if(!Da(a))throw new O(44);var c=S(b,{parent:!0}).node;if(!c)throw new O(44);b=Ba(b);var d=Za(c,b);if(d)throw new O(d);if(!c.P.ha)throw new O(63);c.P.ha(c,b,a)}function Ua(a){a=S(a).node;if(!a)throw new O(44);if(!a.P.da)throw new O(28);return Da(Va(a.parent),a.P.da(a))}
function U(a,b,c,d){if(""===a)throw new O(44);if("string"===typeof b){var f=Ya[b];if("undefined"===typeof f)throw Error("Unknown file open mode: "+b);b=f}c=b&64?("undefined"===typeof c?438:c)&4095|32768:0;if("object"===typeof a)var g=a;else{a=N(a);try{g=S(a,{pa:!(b&131072)}).node}catch(h){}}f=!1;if(b&64)if(g){if(b&128)throw new O(20);}else g=db(a,c,0),f=!0;if(!g)throw new O(44);8192===(g.mode&61440)&&(b&=-513);if(b&65536&&16384!==(g.mode&61440))throw new O(54);if(!f){if(g)if(40960===(g.mode&61440))c=
32;else{if(c=16384===(g.mode&61440))c=["r","w","rw"][b&3],b&512&&(c+="w"),c="r"!==c||b&512;c=c?31:0}else c=44;if(c)throw new O(c);}if(b&512){c=g;c="string"===typeof c?S(c,{pa:!0}).node:c;if(!c.P.W)throw new O(63);if(16384===(c.mode&61440))throw new O(31);if(32768!==(c.mode&61440))throw new O(28);c.P.W(c,{size:0,timestamp:Date.now()})}b&=-131713;d=ab({node:g,path:Va(g),flags:b,seekable:!0,position:0,R:g.R,Ga:[],error:!1},d);d.R.open&&d.R.open(d);!e.logReadFiles||b&1||(gb||(gb={}),a in gb||(gb[a]=1,
y("FS.trackingDelegate error on read file: "+a)));try{Ta.onOpenFile&&(g=0,1!==(b&2097155)&&(g|=1),0!==(b&2097155)&&(g|=2),Ta.onOpenFile(a,g))}catch(h){y("FS.trackingDelegate['onOpenFile']('"+a+"', flags) threw an exception: "+h.message)}return d}function hb(a,b,c){if(null===a.Y)throw new O(8);if(!a.seekable||!a.R.aa)throw new O(70);if(0!=c&&1!=c&&2!=c)throw new O(28);a.position=a.R.aa(a,b,c);a.Ga=[]}
function ib(){O||(O=function(a,b){this.node=b;this.Fa=function(c){this.$=c};this.Fa(a);this.message="FS error"},O.prototype=Error(),O.prototype.constructor=O,[44].forEach(function(a){Na[a]=new O(a);Na[a].stack="<generic error, no stack>"}))}var jb;function kb(a,b){var c=0;a&&(c|=365);b&&(c|=146);return c}
function V(a,b,c){a=N("/dev/"+a);var d=kb(!!b,!!c);lb||(lb=64);var f=lb++<<8|0;Ga(f,{open:function(g){g.seekable=!1},close:function(){c&&c.buffer&&c.buffer.length&&c(10)},read:function(g,h,m,t){for(var n=0,r=0;r<t;r++){try{var z=b()}catch(w){throw new O(29);}if(void 0===z&&0===n)throw new O(6);if(null===z||void 0===z)break;n++;h[m+r]=z}n&&(g.node.timestamp=Date.now());return n},write:function(g,h,m,t){for(var n=0;n<t;n++)try{c(h[m+n])}catch(r){throw new O(29);}t&&(g.node.timestamp=Date.now());return n}});
eb(a,d,f)}var lb,W={},bb,gb,X=void 0;function Y(){X+=4;return I[X-4>>2]}function Z(a){a=Q[a];if(!a)throw new O(8);return a}function mb(a,b){if(0>=a)return a;var c=32>=b?Math.abs(1<<b-1):Math.pow(2,b-1);a>=c&&(32>=b||a>c)&&(a=-2*c+a);return a}function nb(a,b){return 0<=a?a:32>=b?2*Math.abs(1<<b-1)+a:Math.pow(2,b)+a}
function ob(a,b){function c(C){var xa=d;("double"===C||"i64"===C)&&xa&7&&(xa+=4);d=xa;"double"===C?(C=ka[d>>3],d+=8):"i64"==C?(C=[I[d>>2],I[d+4>>2]],d+=8):(C=I[d>>2],d+=4);return C}for(var d=b,f=[],g,h;;){var m=a;g=G[a>>0];if(0===g)break;h=G[a+1>>0];if(37==g){var t=!1,n=b=!1,r=!1,z=!1;a:for(;;){switch(h){case 43:t=!0;break;case 45:b=!0;break;case 35:n=!0;break;case 48:if(r)break a;else{r=!0;break}case 32:z=!0;break;default:break a}a++;h=G[a+1>>0]}var w=0;if(42==h)w=c("i32"),a++,h=G[a+1>>0];else for(;48<=
h&&57>=h;)w=10*w+(h-48),a++,h=G[a+1>>0];var v=!1,u=-1;if(46==h){u=0;v=!0;a++;h=G[a+1>>0];if(42==h)u=c("i32"),a++;else for(;;){h=G[a+1>>0];if(48>h||57<h)break;u=10*u+(h-48);a++}h=G[a+1>>0]}0>u&&(u=6,v=!1);switch(String.fromCharCode(h)){case "h":h=G[a+2>>0];if(104==h){a++;var q=1}else q=2;break;case "l":h=G[a+2>>0];108==h?(a++,q=8):q=4;break;case "L":case "q":case "j":q=8;break;case "z":case "t":case "I":q=4;break;default:q=null}q&&a++;h=G[a+1>>0];switch(String.fromCharCode(h)){case "d":case "i":case "u":case "o":case "x":case "X":case "p":m=
100==h||105==h;q=q||4;g=c("i"+8*q);8==q&&(g=117==h?(g[0]>>>0)+4294967296*(g[1]>>>0):(g[0]>>>0)+4294967296*g[1]);4>=q&&(g=(m?mb:nb)(g&Math.pow(256,q)-1,8*q));var D=Math.abs(g);m="";if(100==h||105==h)var l=mb(g,8*q,1).toString(10);else if(117==h)l=nb(g,8*q,1).toString(10),g=Math.abs(g);else if(111==h)l=(n?"0":"")+D.toString(8);else if(120==h||88==h){m=n&&0!=g?"0x":"";if(0>g){g=-g;l=(D-1).toString(16);D=[];for(n=0;n<l.length;n++)D.push((15-parseInt(l[n],16)).toString(16));for(l=D.join("");l.length<2*
q;)l="f"+l}else l=D.toString(16);88==h&&(m=m.toUpperCase(),l=l.toUpperCase())}else 112==h&&(0===D?l="(nil)":(m="0x",l=D.toString(16)));if(v)for(;l.length<u;)l="0"+l;0<=g&&(t?m="+"+m:z&&(m=" "+m));"-"==l.charAt(0)&&(m="-"+m,l=l.substr(1));for(;m.length+l.length<w;)b?l+=" ":r?l="0"+l:m=" "+m;l=m+l;l.split("").forEach(function(C){f.push(C.charCodeAt(0))});break;case "f":case "F":case "e":case "E":case "g":case "G":g=c("double");if(isNaN(g))l="nan",r=!1;else if(isFinite(g)){v=!1;q=Math.min(u,20);if(103==
h||71==h)v=!0,u=u||1,q=parseInt(g.toExponential(q).split("e")[1],10),u>q&&-4<=q?(h=(103==h?"f":"F").charCodeAt(0),u-=q+1):(h=(103==h?"e":"E").charCodeAt(0),u--),q=Math.min(u,20);if(101==h||69==h)l=g.toExponential(q),/[eE][-+]\d$/.test(l)&&(l=l.slice(0,-1)+"0"+l.slice(-1));else if(102==h||70==h)l=g.toFixed(q),0===g&&(0>g||0===g&&-Infinity===1/g)&&(l="-"+l);m=l.split("e");if(v&&!n)for(;1<m[0].length&&m[0].includes(".")&&("0"==m[0].slice(-1)||"."==m[0].slice(-1));)m[0]=m[0].slice(0,-1);else for(n&&-1==
l.indexOf(".")&&(m[0]+=".");u>q++;)m[0]+="0";l=m[0]+(1<m.length?"e"+m[1]:"");69==h&&(l=l.toUpperCase());0<=g&&(t?l="+"+l:z&&(l=" "+l))}else l=(0>g?"-":"")+"inf",r=!1;for(;l.length<w;)l=b?l+" ":!r||"-"!=l[0]&&"+"!=l[0]?(r?"0":" ")+l:l[0]+"0"+l.slice(1);97>h&&(l=l.toUpperCase());l.split("").forEach(function(C){f.push(C.charCodeAt(0))});break;case "s":r=(t=c("i8*"))?pb(t):6;v&&(r=Math.min(r,u));if(!b)for(;r<w--;)f.push(32);if(t)for(n=0;n<r;n++)f.push(H[t++>>0]);else f=f.concat(Ia("(null)".substr(0,r)));
if(b)for(;r<w--;)f.push(32);break;case "c":for(b&&f.push(c("i8"));0<--w;)f.push(32);b||f.push(c("i8"));break;case "n":b=c("i32*");I[b>>2]=f.length;break;case "%":f.push(g);break;default:for(n=m;n<a+2;n++)f.push(G[n>>0])}a+=2}else f.push(g),a+=1}return f}
function qb(a){if(!a||!a.callee||!a.callee.name)return[null,"",""];var b=a.callee.name,c="(",d=!0,f;for(f in a){var g=a[f];d||(c+=", ");d=!1;c="number"===typeof g||"string"===typeof g?c+g:c+("("+typeof g+")")}c+=")";a=(a=a.callee.caller)?a.arguments:[];d&&(c="");return[a,b,c]}
function rb(a){a:{var b=Error();if(!b.stack){try{throw Error();}catch(u){b=u}if(!b.stack){b="(no stack trace available)";break a}}b=b.stack.toString()}b=b.slice(b.indexOf("\n",Math.max(b.lastIndexOf("_emscripten_log"),b.lastIndexOf("_emscripten_get_callstack")))+1);a&32&&da("EM_LOG_DEMANGLE is deprecated; ignoring");a&8&&"undefined"===typeof emscripten_source_map&&(da('Source map information is not available, emscripten_log with EM_LOG_C_STACK will be ignored. Build with "--pre-js $EMSCRIPTEN/src/emscripten-source-map.min.js" linker flag to add source map loading to code.'),
a=a^8|16);var c=null;if(a&128)for(c=qb(arguments);c[1].includes("_emscripten_");)c=qb(c[0]);var d=b.split("\n");b="";var f=/\s*(.*?)@(.*?):([0-9]+):([0-9]+)/,g=/\s*(.*?)@(.*):(.*)(:(.*))?/,h=/\s*at (.*?) \((.*):(.*):(.*)\)/,m;for(m in d){var t=d[m],n;if((n=h.exec(t))&&5==n.length){t=n[1];var r=n[2];var z=n[3];n=n[4]}else if((n=f.exec(t))||(n=g.exec(t)),n&&4<=n.length)t=n[1],r=n[2],z=n[3],n=n[4]|0;else{b+=t+"\n";continue}var w=!1;if(a&8){var v=emscripten_source_map.Ta({line:z,Aa:n});if(w=v&&v.source)a&
64&&(v.source=v.source.substring(v.source.replace(/\\/g,"/").lastIndexOf("/")+1)),b+="    at "+t+" ("+v.source+":"+v.line+":"+v.Aa+")\n"}if(a&16||!w)a&64&&(r=r.substring(r.replace(/\\/g,"/").lastIndexOf("/")+1)),b+=(w?"     = "+t:"    at "+t)+" ("+r+":"+z+":"+n+")\n";a&128&&c[0]&&(c[1]==t&&0<c[2].length&&(b=b.replace(/\s+$/,""),b+=" with values: "+c[1]+c[2]+"\n"),c=qb(c[0]))}return b=b.replace(/\s+$/,"")}
function Xa(a,b,c,d){a||(a=this);this.parent=a;this.X=a.X;this.fa=null;this.id=Sa++;this.name=b;this.mode=c;this.P={};this.R={};this.ga=d}Object.defineProperties(Xa.prototype,{read:{get:function(){return 365===(this.mode&365)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(this.mode&146)},set:function(a){a?this.mode|=146:this.mode&=-147}}});ib();R=Array(4096);cb(P,"/");T("/tmp");T("/home");T("/home/web_user");
(function(){T("/dev");Ga(259,{read:function(){return 0},write:function(b,c,d,f){return f}});eb("/dev/null",259);Fa(1280,Ja);Fa(1536,Ka);eb("/dev/tty",1280);eb("/dev/tty1",1536);var a=Ca();V("random",a);V("urandom",a);T("/dev/shm");T("/dev/shm/tmp")})();
(function(){T("/proc");var a=T("/proc/self");T("/proc/self/fd");cb({X:function(){var b=Ma(a,"fd",16895,73);b.P={ca:function(c,d){var f=Q[+d];if(!f)throw new O(8);c={parent:null,X:{ta:"fake"},P:{da:function(){return f.path}}};return c.parent=c}};return b}},"/proc/self/fd")})();
function Ia(a){for(var b=0,c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);127>=d?++b:b=2047>=d?b+2:65535>=d?b+3:b+4}b=Array(b+1);var f=b.length;c=0;if(0<f){d=c;f=c+f-1;for(var g=0;g<a.length;++g){var h=a.charCodeAt(g);if(55296<=h&&57343>=h){var m=a.charCodeAt(++g);h=65536+((h&1023)<<10)|m&1023}if(127>=h){if(c>=f)break;b[c++]=h}else{if(2047>=h){if(c+1>=f)break;b[c++]=192|h>>6}else{if(65535>=h){if(c+2>=f)break;b[c++]=224|h>>12}else{if(c+
3>=f)break;b[c++]=240|h>>18;b[c++]=128|h>>12&63}b[c++]=128|h>>6&63}b[c++]=128|h&63}}b[c]=0;a=c-d}else a=0;b.length=a;return b}
var tb={c:function(a,b,c){X=c;try{var d=Z(a);switch(b){case 0:var f=Y();return 0>f?-28:U(d.path,d.flags,0,f).Y;case 1:case 2:return 0;case 3:return d.flags;case 4:return f=Y(),d.flags|=f,0;case 12:return f=Y(),ja[f+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return I[sb()>>2]=28,-1;default:return-28}}catch(g){return"undefined"!==typeof W&&g instanceof O||E(g),-g.$}},g:function(a,b,c){X=c;try{var d=Z(a);switch(b){case 21509:case 21505:return d.T?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return d.T?
0:-59;case 21519:if(!d.T)return-59;var f=Y();return I[f>>2]=0;case 21520:return d.T?-28:-59;case 21531:a=f=Y();if(!d.R.Ba)throw new O(59);return d.R.Ba(d,b,a);case 21523:return d.T?0:-59;case 21524:return d.T?0:-59;default:E("bad ioctl syscall "+b)}}catch(g){return"undefined"!==typeof W&&g instanceof O||E(g),-g.$}},h:function(a,b,c){X=c;try{var d=a?F(H,a,void 0):"",f=c?Y():0;return U(d,b,f).Y}catch(g){return"undefined"!==typeof W&&g instanceof O||E(g),-g.$}},e:function(a,b,c){b=ob(b,c);b=F(b,0);a&
24&&(b=b.replace(/\s+$/,""),b+=(0<b.length?"\n":"")+rb(a));a&1?a&4?console.error(b):a&2?console.warn(b):a&512?console.info(b):a&256?console.debug(b):console.log(b):a&6?y(b):ca(b)},j:function(a,b,c){H.copyWithin(a,b,b+c)},k:function(a){var b=H.length;a>>>=0;if(2147483648<a)return!1;for(var c=1;4>=c;c*=2){var d=b*(1+.2/c);d=Math.min(d,a+100663296);d=Math.max(a,d);0<d%65536&&(d+=65536-d%65536);a:{try{ea.grow(Math.min(2147483648,d)-ia.byteLength+65535>>>16);la();var f=1;break a}catch(g){}f=void 0}if(f)return!0}return!1},
a:function(a){try{var b=Z(a);if(null===b.Y)throw new O(8);b.ja&&(b.ja=null);try{b.R.close&&b.R.close(b)}catch(c){throw c;}finally{Q[b.Y]=null}b.Y=null;return 0}catch(c){return"undefined"!==typeof W&&c instanceof O||E(c),c.$}},f:function(a,b,c,d){try{a:{for(var f=Z(a),g=a=0;g<c;g++){var h=I[b+(8*g+4)>>2],m=f,t=I[b+8*g>>2],n=h,r=void 0,z=G;if(0>n||0>r)throw new O(28);if(null===m.Y)throw new O(8);if(1===(m.flags&2097155))throw new O(8);if(16384===(m.node.mode&61440))throw new O(31);if(!m.R.read)throw new O(28);
var w="undefined"!==typeof r;if(!w)r=m.position;else if(!m.seekable)throw new O(70);var v=m.R.read(m,z,t,n,r);w||(m.position+=v);var u=v;if(0>u){var q=-1;break a}a+=u;if(u<h)break}q=a}I[d>>2]=q;return 0}catch(D){return"undefined"!==typeof W&&D instanceof O||E(D),D.$}},i:function(a,b,c,d,f){try{var g=Z(a);a=4294967296*c+(b>>>0);if(-9007199254740992>=a||9007199254740992<=a)return-61;hb(g,a,d);wa=[g.position>>>0,(M=g.position,1<=+Math.abs(M)?0<M?(Math.min(+Math.floor(M/4294967296),4294967295)|0)>>>0:
~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)];I[f>>2]=wa[0];I[f+4>>2]=wa[1];g.ja&&0===a&&0===d&&(g.ja=null);return 0}catch(h){return"undefined"!==typeof W&&h instanceof O||E(h),h.$}},b:function(a,b,c,d){try{a:{for(var f=Z(a),g=a=0;g<c;g++){var h=f,m=I[b+8*g>>2],t=I[b+(8*g+4)>>2],n=void 0,r=G;if(0>t||0>n)throw new O(28);if(null===h.Y)throw new O(8);if(0===(h.flags&2097155))throw new O(8);if(16384===(h.node.mode&61440))throw new O(31);if(!h.R.write)throw new O(28);h.seekable&&h.flags&1024&&hb(h,0,
2);var z="undefined"!==typeof n;if(!z)n=h.position;else if(!h.seekable)throw new O(70);var w=h.R.write(h,r,m,t,n,void 0);z||(h.position+=w);try{if(h.path&&Ta.onWriteToFile)Ta.onWriteToFile(h.path)}catch(q){y("FS.trackingDelegate['onWriteToFile']('"+h.path+"') threw an exception: "+q.message)}var v=w;if(0>v){var u=-1;break a}a+=v}u=a}I[d>>2]=u;return 0}catch(q){return"undefined"!==typeof W&&q instanceof O||E(q),q.$}},d:function(a){var b=Date.now()/1E3|0;a&&(I[a>>2]=b);return b}};
(function(){function a(f){e.asm=f.exports;ea=e.asm.l;la();ma=e.asm.N;oa.unshift(e.asm.m);J--;e.monitorRunDependencies&&e.monitorRunDependencies(J);0==J&&(null!==ra&&(clearInterval(ra),ra=null),K&&(f=K,K=null,f()))}function b(f){a(f.instance)}function c(f){return va().then(function(g){return WebAssembly.instantiate(g,d)}).then(f,function(g){y("failed to asynchronously prepare wasm: "+g);E(g)})}var d={a:tb};J++;e.monitorRunDependencies&&e.monitorRunDependencies(J);if(e.instantiateWasm)try{return e.instantiateWasm(d,
a)}catch(f){return y("Module.instantiateWasm callback failed with error: "+f),!1}(function(){return B||"function"!==typeof WebAssembly.instantiateStreaming||sa()||"function"!==typeof fetch?c(b):fetch(L,{credentials:"same-origin"}).then(function(f){return WebAssembly.instantiateStreaming(f,d).then(b,function(g){y("wasm streaming compile failed: "+g);y("falling back to ArrayBuffer instantiation");return c(b)})})})().catch(ba);return{}})();
e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.m).apply(null,arguments)};e._perseus_get_version=function(){return(e._perseus_get_version=e.asm.n).apply(null,arguments)};e._perseus_decoder_close=function(){return(e._perseus_decoder_close=e.asm.o).apply(null,arguments)};e._perseus_decoder_parse=function(){return(e._perseus_decoder_parse=e.asm.p).apply(null,arguments)};
e._perseus_decoder_get_dither_strength=function(){return(e._perseus_decoder_get_dither_strength=e.asm.q).apply(null,arguments)};e._perseus_decoder_get_dither_type=function(){return(e._perseus_decoder_get_dither_type=e.asm.r).apply(null,arguments)};e._perseus_decoder_clear_temporal=function(){return(e._perseus_decoder_clear_temporal=e.asm.s).apply(null,arguments)};e._perseus_decoder_open_wrapper=function(){return(e._perseus_decoder_open_wrapper=e.asm.t).apply(null,arguments)};
e._perseus_decoder_decode_wrapper=function(){return(e._perseus_decoder_decode_wrapper=e.asm.u).apply(null,arguments)};e._perseus_decoder_decode_base_wrapper=function(){return(e._perseus_decoder_decode_base_wrapper=e.asm.v).apply(null,arguments)};e._perseus_decoder_decode_high_wrapper=function(){return(e._perseus_decoder_decode_high_wrapper=e.asm.w).apply(null,arguments)};e._perseus_decoder_upscale_wrapper=function(){return(e._perseus_decoder_upscale_wrapper=e.asm.x).apply(null,arguments)};
e._perseus_decoder_parse_wrapper=function(){return(e._perseus_decoder_parse_wrapper=e.asm.y).apply(null,arguments)};e._perseus_decoder_get_surface_size=function(){return(e._perseus_decoder_get_surface_size=e.asm.z).apply(null,arguments)};e._perseus_decoder_get_base_hash=function(){return(e._perseus_decoder_get_base_hash=e.asm.A).apply(null,arguments)};e._perseus_start_tracing=function(){return(e._perseus_start_tracing=e.asm.B).apply(null,arguments)};
e._perseus_end_tracing=function(){return(e._perseus_end_tracing=e.asm.C).apply(null,arguments)};e._perseus_decoder_get_last_error_wrapper=function(){return(e._perseus_decoder_get_last_error_wrapper=e.asm.D).apply(null,arguments)};e._perseus_decoder_get_surface=function(){return(e._perseus_decoder_get_surface=e.asm.E).apply(null,arguments)};e._DPIVersion=function(){return(e._DPIVersion=e.asm.F).apply(null,arguments)};e._DPIVersionFull=function(){return(e._DPIVersionFull=e.asm.G).apply(null,arguments)};
e._DPIHash=function(){return(e._DPIHash=e.asm.H).apply(null,arguments)};e._DPIHashShort=function(){return(e._DPIHashShort=e.asm.I).apply(null,arguments)};var sb=e.___errno_location=function(){return(sb=e.___errno_location=e.asm.J).apply(null,arguments)},Pa=e._malloc=function(){return(Pa=e._malloc=e.asm.K).apply(null,arguments)};e._free=function(){return(e._free=e.asm.L).apply(null,arguments)};var pb=e._strlen=function(){return(pb=e._strlen=e.asm.M).apply(null,arguments)},ub;
K=function vb(){ub||wb();ub||(K=vb)};
function wb(){function a(){if(!ub&&(ub=!0,e.calledRun=!0,!fa)){e.noFSInit||jb||(jb=!0,ib(),e.stdin=e.stdin,e.stdout=e.stdout,e.stderr=e.stderr,e.stdin?V("stdin",e.stdin):fb("/dev/tty","/dev/stdin"),e.stdout?V("stdout",null,e.stdout):fb("/dev/tty","/dev/stdout"),e.stderr?V("stderr",null,e.stderr):fb("/dev/tty1","/dev/stderr"),U("/dev/stdin",0),U("/dev/stdout",1),U("/dev/stderr",1));ya(oa);aa(e);if(e.onRuntimeInitialized)e.onRuntimeInitialized();if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=
[e.postRun]);e.postRun.length;){var b=e.postRun.shift();pa.unshift(b)}ya(pa)}}if(!(0<J)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)qa();ya(na);0<J||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1);a()},1)):a())}}e.run=wb;if(e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();wb();


  return libDPIModule.ready
}
);
})();
if (typeof exports === 'object' && typeof module === 'object')
  module.exports = libDPIModule;
else if (typeof define === 'function' && define['amd'])
  define([], function() { return libDPIModule; });
else if (typeof exports === 'object')
  exports["libDPIModule"] = libDPIModule;

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).LCEVCdec={})}(this,(function(e){"use strict";function t(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function i(e){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?t(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function s(){s=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(E){h=function(e,t,i){return e[t]=i}}function u(e,t,i,s){var a=t&&t.prototype instanceof p?t:p,n=Object.create(a.prototype),l=new S(s||[]);return r(n,"_invoke",{value:R(e,i,l)}),n}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var d={};function p(){}function f(){}function v(){}var m={};h(m,n,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(W([])));x&&x!==t&&i.call(x,n)&&(m=x);var g=v.prototype=p.prototype=Object.create(m);function A(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function s(r,a,n,l){var o=c(e[r],e,a);if("throw"!==o.type){var h=o.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,n,l)}),(function(e){s("throw",e,n,l)})):t.resolve(u).then((function(e){h.value=e,n(h)}),(function(e){return s("throw",e,n,l)}))}l(o.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){s(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function R(e,t,i){var s="suspendedStart";return function(r,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===r)throw a;return G()}for(i.method=r,i.arg=a;;){var n=i.delegate;if(n){var l=y(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===s)throw s="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s="executing";var o=c(e,t,i);if("normal"===o.type){if(s=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(s="completed",i.method="throw",i.arg=o.arg)}}}function y(e,t){var i=t.method,s=e.iterator[i];if(void 0===s)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=c(s,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function W(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,r=function t(){for(;++s<e.length;)if(i.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:G}}function G(){return{value:void 0,done:!0}}return f.prototype=v,r(g,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=h(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,h(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},A(T.prototype),h(T.prototype,l,(function(){return this})),e.AsyncIterator=T,e.async=function(t,i,s,r,a){void 0===a&&(a=Promise);var n=new T(u(t,i,s,r),a);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},A(g),h(g,o,"Generator"),h(g,n,(function(){return this})),h(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var s in t)i.push(s);return i.reverse(),function e(){for(;i.length;){var s=i.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},e.values=W,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(i,s){return n.type="throw",n.arg=e,t.next=i,s&&(t.method="next",t.arg=void 0),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],n=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),o=i.call(a,"finallyLoc");if(l&&o){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=e,n.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),_(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var s=i.completion;if("throw"===s.type){var r=s.arg;_(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:W(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function r(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var s,r,a,n,l=[],o=!0,h=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;o=!1}else for(;!(o=(s=a.call(i)).done)&&(l.push(s.value),l.length!==t);o=!0);}catch(u){h=!0,r=u}finally{try{if(!o&&null!=i.return&&(n=i.return(),Object(n)!==n))return}finally{if(h)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function l(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,h(e,t,"get"))}function o(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,h(e,t,"set"),i),i}function h(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function u(e,t,i){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),i}function c(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function d(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t,i){d(e,t),t.set(e,i)}function f(e,t){d(e,t),t.add(e)}function v(e,t,i){var s=void 0===t?null:t,r=function(e,t){var i=atob(e);if(t){for(var s=new Uint8Array(i.length),r=0,a=i.length;r<a;++r)s[r]=i.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(s.buffer))}return i}(e,void 0!==i&&i),a=r.indexOf("\n",10)+1,n=r.substring(a)+(s?"//# sourceMappingURL="+s:""),l=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(l)}var m,b,x,g,A=(m="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ7IWZ1bmN0aW9uKHQpe3RbdC5OT05FPTBdPSJOT05FIix0W3QuRVJST1I9MV09IkVSUk9SIix0W3QuV0FSTklORz0yXT0iV0FSTklORyIsdFt0LklORk89M109IklORk8iLHRbdC5ERUJVRz00XT0iREVCVUciLHRbdC5WRVJCT1NFPTVdPSJWRVJCT1NFIn0odHx8KHQ9e30pKTtsZXQgZT10Lk5PTkU7dmFyIHI7ZnVuY3Rpb24gaSgpe2k9ZnVuY3Rpb24oKXtyZXR1cm4gdH07dmFyIHQ9e30sZT1PYmplY3QucHJvdG90eXBlLHI9ZS5oYXNPd25Qcm9wZXJ0eSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eXx8ZnVuY3Rpb24odCxlLHIpe3RbZV09ci52YWx1ZX0sYT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxzPWEuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixvPWEuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsaD1hLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gbCh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtsKHt9LCIiKX1jYXRjaChXKXtsPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBjKHQsZSxyLGkpe3ZhciBhPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgZD9lOmQscz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKSxvPW5ldyBFKGl8fFtdKTtyZXR1cm4gbihzLCJfaW52b2tlIix7dmFsdWU6TCh0LHIsbyl9KSxzfWZ1bmN0aW9uIHUodCxlLHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6dC5jYWxsKGUscil9fWNhdGNoKFcpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOld9fX10LndyYXA9Yzt2YXIgZj17fTtmdW5jdGlvbiBkKCl7fWZ1bmN0aW9uIHAoKXt9ZnVuY3Rpb24gdigpe312YXIgZz17fTtsKGcscywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKTt2YXIgbT1PYmplY3QuZ2V0UHJvdG90eXBlT2Ysdz1tJiZtKG0oayhbXSkpKTt3JiZ3IT09ZSYmci5jYWxsKHcscykmJihnPXcpO3ZhciB5PXYucHJvdG90eXBlPWQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZyk7ZnVuY3Rpb24gYih0KXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe2wodCxlLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9KSl9KSl9ZnVuY3Rpb24geCh0LGUpe2Z1bmN0aW9uIGkobixhLHMsbyl7dmFyIGg9dSh0W25dLHQsYSk7aWYoInRocm93IiE9PWgudHlwZSl7dmFyIGw9aC5hcmcsYz1sLnZhbHVlO3JldHVybiBjJiYib2JqZWN0Ij09dHlwZW9mIGMmJnIuY2FsbChjLCJfX2F3YWl0Iik/ZS5yZXNvbHZlKGMuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7aSgibmV4dCIsdCxzLG8pfSksKGZ1bmN0aW9uKHQpe2koInRocm93Iix0LHMsbyl9KSk6ZS5yZXNvbHZlKGMpLnRoZW4oKGZ1bmN0aW9uKHQpe2wudmFsdWU9dCxzKGwpfSksKGZ1bmN0aW9uKHQpe3JldHVybiBpKCJ0aHJvdyIsdCxzLG8pfSkpfW8oaC5hcmcpfXZhciBhO24odGhpcywiX2ludm9rZSIse3ZhbHVlOmZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbigpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxuKXtpKHQscixlLG4pfSkpfXJldHVybiBhPWE/YS50aGVuKG4sbik6bigpfX0pfWZ1bmN0aW9uIEwodCxlLHIpe3ZhciBpPSJzdXNwZW5kZWRTdGFydCI7cmV0dXJuIGZ1bmN0aW9uKG4sYSl7aWYoImV4ZWN1dGluZyI9PT1pKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKCJjb21wbGV0ZWQiPT09aSl7aWYoInRocm93Ij09PW4pdGhyb3cgYTtyZXR1cm4gTygpfWZvcihyLm1ldGhvZD1uLHIuYXJnPWE7Oyl7dmFyIHM9ci5kZWxlZ2F0ZTtpZihzKXt2YXIgbz1NKHMscik7aWYobyl7aWYobz09PWYpY29udGludWU7cmV0dXJuIG99fWlmKCJuZXh0Ij09PXIubWV0aG9kKXIuc2VudD1yLl9zZW50PXIuYXJnO2Vsc2UgaWYoInRocm93Ij09PXIubWV0aG9kKXtpZigic3VzcGVuZGVkU3RhcnQiPT09aSl0aHJvdyBpPSJjb21wbGV0ZWQiLHIuYXJnO3IuZGlzcGF0Y2hFeGNlcHRpb24oci5hcmcpfWVsc2UicmV0dXJuIj09PXIubWV0aG9kJiZyLmFicnVwdCgicmV0dXJuIixyLmFyZyk7aT0iZXhlY3V0aW5nIjt2YXIgaD11KHQsZSxyKTtpZigibm9ybWFsIj09PWgudHlwZSl7aWYoaT1yLmRvbmU/ImNvbXBsZXRlZCI6InN1c3BlbmRlZFlpZWxkIixoLmFyZz09PWYpY29udGludWU7cmV0dXJue3ZhbHVlOmguYXJnLGRvbmU6ci5kb25lfX0idGhyb3ciPT09aC50eXBlJiYoaT0iY29tcGxldGVkIixyLm1ldGhvZD0idGhyb3ciLHIuYXJnPWguYXJnKX19fWZ1bmN0aW9uIE0odCxlKXt2YXIgcj1lLm1ldGhvZCxpPXQuaXRlcmF0b3Jbcl07aWYodm9pZCAwPT09aSlyZXR1cm4gZS5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT1yJiZ0Lml0ZXJhdG9yLnJldHVybiYmKGUubWV0aG9kPSJyZXR1cm4iLGUuYXJnPXZvaWQgMCxNKHQsZSksInRocm93Ij09PWUubWV0aG9kKXx8InJldHVybiIhPT1yJiYoZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICciK3IrIicgbWV0aG9kIikpLGY7dmFyIG49dShpLHQuaXRlcmF0b3IsZS5hcmcpO2lmKCJ0aHJvdyI9PT1uLnR5cGUpcmV0dXJuIGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bi5hcmcsZS5kZWxlZ2F0ZT1udWxsLGY7dmFyIGE9bi5hcmc7cmV0dXJuIGE/YS5kb25lPyhlW3QucmVzdWx0TmFtZV09YS52YWx1ZSxlLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ZS5tZXRob2QmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9dm9pZCAwKSxlLmRlbGVnYXRlPW51bGwsZik6YTooZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLGUuZGVsZWdhdGU9bnVsbCxmKX1mdW5jdGlvbiBTKHQpe3ZhciBlPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoZS5jYXRjaExvYz10WzFdKSwyIGluIHQmJihlLmZpbmFsbHlMb2M9dFsyXSxlLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKGUpfWZ1bmN0aW9uIEQodCl7dmFyIGU9dC5jb21wbGV0aW9ufHx7fTtlLnR5cGU9Im5vcm1hbCIsZGVsZXRlIGUuYXJnLHQuY29tcGxldGlvbj1lfWZ1bmN0aW9uIEUodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHQuZm9yRWFjaChTLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIGsodCl7aWYodCl7dmFyIGU9dFtzXTtpZihlKXJldHVybiBlLmNhbGwodCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgaT0tMSxuPWZ1bmN0aW9uIGUoKXtmb3IoOysraTx0Lmxlbmd0aDspaWYoci5jYWxsKHQsaSkpcmV0dXJuIGUudmFsdWU9dFtpXSxlLmRvbmU9ITEsZTtyZXR1cm4gZS52YWx1ZT12b2lkIDAsZS5kb25lPSEwLGV9O3JldHVybiBuLm5leHQ9bn19cmV0dXJue25leHQ6T319ZnVuY3Rpb24gTygpe3JldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19cmV0dXJuIHAucHJvdG90eXBlPXYsbih5LCJjb25zdHJ1Y3RvciIse3ZhbHVlOnYsY29uZmlndXJhYmxlOiEwfSksbih2LCJjb25zdHJ1Y3RvciIse3ZhbHVlOnAsY29uZmlndXJhYmxlOiEwfSkscC5kaXNwbGF5TmFtZT1sKHYsaCwiR2VuZXJhdG9yRnVuY3Rpb24iKSx0LmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFlJiYoZT09PXB8fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0oZS5kaXNwbGF5TmFtZXx8ZS5uYW1lKSl9LHQubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LHYpOih0Ll9fcHJvdG9fXz12LGwodCxoLCJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHkpLHR9LHQuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LGIoeC5wcm90b3R5cGUpLGwoeC5wcm90b3R5cGUsbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSx0LkFzeW5jSXRlcmF0b3I9eCx0LmFzeW5jPWZ1bmN0aW9uKGUscixpLG4sYSl7dm9pZCAwPT09YSYmKGE9UHJvbWlzZSk7dmFyIHM9bmV3IHgoYyhlLHIsaSxuKSxhKTtyZXR1cm4gdC5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpP3M6cy5uZXh0KCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOnMubmV4dCgpfSkpfSxiKHkpLGwoeSxoLCJHZW5lcmF0b3IiKSxsKHkscywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxsKHksInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0pKSx0LmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0KHQpLHI9W107Zm9yKHZhciBpIGluIGUpci5wdXNoKGkpO3JldHVybiByLnJldmVyc2UoKSxmdW5jdGlvbiB0KCl7Zm9yKDtyLmxlbmd0aDspe3ZhciBpPXIucG9wKCk7aWYoaSBpbiBlKXJldHVybiB0LnZhbHVlPWksdC5kb25lPSExLHR9cmV0dXJuIHQuZG9uZT0hMCx0fX0sdC52YWx1ZXM9ayxFLnByb3RvdHlwZT17Y29uc3RydWN0b3I6RSxyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD12b2lkIDAsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9dm9pZCAwLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKEQpLCF0KWZvcih2YXIgZSBpbiB0aGlzKSJ0Ij09PWUuY2hhckF0KDApJiZyLmNhbGwodGhpcyxlKSYmIWlzTmFOKCtlLnNsaWNlKDEpKSYmKHRoaXNbZV09dm9pZCAwKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBlPXRoaXM7ZnVuY3Rpb24gaShyLGkpe3JldHVybiBzLnR5cGU9InRocm93IixzLmFyZz10LGUubmV4dD1yLGkmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9dm9pZCAwKSwhIWl9Zm9yKHZhciBuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIGE9dGhpcy50cnlFbnRyaWVzW25dLHM9YS5jb21wbGV0aW9uO2lmKCJyb290Ij09PWEudHJ5TG9jKXJldHVybiBpKCJlbmQiKTtpZihhLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgbz1yLmNhbGwoYSwiY2F0Y2hMb2MiKSxoPXIuY2FsbChhLCJmaW5hbGx5TG9jIik7aWYobyYmaCl7aWYodGhpcy5wcmV2PGEuY2F0Y2hMb2MpcmV0dXJuIGkoYS5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PGEuZmluYWxseUxvYylyZXR1cm4gaShhLmZpbmFsbHlMb2MpfWVsc2UgaWYobyl7aWYodGhpcy5wcmV2PGEuY2F0Y2hMb2MpcmV0dXJuIGkoYS5jYXRjaExvYywhMCl9ZWxzZXtpZighaCl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PGEuZmluYWxseUxvYylyZXR1cm4gaShhLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbaV07aWYobi50cnlMb2M8PXRoaXMucHJldiYmci5jYWxsKG4sImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PG4uZmluYWxseUxvYyl7dmFyIGE9bjticmVha319YSYmKCJicmVhayI9PT10fHwiY29udGludWUiPT09dCkmJmEudHJ5TG9jPD1lJiZlPD1hLmZpbmFsbHlMb2MmJihhPW51bGwpO3ZhciBzPWE/YS5jb21wbGV0aW9uOnt9O3JldHVybiBzLnR5cGU9dCxzLmFyZz1lLGE/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9YS5maW5hbGx5TG9jLGYpOnRoaXMuY29tcGxldGUocyl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsZSl7aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4iYnJlYWsiPT09dC50eXBlfHwiY29udGludWUiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzoicmV0dXJuIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT10LnR5cGUmJmUmJih0aGlzLm5leHQ9ZSksZn0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxEKHIpLGZ9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M9PT10KXt2YXIgaT1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PWkudHlwZSl7dmFyIG49aS5hcmc7RChyKX1yZXR1cm4gbn19dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOmsodCkscmVzdWx0TmFtZTplLG5leHRMb2M6cn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz12b2lkIDApLGZ9fSx0fWZ1bmN0aW9uIG4odCxlLHIpe3JldHVybihlPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7aWYoIm9iamVjdCIhPXR5cGVvZiB0fHxudWxsPT09dClyZXR1cm4gdDt2YXIgcj10W1N5bWJvbC50b1ByaW1pdGl2ZV07aWYodm9pZCAwIT09cil7dmFyIGk9ci5jYWxsKHQsZXx8ImRlZmF1bHQiKTtpZigib2JqZWN0IiE9dHlwZW9mIGkpcmV0dXJuIGk7dGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKX1yZXR1cm4oInN0cmluZyI9PT1lP1N0cmluZzpOdW1iZXIpKHQpfSh0LCJzdHJpbmciKTtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGU/ZTpTdHJpbmcoZSl9KGUpKWluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09cix0fWZ1bmN0aW9uIGEodCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtpZihlLmdldClyZXR1cm4gZS5nZXQuY2FsbCh0KTtyZXR1cm4gZS52YWx1ZX0odCxvKHQsZSwiZ2V0IikpfWZ1bmN0aW9uIHModCxlLHIpe3JldHVybiBmdW5jdGlvbih0LGUscil7aWYoZS5zZXQpZS5zZXQuY2FsbCh0LHIpO2Vsc2V7aWYoIWUud3JpdGFibGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiYXR0ZW1wdGVkIHRvIHNldCByZWFkIG9ubHkgcHJpdmF0ZSBmaWVsZCIpO2UudmFsdWU9cn19KHQsbyh0LGUsInNldCIpLHIpLHJ9ZnVuY3Rpb24gbyh0LGUscil7aWYoIWUuaGFzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoImF0dGVtcHRlZCB0byAiK3IrIiBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZSIpO3JldHVybiBlLmdldCh0KX1mdW5jdGlvbiBoKHQsZSxyKXtpZighZS5oYXModCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZSIpO3JldHVybiByfWZ1bmN0aW9uIGwodCxlKXtpZihlLmhhcyh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgaW5pdGlhbGl6ZSB0aGUgc2FtZSBwcml2YXRlIGVsZW1lbnRzIHR3aWNlIG9uIGFuIG9iamVjdCIpfWZ1bmN0aW9uIGModCxlLHIpe2wodCxlKSxlLnNldCh0LHIpfWZ1bmN0aW9uIHUodCxlKXtsKHQsZSksZS5hZGQodCl9IWZ1bmN0aW9uKHIpe3IuaW5mbz1mdW5jdGlvbiguLi5yKXtlPj10LklORk8mJmNvbnNvbGUuaW5mbyhgW0xDRVZDIElORk9dICR7cn1gKX0sci5kZWJ1Zz1mdW5jdGlvbiguLi5yKXtlPj10LkRFQlVHJiZjb25zb2xlLmRlYnVnKGBbTENFVkMgREVCVUddICR7cn1gKX0sci5lcnJvcj1mdW5jdGlvbiguLi5yKXtlPj10LkVSUk9SJiZjb25zb2xlLmVycm9yKGBbTENFVkMgRVJST1JdICR7cn1gKX0sci5hc3NlcnQ9ZnVuY3Rpb24oLi4ucil7ZT49dC5WRVJCT1NFJiZjb25zb2xlLmFzc2VydChgW0xDRVZDIEFTU0VSVF0gJHtyfWApfSxyLm1zZz1mdW5jdGlvbiguLi5yKXtlPj10LlZFUkJPU0UmJmNvbnNvbGUubG9nKGBbTENFVkMgTE9HXSAke3J9YCl9LHIud2Fybj1mdW5jdGlvbiguLi5yKXtlPj10LldBUk5JTkcmJihuYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgiVHJpZGVudC83LjAiKT4tMT9jb25zb2xlLmxvZyhgW0xDRVZDIFdBUk5dICR7cn1gKTpjb25zb2xlLndhcm4oYFtMQ0VWQyBXQVJOXSAke3J9YCkpfSxyLmFsd2F5cz1mdW5jdGlvbiguLi50KXtjb25zb2xlLmluZm8oYFtMQ0VWQ10gJHt0fWApfX0ocnx8KHI9e30pKTt2YXIgZj0wLGQ9MSxwPTIsdj1uZXcgV2Vha01hcCxnPW5ldyBXZWFrTWFwLG09bmV3IFdlYWtNYXA7dmFyIHc9Y2xhc3N7Y29uc3RydWN0b3IodCxlKXtjKHRoaXMsdix7d3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLGModGhpcyxnLHt3cml0YWJsZTohMCx2YWx1ZTohMX0pLGModGhpcyxtLHt3cml0YWJsZTohMCx2YWx1ZTowfSkscyh0aGlzLHYsbmV3IERhdGFWaWV3KHQpKSxzKHRoaXMsZywhIWUpfWhhc01vcmVEYXRhKCl7cmV0dXJuIGEodGhpcyxtKTxhKHRoaXMsdikuYnl0ZUxlbmd0aH1yZXNldFBvc2l0aW9uKCl7cyh0aGlzLG0sMCl9c2V0UG9zaXRpb24odCl7dD49MCYmdDxhKHRoaXMsdikuYnl0ZUxlbmd0aD9zKHRoaXMsbSx0KTpyLmVycm9yKGBUaGUgZ2l2ZW4gcG9zaXRpb24sICR7dH0sIGlzIG91dCBvZiByYW5nZWApfWdldFBvc2l0aW9uKCl7cmV0dXJuIGEodGhpcyxtKX1nZXRMZW5ndGgoKXtyZXR1cm4gYSh0aGlzLHYpLmJ5dGVMZW5ndGh9cmVhZEludDgoKXt2YXIgdDt0cnl7dD1hKHRoaXMsdikuZ2V0SW50OChhKHRoaXMsbSkpfWNhdGNoKGUpe3IuZXJyb3IoZSl9cmV0dXJuIHModGhpcyxtLGEodGhpcyxtKSsxKSx0fXJlYWRJbnQxNigpe3ZhciB0O3RyeXt0PWEodGhpcyx2KS5nZXRJbnQxNihhKHRoaXMsbSksYSh0aGlzLGcpKX1jYXRjaChlKXtyLmVycm9yKGUpfXJldHVybiBzKHRoaXMsbSxhKHRoaXMsbSkrMiksdH1yZWFkSW50MzIoKXt2YXIgdDt0cnl7dD1hKHRoaXMsdikuZ2V0SW50MzIoYSh0aGlzLG0pLGEodGhpcyxnKSl9Y2F0Y2goZSl7ci5lcnJvcihlKX1yZXR1cm4gcyh0aGlzLG0sYSh0aGlzLG0pKzQpLHR9cmVhZEludDY0KCl7cmV0dXJuIHRoaXMucmVhZEludDMyKGEodGhpcyxtKSxhKHRoaXMsZykpKjIqKjMyK3RoaXMucmVhZFVpbnQzMihhKHRoaXMsbSksYSh0aGlzLGcpKX1yZWFkVWludDgoKXt2YXIgdDt0cnl7dD1hKHRoaXMsdikuZ2V0VWludDgoYSh0aGlzLG0pKX1jYXRjaChlKXtyLmVycm9yKGUpfXJldHVybiBzKHRoaXMsbSxhKHRoaXMsbSkrMSksdH1yZWFkVWludDE2KCl7dmFyIHQ7dHJ5e3Q9YSh0aGlzLHYpLmdldFVpbnQxNihhKHRoaXMsbSksYSh0aGlzLGcpKX1jYXRjaChlKXtyLmVycm9yKGUpfXJldHVybiBzKHRoaXMsbSxhKHRoaXMsbSkrMiksdH1yZWFkVWludDMyKCl7dmFyIHQ7dHJ5e3Q9YSh0aGlzLHYpLmdldFVpbnQzMihhKHRoaXMsbSksYSh0aGlzLGcpKX1jYXRjaChlKXtyLmVycm9yKGUpfXJldHVybiBzKHRoaXMsbSxhKHRoaXMsbSkrNCksdH1yZWFkVWludDY0KCl7dmFyIHQ9YSh0aGlzLHYpLmdldFVpbnQzMihhKHRoaXMsbSksYSh0aGlzLGcpKSxlPWEodGhpcyx2KS5nZXRVaW50MzIoYSh0aGlzLG0pKzQsYSh0aGlzLGcpKSxpPTIqKjMyLG49YSh0aGlzLGcpP3QraSplOmkqdCtlO3JldHVybiBOdW1iZXIuaXNTYWZlSW50ZWdlcihuKXx8KHIud2FybihgJHtufSBleGNlZWRzIE1BWF9TQUZFX0lOVEVHRVIuIFZhbHVlIHNldCB0byAwYCksbj0wKSxzKHRoaXMsbSxhKHRoaXMsbSkrOCksbn1yZWFkQnl0ZXModCl7YSh0aGlzLG0pK3Q+YSh0aGlzLHYpLmJ5dGVMZW5ndGgmJnIuZXJyb3IoIlJlYWQgb3V0IG9mIGJvdW5kcyIpO3ZhciBlPW5ldyBVaW50OEFycmF5KGEodGhpcyx2KS5idWZmZXIsYSh0aGlzLHYpLmJ5dGVPZmZzZXQrYSh0aGlzLG0pLHQpO3JldHVybiBzKHRoaXMsbSxhKHRoaXMsbSkrdCksbmV3IFVpbnQ4QXJyYXkoZSl9d3JpdGVJbnQ4KHQpe3RyeXthKHRoaXMsdikuc2V0SW50OChhKHRoaXMsbSksdCl9Y2F0Y2goZSl7ci5lcnJvcihlKX1zKHRoaXMsbSxhKHRoaXMsbSkrMSl9d3JpdGVJbnQxNih0KXt0cnl7YSh0aGlzLHYpLnNldEludDE2KGEodGhpcyxtKSx0LGEodGhpcyxnKSl9Y2F0Y2goZSl7ci5lcnJvcihlKX1zKHRoaXMsbSxhKHRoaXMsbSkrMil9d3JpdGVJbnQzMih0KXt0cnl7YSh0aGlzLHYpLnNldEludDMyKGEodGhpcyxtKSx0LGEodGhpcyxnKSl9Y2F0Y2goZSl7ci5lcnJvcihlKX1zKHRoaXMsbSxhKHRoaXMsbSkrNCl9d3JpdGVVaW50OCh0KXt0cnl7YSh0aGlzLHYpLnNldFVpbnQ4KGEodGhpcyxtKSx0KX1jYXRjaChlKXtyLmVycm9yKGUpfXModGhpcyxtLGEodGhpcyxtKSsxKX13cml0ZVVpbnQxNih0KXt0cnl7YSh0aGlzLHYpLnNldFVpbnQxNihhKHRoaXMsbSksdCxhKHRoaXMsZykpfWNhdGNoKGUpe3IuZXJyb3IoZSl9cyh0aGlzLG0sYSh0aGlzLG0pKzIpfXdyaXRlVWludDMyKHQpe3RyeXthKHRoaXMsdikuc2V0VWludDMyKGEodGhpcyxtKSx0LGEodGhpcyxnKSl9Y2F0Y2goZSl7ci5lcnJvcihlKX1zKHRoaXMsbSxhKHRoaXMsbSkrNCl9c2tpcCh0KXthKHRoaXMsbSkrdD5hKHRoaXMsdikuYnl0ZUxlbmd0aCYmci5lcnJvcihgU2tpcCBvdXQgb2YgYm91bmRzICR7YSh0aGlzLG0pfSAke3R9YCkscyh0aGlzLG0sYSh0aGlzLG0pK3QpfXJld2luZCh0KXthKHRoaXMsbSk8dCYmci5lcnJvcigiUmV3aW5kIG91dCBvZiBib3VuZHMiKSxzKHRoaXMsbSxhKHRoaXMsbSktdCl9fTt2YXIgeT1jbGFzc3tjb25zdHJ1Y3Rvcigpe24odGhpcywic2l6ZSIsMCksbih0aGlzLCJ0eXBlIiwwKSxuKHRoaXMsInN0YXJ0UG9zaXRpb24iLDApfX0sYj1uZXcgV2Vha01hcCx4PW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXA7Y2xhc3MgTXtjb25zdHJ1Y3Rvcih0LGUpe24odGhpcywicHJvbWlzZSIsbnVsbCksbih0aGlzLCJ2ZXJzaW9uIixudWxsKSxuKHRoaXMsImxvYWRPblN0YXJ0dXAiLCEwKSxjKHRoaXMsYix7d3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLGModGhpcyx4LHt3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksYyh0aGlzLEwse3dyaXRhYmxlOiEwLHZhbHVlOjB9KSxzKHRoaXMsYix0KSxzKHRoaXMseCxlKX1sb2FkKCl7aWYoIXRoaXMudmVyc2lvbil0aHJvdyBuZXcgRXJyb3IoIlRoZSBkZW11eGVyIHZlcnNpb24gaGFzIG5vdCBiZWVuIHNwZWNpZmllZC4gUGxlYXNlIHNldCBhIGRlbXV4ZXIgdmVyc2lvbi4iKTtyZXR1cm4gcyh0aGlzLEwsTS5TdGF0ZS5MT0FESU5HKSxhKHRoaXMseCkuY2FsbCh0aGlzLGEodGhpcyxiKS5jYWxsKHRoaXMsdGhpcy52ZXJzaW9uKSx0aGlzLmRvbmUuYmluZCh0aGlzKSl9aXNXYWl0aW5nKCl7cmV0dXJuIGEodGhpcyxMKT09PU0uU3RhdGUuSURMRX1pc0xvYWRpbmcoKXtyZXR1cm4gYSh0aGlzLEwpPT09TS5TdGF0ZS5MT0FESU5HfWlzTG9hZGVkKCl7cmV0dXJuIGEodGhpcyxMKT09PU0uU3RhdGUuTE9BREVEfWRvbmUoKXtzKHRoaXMsTCxNLlN0YXRlLkxPQURFRCl9fW4oTSwiU3RhdGUiLHtJRExFOjAsTE9BRElORzoxLExPQURFRDoyLEVSUk9SOjN9KTt2YXIgUz1NO3RyeXtzZWxmLnBlcmZvcm1hbmNlLm5vdy5iaW5kKGdsb2JhbC5wZXJmb3JtYW5jZSl9Y2F0Y2goY3Qpe312YXIgRD1uZXcgVWludDhBcnJheShbMTY3LDE5NiwxMDksMjM3LDczLDIxNiw1NiwyMzUsMTU0LDE3MywxMDksMTY2LDEzMiwxNTEsMTY3LDg0XSksRT1uZXcgVWludDhBcnJheShbMTgwLDAsODAsMF0pLGs9e0ZUWVA6MTcxODkwOTI5NixNREFUOjE4MzUyOTUwOTIsTUZIRDoxODM1NDI3OTQwLE1PT0Y6MTgzNjAxOTU1OCxNT09WOjE4MzYwMTk1NzQsU0FJTzoxOTM1NzYzODIzLFNBSVo6MTkzNTc2MzgzNCxTQkdQOjE5MzU4Mjg4NDgsU0dQRDoxOTM2MTU4ODIwLFNJRFg6MTkzNjI4Njg0MCxTVFlQOjE5MzcwMTMxMDQsU1VCUzoxOTM3MDcyNzU1LFRGRFQ6MTk1Mjg2NzQ0NCxURkhEOjE5NTI4Njg0NTIsVFJBRjoxOTUzNjUzMDk0LFRSVU46MTk1MzY1ODIyMn0sTz1uZXcgV2Vha01hcCxXPW5ldyBXZWFrTWFwLEk9bmV3IFdlYWtNYXAsTj1uZXcgV2Vha01hcCxBPW5ldyBXZWFrTWFwLFA9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxSPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsXz1uZXcgV2Vha01hcCxDPW5ldyBXZWFrTWFwLEI9bmV3IFdlYWtNYXAsRj1uZXcgV2Vha01hcCxHPW5ldyBXZWFrTWFwLFY9bmV3IFdlYWtNYXAsaj1uZXcgV2Vha01hcCwkPW5ldyBXZWFrTWFwLHo9bmV3IFdlYWtNYXAsSD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFg9bmV3IFdlYWtNYXAsWj1uZXcgV2Vha1NldCxxPW5ldyBXZWFrU2V0LEo9bmV3IFdlYWtTZXQsSz1uZXcgV2Vha1NldCxRPW5ldyBXZWFrU2V0LHR0PW5ldyBXZWFrU2V0O2NsYXNzIGV0e2NvbnN0cnVjdG9yKHQpe3UodGhpcyx0dCksdSh0aGlzLFEpLHUodGhpcyxLKSx1KHRoaXMsSiksdSh0aGlzLHEpLHUodGhpcyxaKSxjKHRoaXMsTyx7d3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLGModGhpcyxXLHt3cml0YWJsZTohMCx2YWx1ZTowfSksYyh0aGlzLEkse3dyaXRhYmxlOiEwLHZhbHVlOjB9KSxjKHRoaXMsTix7d3JpdGFibGU6ITAsdmFsdWU6ITF9KSxjKHRoaXMsQSx7d3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLGModGhpcyxQLHt3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksYyh0aGlzLFUse3dyaXRhYmxlOiEwLHZhbHVlOjB9KSxjKHRoaXMsUix7d3JpdGFibGU6ITAsdmFsdWU6MH0pLGModGhpcyxULHt3cml0YWJsZTohMCx2YWx1ZTowfSksYyh0aGlzLF8se3dyaXRhYmxlOiEwLHZhbHVlOjB9KSxjKHRoaXMsQyx7d3JpdGFibGU6ITAsdmFsdWU6MH0pLGModGhpcyxCLHt3cml0YWJsZTohMCx2YWx1ZTowfSksYyh0aGlzLEYse3dyaXRhYmxlOiEwLHZhbHVlOjB9KSxjKHRoaXMsRyx7d3JpdGFibGU6ITAsdmFsdWU6MH0pLGModGhpcyxWLHt3cml0YWJsZTohMCx2YWx1ZTotMX0pLGModGhpcyxqLHt3cml0YWJsZTohMCx2YWx1ZTowfSksYyh0aGlzLCQse3dyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxjKHRoaXMseix7d3JpdGFibGU6ITAsdmFsdWU6MH0pLGModGhpcyxILHt3cml0YWJsZTohMCx2YWx1ZTowfSksYyh0aGlzLFkse3dyaXRhYmxlOiEwLHZhbHVlOjB9KSxjKHRoaXMsWCx7d3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLHModGhpcyxYLHQpfWdldCBsY2V2Y01hcCgpe3JldHVybiBhKHRoaXMsTyl9c3RhdGljIGNvbXBhcmVBcnJheXModCxlKXtpZih0Lmxlbmd0aCE9PWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj10Lmxlbmd0aCxpPTA7aTxyO2krPTEpaWYodFtpXSE9PWVbaV0pcmV0dXJuITE7cmV0dXJuITB9X3Jlc2V0TGNldmNNYXAoKXtzKHRoaXMsTyxuZXcgTWFwKX1fZGVtdXhJbml0KCl7ImZ1bmN0aW9uIj09dHlwZW9mIGltcG9ydFNjcmlwdHMmJihldC5NUDREZW11eGVyLmxvYWRPblN0YXJ0dXAmJmV0Lk1QNERlbXV4ZXIuaXNXYWl0aW5nKCkmJmV0Lk1QNERlbXV4ZXIubG9hZCgpLGV0LldlYk1EZW11eGVyLmxvYWRPblN0YXJ0dXAmJmV0LldlYk1EZW11eGVyLmlzV2FpdGluZygpJiYoZXQuV2ViTURlbXV4ZXIucHJvbWlzZT1ldC5XZWJNRGVtdXhlci5sb2FkKCkudGhlbigoKCk9PnRoaXMuX2RlbXV4SW5pdCgpKSkpLHModGhpcyx6LDApLHRoaXMuX3Jlc2V0TGNldmNNYXAoKSxldC5XZWJNRGVtdXhlci5pc0xvYWRlZCgpJiYocyh0aGlzLFAsbmV3IEVibWxEZWNvZGVyKSxhKHRoaXMsUCkub24oImRhdGEiLGgodGhpcyxaLHJ0KS5iaW5kKHRoaXMpKSksZXQuTVA0RGVtdXhlci5pc0xvYWRlZCgpJiYocyh0aGlzLEEsTVA0Qm94LmNyZWF0ZUZpbGUoKSkscyh0aGlzLFcsMCksYSh0aGlzLEEpLm9uRXJyb3I9dD0+e3IuZGVidWcoIm1wNGJveCBmYWlsZWQgdG8gcGFyc2UgZGF0YS4iKSxyLmVycm9yKHQpfSxhKHRoaXMsQSkub25Nb292U3RhcnQ9dD0+e3IuZGVidWcoIlN0YXJ0aW5nIHRvIHJlY2VpdmUgRmlsZSBJbmZvcm1hdGlvbiIpLHIuZGVidWcodCl9LGEodGhpcyxBKS5vblJlYWR5PXQ9PntyLmRlYnVnKCJSZWNlaXZlZCBGaWxlIEluZm9ybWF0aW9uIiksYSh0aGlzLEEpLnNldEV4dHJhY3Rpb25PcHRpb25zKHQudHJhY2tzWzBdLmlkLHRoaXMse25iU2FtcGxlczoxZTN9KSxhKHRoaXMsQSkuc3RhcnQoKX0sYSh0aGlzLEEpLm9uU2FtcGxlcz0odCxlLGksbik9Pnt2YXIgbz0wLGw9MDtkb3tpZighaVtvXSlicmVhaztsPWlbb10uZHVyYXRpb24sbys9MX13aGlsZShsPDJ8fGw+NzIwMCk7Zm9yKGEodGhpcyxJKSE9PWEodGhpcyxIKSYmcyh0aGlzLHosMCksci5kZWJ1ZyhgQmFzZSBNZWRpYSBEZWNvZGUgVGltZTogJHthKHRoaXMsSSl9YCksbz1pLmxlbmd0aDtvPjA7by09MSl7dmFyIGM9aS5sZW5ndGgtbzthKHRoaXMsTikmJihpW2NdLmR0cz1hKHRoaXMsSSkrKGMrYSh0aGlzLHopKSpsLGlbY10uY3RzPWEodGhpcyxJKStpW2NdLmN0cy1pW2NdLmR0cysoYythKHRoaXMseikpKmwpLHZvaWQgMD09PW4mJihuPWEodGhpcyxWKSk7dmFyIHU9aVtjXS5kYXRhLGY9aVtjXS5jdHMsZD1baVtjXS5jdHMsaVtjXS50aW1lc2NhbGUsaVtjXS5kdXJhdGlvbixhKHRoaXMsSSksaVtjXS5pc19zeW5jLDBdO2V0LmNvbnZlcnRBVkNDdG9Bbm5leEIodSksaCh0aGlzLEssYXQpLmNhbGwodGhpcyx1LGYsZCxuKX1zKHRoaXMseixpLmxlbmd0aCkscyh0aGlzLEgsYSh0aGlzLEkpKX0pKX1fc2VsZWN0RGVtdXhlcih0LGUsbixhLHMpe3ZhciBvLGw9dGhpcztyZXR1cm4gaSgpLmFzeW5jKChmdW5jdGlvbihpKXtmb3IoOzspc3dpdGNoKGkucHJldj1pLm5leHQpe2Nhc2UgMDpvPWk9PntyLmRlYnVnKGkpLGwuX2RlbXV4SW5pdCgpLDE9PT1zP2gobCxKLG50KS5jYWxsKGwsdCxlLG4sYSk6aChsLHEsaXQpLmNhbGwobCx0LGUsbixhKX0sMT09PXM/aChsLEosbnQpLmNhbGwobCx0LGUsbixhKS5jYXRjaCgodD0+byh0KSkpOmgobCxxLGl0KS5jYWxsKGwsdCxlLG4sYSkuY2F0Y2goKHQ9Pm8odCkpKTtjYXNlIDI6Y2FzZSJlbmQiOnJldHVybiBpLnN0b3AoKX19KSxudWxsLG51bGwsbnVsbCxQcm9taXNlKX1fcmF3TGNldmNEYXRhKHQsZSxyLG4scyl7dmFyIG8saD10aGlzO3JldHVybiBpKCkuYXN5bmMoKGZ1bmN0aW9uKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOm89W2UscixuLHMsITAsMF0sYShoLFgpLnBvc3RNZXNzYWdlKHtpZDoicmF3TENFVkMiLGVuZDohMSxsZXZlbDotMSxmcmFtZVNhbXBsZTpvLGxjZXZjRGF0YTp0fSk7Y2FzZSAyOmNhc2UiZW5kIjpyZXR1cm4gaS5zdG9wKCl9fSksbnVsbCxudWxsLG51bGwsUHJvbWlzZSl9X3Jhd05hbExjZXZjRGF0YSh0LGUscil7dmFyIG4sYT10aGlzO3JldHVybiBpKCkuYXN5bmMoKGZ1bmN0aW9uKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOm49W2UsMSxOdW1iZXIuTmFOLE51bWJlci5OYU4sITAsMF0sMiE9PXImJmV0LmNvbnZlcnRBVkNDdG9Bbm5leEIodCksaChhLEssYXQpLmNhbGwoYSx0LGUsbiwtMSk7Y2FzZSAzOmNhc2UiZW5kIjpyZXR1cm4gaS5zdG9wKCl9fSksbnVsbCxudWxsLG51bGwsUHJvbWlzZSl9c3RhdGljIGNvbnZlcnRBVkNDdG9Bbm5leEIodCl7dmFyIGU9MCxyPTA7ZG97cj0wLHI9KHI9KHI9KHJ8PXRbZV0pPDw4fHRbZSsxXSk8PDh8dFtlKzJdKTw8OHx0W2UrM10sdFtlXT0wLHRbZSs9MV09MCx0W2UrPTFdPTAsdFtlKz0xXT0xLGUrPTEsZSs9cn13aGlsZShlPHQubGVuZ3RoKX1zdGF0aWMgaXNOYWxVbml0SGVhZGVyKHQsZSl7cmV0dXJuIDA9PT10W2VdJiYwPT09dFtlKzFdJiYxPT09dFtlKzJdfXN0YXRpYyBpc05hbFVuaXRTZWlTZWdtZW50KHQsZSl7dmFyIHIsaSxuLGE9ZSszO2lmKDY9PT10W2FdKXI9ZixpPTU7ZWxzZSBpZig3OD09PXRbYV0pcj1kLGk9NjtlbHNle2lmKHRbYSsxXT4+PjMhPTIzKXJldHVybnt9O3I9cCxpPTZ9dmFyIHM9ZStpLTE7aWYoND09PXRbc10pbj0hMDtlbHNle2lmKDUhPT10W3NdKXJldHVybnt9O249ITF9cmV0dXJue2lzU2VpU2VnbWVudDohMCxjb2RlYzpyLGhlYWRlckxlbmd0aDppLHJlZ2lzdGVyZWQ6bn19fWZ1bmN0aW9uIHJ0KHQpe2lmKHModGhpcyx6LDApLCEodC5sZW5ndGg8PTEpKXt2YXIgZT10WzFdLm5hbWU7aWYoWyJUaW1lY29kZSIsIlRpbWVjb2RlU2NhbGUiLCJCbG9jayIsIkJsb2NrQWRkSUQiLCJCbG9ja0FkZGl0aW9uYWwiXS5pbmNsdWRlcyhlKSlzd2l0Y2goZSl7Y2FzZSJUaW1lY29kZVNjYWxlIjooKCk9PntzKHRoaXMsQyx0WzFdLnZhbHVlLzFlMyl9KSgpO2JyZWFrO2Nhc2UiVGltZWNvZGUiOigoKT0+e3ModGhpcyxSLDEqdFsxXS52YWx1ZSl9KSgpO2JyZWFrO2Nhc2UiQmxvY2tBZGRJRCI6KCgpPT57cyh0aGlzLEIsdFsxXS5kYXRhWzBdKX0pKCk7YnJlYWs7Y2FzZSJCbG9jayI6KCgpPT57cyh0aGlzLFUsYSh0aGlzLFIpKzEqdFsxXS52YWx1ZSkscyh0aGlzLF8sdFsxXS52YWx1ZS1hKHRoaXMsVCkpLHModGhpcyxULHRbMV0udmFsdWUpfSkoKTticmVhaztjYXNlIkJsb2NrQWRkaXRpb25hbCI6KCgpPT57aWYoYSh0aGlzLEkpIT09YSh0aGlzLEgpJiZzKHRoaXMseiwwKSxhKHRoaXMsTikpe3ZhciBlPWEodGhpcyxJKSthKHRoaXMseikqYSh0aGlzLFQpO3ModGhpcyxVLGEodGhpcyxJKSthKHRoaXMsVSktZSthKHRoaXMseikqYSh0aGlzLFQpKX12YXIgaT1bYSh0aGlzLFUpLGEodGhpcyxDKSxhKHRoaXMsXyksYSh0aGlzLEkpLCExLDFdO2godGhpcyxRLHN0KS5jYWxsKHRoaXMsdFsxXS5kYXRhLGksYSh0aGlzLFYpKSxzKHRoaXMsSCxhKHRoaXMsSSkpLHIuZGVidWcoYEJhc2UgTWVkaWEgRGVjb2RlIFRpbWU6ICR7YSh0aGlzLEkpfWApfSkoKTticmVhaztkZWZhdWx0OnIuZGVidWcoIlNraXBwaW5nIFNhbXBsZSIpfX19ZnVuY3Rpb24gaXQodCxlLHIsbil7cmV0dXJuIGkoKS5hc3luYygoZnVuY3Rpb24oaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6ZXQuTVA0RGVtdXhlci5pc1dhaXRpbmcoKSYmKGV0Lk1QNERlbXV4ZXIubG9hZCgpLHRoaXMuX2RlbXV4SW5pdCgpKSwodC5sZW5ndGg+MHx8dC5ieXRlTGVuZ3RoPjApJiYocyh0aGlzLE4saCh0aGlzLHR0LG90KS5jYWxsKHRoaXMsdCkpLHQuZmlsZVN0YXJ0PWEodGhpcyxXKSxzKHRoaXMsRixlKSxzKHRoaXMsRyxyKSxzKHRoaXMsVixuKSxzKHRoaXMsVyxhKHRoaXMsQSkuYXBwZW5kQnVmZmVyKHQsITEsbixlLHIpKSk7Y2FzZSAyOmNhc2UiZW5kIjpyZXR1cm4gaS5zdG9wKCl9fSksbnVsbCx0aGlzLG51bGwsUHJvbWlzZSl9ZnVuY3Rpb24gbnQodCxlLHIsbil7cmV0dXJuIGkoKS5hc3luYygoZnVuY3Rpb24oaSl7Zm9yKDs7KXN3aXRjaChpLnByZXY9aS5uZXh0KXtjYXNlIDA6aWYoIWV0LldlYk1EZW11eGVyLmlzV2FpdGluZygpKXtpLm5leHQ9NDticmVha31yZXR1cm4gZXQuV2ViTURlbXV4ZXIucHJvbWlzZT1ldC5XZWJNRGVtdXhlci5sb2FkKCkudGhlbigoKCk9PnRoaXMuX2RlbXV4SW5pdCgpKSksZXQuV2ViTURlbXV4ZXIucHJvbWlzZS50aGVuKCgoKT0+aCh0aGlzLEosbnQpLmNhbGwodGhpcyx0LGUscixuKSkpLGkuYWJydXB0KCJyZXR1cm4iKTtjYXNlIDQ6aWYoIWV0LldlYk1EZW11eGVyLmlzTG9hZGluZygpKXtpLm5leHQ9NzticmVha31yZXR1cm4gZXQuV2ViTURlbXV4ZXIucHJvbWlzZS50aGVuKCgoKT0+aCh0aGlzLEosbnQpLmNhbGwodGhpcyx0LGUscixuKSkpLGkuYWJydXB0KCJyZXR1cm4iKTtjYXNlIDc6KHQubGVuZ3RoPjB8fHQuYnl0ZUxlbmd0aD4wKSYmKHModGhpcyxGLGUpLHModGhpcyxHLHIpLHModGhpcyxWLG4pLGEodGhpcyxQKS53cml0ZShCdWZmZXIuZnJvbSh0KSkscyh0aGlzLE4saCh0aGlzLHR0LG90KS5jYWxsKHRoaXMsdCkpKTtjYXNlIDg6Y2FzZSJlbmQiOnJldHVybiBpLnN0b3AoKX19KSxudWxsLHRoaXMsbnVsbCxQcm9taXNlKX1mdW5jdGlvbiBhdCh0LGUscixpKXtmb3IodmFyIG49dC5sZW5ndGgscz0wO3M8bjtzKz0xKXt2YXIgbz0wO2lmKGV0LmlzTmFsVW5pdEhlYWRlcih0LHMpKXt2YXIgaD1ldC5pc05hbFVuaXRTZWlTZWdtZW50KHQscyk7aWYoaC5pc1NlaVNlZ21lbnQpe3MrPWguaGVhZGVyTGVuZ3RoO2Rve28rPXRbc119d2hpbGUoMjU1PT09dFtzKytdKTtpZighaC5yZWdpc3RlcmVkJiZvPkQubGVuZ3RofHxoLnJlZ2lzdGVyZWQmJm8+RS5sZW5ndGgpe3ZhciBsPXZvaWQgMDtpZihoLnJlZ2lzdGVyZWQpe2lmKGgucmVnaXN0ZXJlZCl7dmFyIGM9dC5zdWJhcnJheShzLHMrRS5sZW5ndGgpO2lmKCFldC5jb21wYXJlQXJyYXlzKGMsRSkpe3MrPW87Y29udGludWV9cys9RS5sZW5ndGgsbD1uZXcgVWludDhBcnJheShvLUUubGVuZ3RoKX19ZWxzZXt2YXIgdT10LnN1YmFycmF5KHMscytELmxlbmd0aCk7aWYoIWV0LmNvbXBhcmVBcnJheXModSxEKSl7cys9bztjb250aW51ZX1zKz1ELmxlbmd0aCxsPW5ldyBVaW50OEFycmF5KG8tRC5sZW5ndGgpfWZvcih2YXIgZj1zLGQ9MDtkPGwubGVuZ3RoO2QrPTEpMD09PXRbZi0yXSYmMD09PXRbZi0xXSYmMz09PXRbZl0mJihmKz0xKSxsW2RdPXRbZl0sZis9MTtyZXR1cm4gYSh0aGlzLFgpLnBvc3RNZXNzYWdlKHtpZDoibGNldmNEYXRhIixlbmQ6ITEsbGV2ZWw6aSxmcmFtZVNhbXBsZTpyLHBzc0RhdGE6bH0pLCEwfXMrPW99fX1yZXR1cm4hMX1mdW5jdGlvbiBzdCh0LGUscil7dmFyIGk9MCxuPWUscz10Lmxlbmd0aDtpZig1PT09YSh0aGlzLEIpKXtmb3IodmFyIG89MDtvPHM7bys9MSlpZigwPT09dFtvXSYmMD09PXRbbysxXSYmMT09PXRbbysyXSYmKDEyMT09PXRbbyszXXx8MTIzPT09dFtvKzNdKSl7bls0XT0xMjM9PT10W28rM10saT0yO2JyZWFrfWlmKDI9PT1pKXt2YXIgaD10O2EodGhpcyxYKS5wb3N0TWVzc2FnZSh7aWQ6ImxjZXZjRGF0YSIsZW5kOiExLGxldmVsOnIsZnJhbWVTYW1wbGU6bixwc3NEYXRhOmh9KX1yZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBvdCh0KXtzKHRoaXMsJCxuZXcgdyh0LCExKSk7dmFyIGU9YSh0aGlzLCQpLmdldExlbmd0aCgpLHI9ITEsaT0hMSxuPW5ldyB5LG89dD0+e24uc3RhcnRQb3NpdGlvbj10LmdldFBvc2l0aW9uKCksbi5zaXplPXQucmVhZFVpbnQzMigpLG4udHlwZT10LnJlYWRVaW50MzIoKX0saD10PT57dC5nZXRQb3NpdGlvbigpIT09bi5zdGFydFBvc2l0aW9uJiZ0LnNldFBvc2l0aW9uKG4uc3RhcnRQb3NpdGlvbiksdC5za2lwKG4uc2l6ZSl9O2Rve2lmKG8oYSh0aGlzLCQpKSxuLnR5cGU9PT1rLkZUWVAmJihoKGEodGhpcywkKSksbyhhKHRoaXMsJCkpKSxuLnR5cGU9PT1rLk1PT1YmJih0aGlzLl9kZW11eEluaXQoKSxoKGEodGhpcywkKSksYSh0aGlzLCQpLmhhc01vcmVEYXRhKCkmJm8oYSh0aGlzLCQpKSksbi50eXBlPT09ay5NT09GJiYobyhhKHRoaXMsJCkpLG4udHlwZT09PWsuTUZIRCYmKGgoYSh0aGlzLCQpKSxvKGEodGhpcywkKSkpLG4udHlwZT09PWsuVFJBRikpZm9yKDthKHRoaXMsJCkuaGFzTW9yZURhdGEoKTspaWYobyhhKHRoaXMsJCkpLG4udHlwZT09PWsuVFJVTil7YSh0aGlzLCQpLnJld2luZCgxKTt2YXIgbD1hKHRoaXMsJCkucmVhZFVpbnQzMigpO3ModGhpcyxqLGwpLGgoYSh0aGlzLCQpKX1lbHNlIGlmKG4udHlwZT09PWsuVEZEVClyPSEwLDE9PT1hKHRoaXMsJCkucmVhZFVpbnQ4KCk/KGEodGhpcywkKS5za2lwKDMpLHModGhpcyxJLGEodGhpcywkKS5yZWFkSW50NjQoKSkpOihhKHRoaXMsJCkuc2tpcCgzKSxzKHRoaXMsSSxhKHRoaXMsJCkucmVhZEludDMyKCkpKTtlbHNlIGlmKG4udHlwZT09PWsuVEZIRCloKGEodGhpcywkKSk7ZWxzZSBpZihuLnR5cGU9PT1rLlNCR1ApaChhKHRoaXMsJCkpO2Vsc2UgaWYobi50eXBlPT09ay5TVUJTKWgoYSh0aGlzLCQpKTtlbHNlIGlmKG4udHlwZT09PWsuU0FJTyloKGEodGhpcywkKSk7ZWxzZSBpZihuLnR5cGU9PT1rLlNHUEQpaChhKHRoaXMsJCkpO2Vsc2V7aWYobi50eXBlIT09ay5TQUlaKWJyZWFrO2goYSh0aGlzLCQpKX1pZihuLnR5cGU9PT1rLk1EQVQmJihpPSEwLHModGhpcyxZLG4uc2l6ZSkscikpYnJlYWs7aWYobi5zdGFydFBvc2l0aW9uK24uc2l6ZT49ZSlicmVhaztoKGEodGhpcywkKSl9d2hpbGUoYSh0aGlzLCQpLmhhc01vcmVEYXRhKCkpO3JldHVybiBpJiYhcj9hKHRoaXMsTik6cn1uKGV0LCJNUDREZW11eGVyIixuZXcgUygodD0+YGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbXA0Ym94QCR7dH0vZGlzdC9tcDRib3guYWxsLm1pbi5qc2ApLCgodCxlKT0+e2ltcG9ydFNjcmlwdHModCksZSgpfSkpKSxuKGV0LCJXZWJNRGVtdXhlciIsbmV3IFMoKHQ9PmBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2VibWxAJHt0fS9saWIvZWJtbC5lc20ubWluLmpzYCksKCh0LGUpPT5mZXRjaCh0KS50aGVuKCh0PT50LmJsb2IoKSkpLnRoZW4oKHQ9PnQudGV4dCgpKSkudGhlbigodD0+e3ZhciBlPXQucmVwbGFjZSgvcmVxdWlyZVwoImRlYnVnIlwpLio/XCkvZywiZnVuY3Rpb24oYXJnKSB7IGNvbnNvbGUubG9nKGFyZyk7IH0iKS5yZXBsYWNlKC9leHBvcnRcey4qRGVjb2Rlci4qOy9nLCIiKS5yZXBsYWNlKC9zb3VyY2VNYXBwaW5nVVJMLiptYXAvZywiIikscj1uZXcgQmxvYihbZV0se3R5cGU6InRleHQvamF2YXNjcmlwdCJ9KTtyZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChyKX0pKS50aGVuKCh0PT57aW1wb3J0U2NyaXB0cyh0KSxlKCl9KSkpKSk7dmFyIGh0PWV0LGx0PW51bGw7c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwodD0+e3ZhciByPXQuZGF0YS5pZDtpZigiY29uZmlnIiE9PXIpe2lmKCJ1c2VyQ29uZmlnIj09PXIpe3ZhciBpPXQuZGF0YS5jb25maWc7cmV0dXJuIGh0Lk1QNERlbXV4ZXIudmVyc2lvbj1pLm1wNGJveFZlcnNpb24saHQuV2ViTURlbXV4ZXIudmVyc2lvbj1pLmVibWxWZXJzaW9uLGh0Lk1QNERlbXV4ZXIubG9hZE9uU3RhcnR1cD1pLm1wNGJveExvYWRPblN0YXJ0dXAsdm9pZChodC5XZWJNRGVtdXhlci5sb2FkT25TdGFydHVwPWkuZWJtbExvYWRPblN0YXJ0dXApfWlmKGx0JiYicmVzZXQiIT09cnx8KGx0PW5ldyBodChzZWxmKSkuX2RlbXV4SW5pdCgpLCJkZW11eCI9PT1yKXt2YXIgbj10LmRhdGEudmlkZW9EYXRhLmJ1ZmZlcixhPXQuZGF0YS5wdHNTdGFydCxzPXQuZGF0YS5wdHNFbmQsbz10LmRhdGEubGV2ZWwsaD10LmRhdGEuY29udGFpbmVyRm9ybWF0O2x0Ll9yZXNldExjZXZjTWFwKCksbHQuX3NlbGVjdERlbXV4ZXIobixhLHMsbyxoKX1pZigicmF3TENFVkMiPT09cil7dmFyIGw9dC5kYXRhLGM9bC5sY2V2Y0RhdGEsdT1sLnRpbWVzdGFtcCxmPWwudGltZXNjYWxlLGQ9bC5kdXJhdGlvbixwPWwuYmFzZURlY29kZVRpbWU7bHQuX3Jhd0xjZXZjRGF0YShjLHUsZixkLHApfWlmKCJyYXdOYWxMQ0VWQyI9PT1yKXt2YXIgdj10LmRhdGEsZz12LmxjZXZjRGF0YSxtPXYudGltZXN0YW1wLHc9di5uYWx1Rm9ybWF0O2x0Ll9yYXdOYWxMY2V2Y0RhdGEoZyxtLHcpfX1lbHNlIWZ1bmN0aW9uKHQpe2U9dH0odC5kYXRhLmxvZ0xldmVsKX0pKX0oKTsKCg==",b=null,x=!1,function(e){return g=g||v(m,b,x),new Worker(g,e)}),T={PERFORMANCE_DROPPED:"performance-dropped",PERFORMANCE_RESTORED:"performance-restored"},R=0,y=1,w={OK:0,ERROR:1},_={APPLIED:0,NOT_APPLIED:1,ERROR:2},S=0,W=1,G=2,E="Mac OS",k="iOS",X="Windows",F="Android",L="Linux",I="shaka",M="hls.js",V="dash.js",Z="theo",K={EDGE:"Edge",IE11:"IE11",CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari",OPERA:"Opera"},Y=0,C=2,U=0,B=1,H={OFF:0,ACTIVE:1,BASE_ONLY:2};let P=null;const O=new Promise(((e,t)=>{libDPIModule().then((t=>{P=t,e(!0)})).catch((()=>{t(new Error("Failed to load LCEVC."))}))}));var z;e.LogLevel=void 0,(z=e.LogLevel||(e.LogLevel={}))[z.NONE=0]="NONE",z[z.ERROR=1]="ERROR",z[z.WARNING=2]="WARNING",z[z.INFO=3]="INFO",z[z.DEBUG=4]="DEBUG",z[z.VERBOSE=5]="VERBOSE";let D=e.LogLevel.NONE;function N(e){D=e}var J;!function(t){t.info=function(...t){D>=e.LogLevel.INFO&&console.info(`[LCEVC INFO] ${t}`)},t.debug=function(...t){D>=e.LogLevel.DEBUG&&console.debug(`[LCEVC DEBUG] ${t}`)},t.error=function(...t){D>=e.LogLevel.ERROR&&console.error(`[LCEVC ERROR] ${t}`)},t.assert=function(...t){D>=e.LogLevel.VERBOSE&&console.assert(`[LCEVC ASSERT] ${t}`)},t.msg=function(...t){D>=e.LogLevel.VERBOSE&&console.log(`[LCEVC LOG] ${t}`)},t.warn=function(...t){D>=e.LogLevel.WARNING&&(navigator.userAgent.search("Trident/7.0")>-1?console.log(`[LCEVC WARN] ${t}`):console.warn(`[LCEVC WARN] ${t}`))},t.always=function(...e){console.info(`[LCEVC] ${e}`)}}(J||(J={}));class j{constructor(e,t){this.offset=e,this.matrix=t,this.matrixInverse=u(j,j,Q).call(j,t),this.glMatrix=new Float32Array(16),this.glMatrixInverse=new Float32Array(16),this.glMatrix[0]=t[0],this.glMatrix[4]=t[1],this.glMatrix[8]=t[2],this.glMatrix[1]=t[3],this.glMatrix[5]=t[4],this.glMatrix[9]=t[5],this.glMatrix[2]=t[6],this.glMatrix[6]=t[7],this.glMatrix[10]=t[8],this.glMatrix[12]=e[0],this.glMatrix[13]=e[1],this.glMatrix[14]=e[2],this.glMatrixInverse[0]=this.matrixInverse[0],this.glMatrixInverse[4]=this.matrixInverse[1],this.glMatrixInverse[8]=this.matrixInverse[2],this.glMatrixInverse[1]=this.matrixInverse[3],this.glMatrixInverse[5]=this.matrixInverse[4],this.glMatrixInverse[9]=this.matrixInverse[5],this.glMatrixInverse[2]=this.matrixInverse[6],this.glMatrixInverse[6]=this.matrixInverse[7],this.glMatrixInverse[10]=this.matrixInverse[8],this.glMatrixInverse[12]=e[0],this.glMatrixInverse[13]=e[1],this.glMatrixInverse[14]=e[2]}}function Q(e){var t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],n=e[5],l=e[6],o=e[7],h=e[8],u=h*a-n*o,c=-h*r+n*l,d=o*r-a*l,p=t*u+i*c+s*d;if(!p)return null;p=1/p;var f=[];return f[0]=u*p,f[1]=(-h*i+s*o)*p,f[2]=(n*i-s*a)*p,f[3]=c*p,f[4]=(h*t-s*l)*p,f[5]=(-n*t+s*r)*p,f[6]=d*p,f[7]=(-o*t+i*l)*p,f[8]=(a*t-i*r)*p,f}var $=j,q=new WeakMap,ee=new WeakMap,te=new WeakMap,ie=new WeakMap,se=new WeakMap,re=new WeakMap,ae=new WeakMap,ne=new WeakSet,le=new WeakSet,oe=new WeakSet,he=new WeakSet,ue=new WeakSet,ce=new WeakSet,de=new WeakSet,pe=new WeakSet;class fe{constructor(){return f(this,pe),f(this,de),f(this,ce),f(this,ue),f(this,he),f(this,oe),f(this,le),f(this,ne),p(this,q,{writable:!0,value:"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACGttZGF0AAACsQYF//+t3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE1OSByMjk5OSAyOTY0OTRhIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAyMCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTE2IGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMzMgbWU9dW1oIHN1Ym1lPTEwIHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MjQgY2hyb21hX21lPTEgdHJlbGxpcz0yIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MiBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz04IGJfcHlyYW1pZD0yIGJfYWRhcHQ9MiBiX2JpYXM9MCBkaXJlY3Q9MyB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NjAgcmM9Y3JmIG1idHJlZT0xIGNyZj0xNy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAE1mWIgQAP/9I7guh7ZEkN+Oq1zcJC1SdC2Ipehtbf8l+xfp7oxi7/tDIY1OMS216O9ur88Kgx0+P3pPoHNo7PvwETZNEl8XNngNXfJ8zbnZwoZODKt32qOLF/fHjOu5Aakr+0r/dp1ZkKXiDOwosZ9B527r38U9J2f0RZl2wWdcQzxUmHJM6LOG2THod9omqyJpWAABA5OAAAI9lgDK+ADteAISOAcbACFtAHkP87roe+HJR6rg4NAPhtvxnhlqAd+tJrea3g7IMeXpDoMevlrumG0cik8zVwylLgoTi4mY67R6eFkzTZeLBpj1aLfgYMx6IB/wVxvM4AG3sF3l2iKV7KUZCyiXfG7nHmdB1cf3bJEqe4iFCECfr8z9bB/9+zylf4PDiYgIOh5AjsKu+7Glyhi1VH6YSOmwDQtKRdoPzHu80phd7NxavQyGdAHS5xGawt8XRdqeyQ0oWKCr1di8wCTjcJiKdYthzX785yErgyOGDIGVcr6MajNvzlhhnoDVo3Smq8/hA97ZOzLXYRY4pyVbTbNIr3GB+BRhYc24KaXJyd4irZXMR6RaDuaPuqcXNYx9FNhTixkScpSf+kCc1+/A8mg4mO0OvNbSxZtIQ0ECHKC/fihT+ZBrSo9jj52t2B6lOqNY/6Ivo43IqoyRjgEYMbOXK29C99tmO9LIOP9Jhkr+YyWXXYRT/iNRDSEQ7pfhJe0hSByHcE9UNa7zI+c8LQMAtB05jJb1LksEav0dIxC0iiaaXuEmH6d4qrwGbsg1IeepON7PdjqS/QYuYDCj5z5cbV4d+5a4vSGvjlJ3//1m2lbpxro32Fld8ynH3V3NixFPRA00oD1P/ZrQt7N+JJvymk2qPRFshM2nf8lnyb6Eh1FO3F68RngAnhxY5/90YE5YlJW4toRpV1fAFsAP/0qfYtBSwRam2U/yZcMOuNGeI+Q1DjExbelyqhPSayagoaGNGeAaOWS/LfjJyenfedY2WELXTrtUJRF0gi4shEZju/jul8H3WA5kN9UMHJ2eylF/zSDmcqpjBBvpViiY2uA1QO0DN9UApwOatO5yu7yd4WG1rfszWGmo+g/iejoyXi1O0X1JEz9mwkWX+dwgPWNAFE/azOmsK50ax4oD1pIrKMpVTlMuDbGfcnKUpSlKUpSlKUtUwOznOc5znOc5znOc8KZVznOc5znOc5znOc8KC6c5znOc5znOc5znRuNk5znOc5znOc5znOjZLOc5znOc5znOc5zngz8UpSlKUpSlKUpSlK6KLZx4j6Z3rAb9uVXyaZlzMcCeuj9soG9XWFkI9N5ODiNFxPTDenIRBNx2jzH2mx6umYODb0PE5rPkfB9tSF0HgwXVCFVXocb/xeDgaJRoZ9QXc/lqQ1UrekDTy+yADaI3mnjNllpnSfuRiVE29q2SKOiGXrMFWQpslYoWVeoqN+mBEaDvPsYM0paQVQ4Vd2VG730w1zQd79jF08hqmZOTdr1ZowWFa4mEdC4Gt1gz27/oigb3ve973ve973ve98V1r3ve973ve973ve977fjGMYxjGMYxjGMYxriHe973ve973ve973vkw73ve973ve973ve99K3e973ve973ve973v1UYxjGMYxjGMYxjGMhJu973ve973ve973vrJAAAAFkGaCS2J//3xAAAEGFVB0ho3XQAAB8wAAAAbQZ4QhxG/AAAMj8YcA1q2ctaFQp3luFIAAARNAAAAGgGeGCaJ/wAAHa2YaI9RieiTyA3wYAAAAwMqAAAAEgGeGEaJ/wAAHa2XzgjRAAAKSQAAABMBnhhmif8AAB2ok8px1AIAAC7hAAAAEAGeGK1J/wAAAwAAAwAAXcEAAAAQAZ4YzUn/AAADAAADAABdwQAAABABnhjtSf8AAAo9v3UAAA3oAAAAEAGeGQ1J/wAACj2/dQAADegAAAN6bW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAA+gAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAqR0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+gAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAoAAAAHgAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPoAAAIAAABAAAAAAIcbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAoAAAAKABVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAABx21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAYdzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAoAB4ABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAOWF2Y0MBZAAg/+EAG2dkACCscgRAoD2wEQAAAwABAAADABQPGDGEYAEAB2joQ4JyyLD9+PgAAAAAEHBhc3AAAAABAAAAAQAAABhzdHRzAAAAAAAAAAEAAAAKAAAEAAAAABRzdHNzAAAAAAAAAAEAAAABAAAAOGN0dHMAAAAAAAAABQAAAAEAAAgAAAAAAQAAKAAAAAABAAAQAAAAAAMAAAAAAAAABAAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAoAAAABAAAAPHN0c3oAAAAAAAAAAAAAAAoAAAePAAAAGgAAAB8AAAAeAAAAFgAAABcAAAAUAAAAFAAAABQAAAAUAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU4LjQ1LjEwMA=="}),p(this,ee,{writable:!0,value:null}),p(this,te,{writable:!0,value:null}),p(this,ie,{writable:!0,value:null}),p(this,se,{writable:!0,value:null}),p(this,re,{writable:!0,value:null}),p(this,ae,{writable:!0,value:null}),c(this,ne,ve).call(this),this._setProfileIn(null),this._setProfileOut(),c(this,le,me).call(this),w.OK}get _profileIn(){return l(this,se)}get _profileOut(){return l(this,re)}_getProfile(e){return l(this,te)[e]}_close(){return c(this,oe,be).call(this),J.msg("ColorSpace.closed"),w.OK}_setProfileIn(e){return o(this,se,e||l(this,ie)),l(this,te)[l(this,se)]||o(this,se,Object.keys(l(this,te))[0]),w.OK}_setProfileOut(e){return o(this,re,e||l(this,ie)),l(this,te)[l(this,re)]||o(this,re,Object.keys(l(this,te))[0]),w.OK}}function ve(){o(this,te,[]),l(this,te)["BT601.v1"]=new $([16,128,128],[.257,.504,.098,-.148,-.291,.439,.439,-.368,-.071]),l(this,te)["BT601.v2"]=new $([16,128,128],[.299,.587,.114,-.173,-.339,.511,.511,-.428,-.083]),l(this,te)["BT601.v3"]=new $([0,128,128],[.299,.587,.114,-.168736,-.331264,.5,.5,-.418688,-.081312]),l(this,te)["BT601.spec"]=new $([16,128,128],[.299,.587,.114,-.14713,-.28886,.436,.615,-.51499,-.10001]),l(this,te)["BT709.v1"]=new $([16,128,128],[.1826,.6142,.062,-.1006,-.3386,.4392,.4392,-.3989,-.0403]),l(this,te)["BT709.v2"]=new $([0,128,128],[.2126,.7152,.0722,-.1146,-.3854,.5,.5,-.4542,-.0468]),l(this,te)["BT709.spec"]=new $([16,128,128],[.2126,.7152,.0722,-.09991,-.33609,.436,.615,-.55861,-.05639]);var e=219/255,t=224/255;return l(this,te)["BT709.TV"]=new $([16,128,128],[.2126*e,.7152*e,.0722*e,-.2126/1.8556*t,-.3385719538947288,.5*t,.5*t,-.3989421625902075,-.0722/1.5748*t]),l(this,te)["BT709.PC"]=new $([0,128,128],[.2126,.7152,.0722,-.2126/1.8556,-.7152/1.8556,.5,.5,-.7152/1.5748,-.0722/1.5748]),w.OK}function me(){o(this,ae,c(this,ue,ge).bind(this));var e=document.createElement("video");return e.id="video",e.addEventListener("seeked",l(this,ae)),e.addEventListener("canplaythrough",c(this,he,xe)),e.src=l(this,q),o(this,ee,e),w.OK}function be(){return l(this,ee).removeEventListener("seeked",l(this,ae)),l(this,ee).removeEventListener("canplaythrough",c(this,he,xe)),l(this,ee).pause(),l(this,ee).removeAttribute("src"),l(this,ee).load(),o(this,ee,null),w.OK}function xe(){return this?(this.currentTime=.5,w.OK):w.FAIL}function ge(){var e=document.createElement("canvas"),t={alpha:!1,antialias:!1,depth:!1,desynchronized:!0,failIfMajorPerformanceCaveat:!1,lowLatency:!0,powerPreference:"default",premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1},i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),s=l(this,ee).videoWidth,r=l(this,ee).videoHeight,a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,l(this,ee));var n=i.createFramebuffer(),o=new Uint8Array(s*r*4);return i.bindFramebuffer(i.FRAMEBUFFER,n),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),i.finish(),i.readPixels(0,0,s,r,i.RGBA,i.UNSIGNED_BYTE,o),i.deleteTexture(a),i.deleteFramebuffer(n),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null),c(this,ce,Ae).call(this,o,s,r),this._close(),w.OK}function Ae(e,t,i){var s=fe.YUVPoint,r=[new s(e,t,i,0*t+1,(0+1/6)*i,0,128,128),new s(e,t,i,.5*t,(0+1/6)*i,128,128,128),new s(e,t,i,1*t-2,(0+1/6)*i,255,128,128),new s(e,t,i,0*t+1,.5*i,128,0,128),new s(e,t,i,.25*t,.5*i,128,64,128),new s(e,t,i,.75*t,.5*i,128,192,128),new s(e,t,i,1*t-2,.5*i,128,255,128),new s(e,t,i,0*t+1,(2/3+1/6)*i,128,128,0),new s(e,t,i,.25*t,(2/3+1/6)*i,128,128,64),new s(e,t,i,.75*t,(2/3+1/6)*i,128,128,192),new s(e,t,i,1*t-2,(2/3+1/6)*i,128,128,255)],a=Number.MAX_VALUE,n=null;if(l(this,te).forEach((e=>{for(var t=0,i=0;i<r.length;i+=1){var s=r[i],l=[s.y,s.u,s.v],o=c(this,pe,Te).call(this,l,e);t+=Math.abs(o[0]-s.r)+Math.abs(o[1]-s.g)+Math.abs(o[2]-s.b)}t<a&&(a=t,n=e)})),null===n)return J.warn("Unable to detect your browser's colorspace."),o(this,ie,-1),w.FAIL;var h=a/(3*r.length);return h>2?(J.warn("Unknown colorspace is being used."),o(this,ie,-1),w.FAIL):(o(this,ie,n),this._setProfileIn(l(this,ie)),J.info(`Your browser is using colorspace "${l(this,ie)}" with an error of ${(h/255*100).toFixed(2)}%.`),w.OK)}function Te(e,t){var i=Math.round,s=l(this,te)[t],r=s.offset,a=s.matrixInverse,n=e[0],o=e[1],h=e[2];n-=r[0],o-=r[1],h-=r[2];var u=i(a[0]*n)+i(a[1]*o)+i(a[2]*h),c=i(a[3]*n)+i(a[4]*o)+i(a[5]*h),d=i(a[6]*n)+i(a[7]*o)+i(a[8]*h);return u<0&&(u=0),c<0&&(c=0),d<0&&(d=0),u>255&&(u=255),c>255&&(c=255),d>255&&(d=255),[u,c,d]}fe.YUVPoint=function(e,t,i,s,r,a,n){var l=4*((s>>0)*t+(i>>0));return this.r=e[l+0],this.g=e[l+1],this.b=e[l+2],this.y=r,this.u=a,this.v=n,w.OK};var Re=fe,ye={},we={controls_frag:"controls_frag.glsl",controls_vert:"controls_vert.glsl",scrub_frag:"scrub_frag.glsl",scrub_vert:"scrub_vert.glsl",stats_bar_data_frag:"stats_bar_data_frag.glsl",stats_bar_data_vert:"stats_bar_data_vert.glsl",stats_bar_frag:"stats_bar_frag.glsl",stats_bar_vert:"stats_bar_vert.glsl",stats_data_frag:"stats_data_frag.glsl",stats_data_vert:"stats_data_vert.glsl",stats_radial_data_frag:"stats_radial_data_frag.glsl",stats_radial_data_vert:"stats_radial_data_vert.glsl",stats_radial_frag:"stats_radial_frag.glsl",stats_radial_vert:"stats_radial_vert.glsl",vert:"vert.glsl",blit:"blit.glsl",debug_residuals:"debug_residuals.glsl",video_1d_4kernel_upscale_x:"video_1d_4kernel_upscale_x.glsl",video_1d_rgb_to_yuv:"video_1d_rgb_to_yuv.glsl",video_1d_rgb_to_yuv_perseus:"video_1d_rgb_to_yuv_perseus.glsl",video_1d_yuv_to_rgb:"video_1d_yuv_to_rgb.glsl",video_1d_yuv_to_rgb_perseus:"video_1d_yuv_to_rgb_perseus.glsl",video_display:"video_display.glsl",video_functions:"video_functions.glsl",video_packed_4kernel_rgb_to_u:"video_packed_4kernel_rgb_to_u.glsl",video_packed_4kernel_rgb_to_v:"video_packed_4kernel_rgb_to_v.glsl",video_packed_4kernel_rgb_to_y:"video_packed_4kernel_rgb_to_y.glsl",video_packed_4kernel_rgb_to_y_perseus:"video_packed_4kernel_rgb_to_y_perseus.glsl",video_packed_4kernel_upscale_x:"video_packed_4kernel_upscale_x.glsl",video_packed_4kernel_upscale_y:"video_packed_4kernel_upscale_y.glsl",video_packed_4kernel_upscale_y_perseus:"video_packed_4kernel_upscale_y_perseus.glsl",video_packed_4kernel_yuv_merge:"video_packed_4kernel_yuv_merge.glsl",video_simple:"video_simple.glsl"};ye[we.controls_frag]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIcons;\nvarying vec4 uv;\nvarying float state;\nvec2 halfPixel = vec2( 0.499999 );\nvoid main(){\nvec4 colPix = texture2D( textureIcons, uv.xy );\nfloat isPixel = colPix.a;\nvec4 colEmptyOff = vec4(0.0, 0.0, 0.0, 0.0);\nvec4 colEmptyOn = vec4(1.0, 1.0, 1.0, 0.2);\nvec4 colPixel = vec4(colPix.rgb, 1.0);\nvec4 colEmpty = mix( colEmptyOff, colEmptyOn, state );\nvec4 colMix = mix( colEmpty, colPixel, isPixel );\ngl_FragColor = colMix;\n}",ye[we.controls_vert]="\nprecision ##float_precision## float;\nattribute vec2 aPos;\nattribute vec2 aUV;\nattribute vec2 aState;\nuniform vec2 canvasSize;\nvarying vec4 uv;\nvarying float state;\nvoid main (){\nfloat x = aPos.x / canvasSize.x * 2.0 - 1.0;\nfloat y = aPos.y / canvasSize.y *-2.0 + 1.0;\ngl_Position = vec4(x, y, 0.0, 1.0);\nuv.xy = aUV;\nfloat index = aState.x;\nuv.z = floor(mod(index, 2.0));\nuv.w = floor(index / 2.0);\nstate = aState.y;\n}",ye[we.scrub_frag]="\n#version 100\nprecision ##float_precision## float;\nuniform float currentTime;\nuniform float color;\nvarying vec2 uv;\nvec3 _colHexToRGB( float hex ){\nreturn vec3(\nfloor( hex / 65536.0 ) / 255.0,\nfloor( mod( hex / 256.0, 256.0)) / 255.0,\nmod( hex, 256.0 ) / 255.0\n);\n}\nvoid main(){\nvec3 colBar = _colHexToRGB(color);\nvec3 colEdge = vec3(1.0);\nfloat edge = abs(0.5 - uv.x) * 2.0;\nvec3 colFinal = colBar;\ngl_FragColor = vec4( colFinal, 1.0 );\n}",ye[we.scrub_vert]="\nprecision ##float_precision## float;\nattribute vec2 aChunks;\nuniform vec2 canvasSize;\nuniform vec4 scrubArea;\nuniform vec2 timeRange;\nvarying vec2 uv;\nvoid main (){\nfloat index = aChunks.x;\nuv.x = floor(mod(index, 2.0));\nuv.y = floor(index / 2.0);\nfloat t = aChunks.y;\nfloat tx = max(t - timeRange[0], 0.0) / (timeRange[1] - timeRange[0]);\nfloat px = tx * (scrubArea.z - scrubArea.x) + scrubArea.x;\nfloat py = uv.y * (scrubArea.w - scrubArea.y) + scrubArea.y;\nfloat x = px / canvasSize.x * 2.0 - 1.0;\nfloat y = py / canvasSize.y *-2.0 + 1.0;\ngl_Position = vec4(x, y, 0.0, 1.0);\n}",ye[we.stats_bar_data_frag]="\n#version 100\nprecision ##float_precision## float;\nvarying vec3 col;\nvoid main(){\ngl_FragColor = vec4( col, 1.0 );\n}",ye[we.stats_bar_data_vert]="\nprecision ##float_precision## float;\nattribute vec3 aBars;\nuniform vec2 dataTextureSize;\nuniform float offset;\nvarying vec3 col;\nvec3 _colHexToRGB( float hex ){\nreturn vec3(\nfloor( hex / 65536.0 ) / 255.0,\nfloor( mod( hex / 256.0, 256.0)) / 255.0,\nmod( hex, 256.0 ) / 255.0\n);\n}\nvoid main (){\nfloat px = aBars.x / dataTextureSize.x;\nfloat py = (aBars.y + offset) / dataTextureSize.y;\nfloat x = px * 2.0 - 1.0;\nfloat y = py *-2.0 + 1.0;\ngl_Position = vec4( x, y, 0.0, 1.0 );\ncol = _colHexToRGB(aBars.z);\n}",ye[we.stats_bar_frag]="\nprecision highp float;\nuniform sampler2D dataTexture;\nvarying vec2 uv;\nvarying vec2 tuv;\nvarying vec2 spacing_;\nvoid main(){\nif(mod(gl_FragCoord.x, spacing_.x + spacing_.y) < spacing_.y) discard;\nfloat tv = 1.0 - fract(tuv.y);\nvec4 colTex = texture2D( dataTexture, vec2(tuv.x, tv ));\nfloat isNonZero = step( 0.001, colTex.r + colTex.g + colTex.b );\ncolTex.a = isNonZero;\ngl_FragColor = colTex;\n}",ye[we.stats_bar_vert]="\nprecision highp float;\nattribute vec2 aPos;\nattribute vec2 aUV;\nuniform vec2 viewportSize;\nuniform vec2 dataTextureSize;\nuniform float offset;\nuniform vec2 spacing;\nvarying vec2 uv;\nvarying vec2 tuv;\nvarying vec2 spacing_;\nvoid main (){\ngl_Position = vec4( aPos, 0.0, 1.0 );\nuv = aUV;\nfloat scale = spacing.x + spacing.y;\nspacing_ = spacing;\nfloat u = uv.y;\nfloat v = (uv.x - 1.0) / scale * viewportSize.x / dataTextureSize.y + 1.0;\nfloat tu = u;\nfloat tv0 = (offset + 1.0) / dataTextureSize.y;\nfloat tv1 = tv0 + 1.0;\nfloat tv = v * (tv1 - tv0) + tv0;\ntuv = vec2( tu, tv );\n}",ye[we.stats_data_frag]="\n#version 100\nprecision ##float_precision## float;\nvarying vec3 col;\nvoid main(){\ngl_FragColor = vec4( col, 1.0 );\n}",ye[we.stats_data_vert]="\nprecision ##float_precision## float;\nattribute vec3 aBars;\nuniform vec2 dataTextureSize;\nuniform float offset;\nvarying vec3 col;\nvec3 _colHexToRGB( float hex ){\nreturn vec3(\nfloor( hex / 65536.0 ) / 255.0,\nfloor( mod( hex / 256.0, 256.0)) / 255.0,\nmod( hex, 256.0 ) / 255.0\n);\n}\nvoid main (){\nfloat px = aBars.x / dataTextureSize.x;\nfloat py = (aBars.y + offset) / dataTextureSize.y;\nfloat x = px * 2.0 - 1.0;\nfloat y = py *-2.0 + 1.0;\ngl_Position = vec4( x, y, 0.0, 1.0 );\ncol = _colHexToRGB(aBars.z);\n}",ye[we.stats_radial_data_frag]="\n#version 100\nprecision ##float_precision## float;\nvarying vec3 col;\nvoid main(){\ngl_FragColor = vec4( col, 1.0 );\n}",ye[we.stats_radial_data_vert]="\nprecision ##float_precision## float;\nattribute vec3 aBars;\nuniform vec2 dataTextureSize;\nuniform float offset;\nvarying vec3 col;\nvec3 _colHexToRGB( float hex ){\nreturn vec3(\nfloor( hex / 65536.0 ) / 255.0,\nfloor( mod( hex / 256.0, 256.0)) / 255.0,\nmod( hex, 256.0 ) / 255.0\n);\n}\nvoid main (){\nfloat px = aBars.x / dataTextureSize.x;\nfloat py = (aBars.y + offset) / dataTextureSize.y;\nfloat x = px * 2.0 - 1.0;\nfloat y = py *-2.0 + 1.0;\ngl_Position = vec4( x, y, 0.0, 1.0 );\ncol = _colHexToRGB(aBars.z);\n}",ye[we.stats_radial_frag]="\nprecision highp float;\nuniform sampler2D dataTexture;\nuniform float viewportSize;\nvarying vec2 uv;\nvarying float time;\nvoid main(){\nfloat margin = 2.0 / viewportSize;\nfloat radMin = 0.1;\nfloat radMax = 1.0 - margin;\nfloat radLim = mix( radMin, radMax - margin, time );\nfloat dx = (uv.x - 0.5) * 2.0;\nfloat dy = (uv.y - 0.5) * 2.0;\nfloat ang = atan(-dx,-dy);\nfloat rad = sqrt(dx*dx + dy*dy);\nfloat alpha = smoothstep(radMax, radMax-margin, rad);\nif(rad > 1.0) discard;\nfloat u = ang / 6.283185307179586 + 0.5;\nfloat v = rad;\nvec3 colTex = texture2D( dataTexture, vec2(u,v)).rgb;\nvec3 colTint = vec3( 0.804, 0.243, 0.204 );\nfloat isNonZero = step( 0.001, colTex.r + colTex.g + colTex.b );\nvec3 colFinal = mix( colTex, colTint, pow(rad,8.0) * 0.5 );\nvec3 colLine = mix( vec3( 1.0 ), colTint, smoothstep(0.9, 1.0, time));\nfloat isLine = smoothstep( margin * 2.0, 0.0, abs( rad - radLim ));\ncolFinal = mix( colFinal, colLine, isLine) * isNonZero;\ngl_FragColor = vec4( colFinal, alpha );\n}",ye[we.stats_radial_vert]="\nprecision highp float;\nattribute vec2 aPos;\nattribute vec2 aUV;\nuniform float timeRatio;\nvarying vec2 uv;\nvarying float time;\nvoid main (){\ngl_Position = vec4( aPos, 0.0, 1.0 );\nuv = aUV;\ntime = min( timeRatio, 1.0 );\n}",ye[we.vert]="\nprecision ##float_precision## float;\nattribute vec2 position;\nattribute vec2 texcoord;\nvarying vec2 uv;\nvoid main (){\ngl_Position = vec4(position, 0.0, 1.0);\nuv = texcoord;\n}",ye[we.blit]="\nprecision ##float_precision## float;\nuniform sampler2D tex0;\nvarying vec2 uv;\nvoid main(){\ngl_FragColor = texture2D(tex0, uv);\n}",ye[we.debug_residuals]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform sampler2D textureResidualBase;\nuniform sampler2D textureResidualHigh;\nuniform vec2 videoSize;\nuniform float useBase;\nuniform float useHigh;\nuniform float isKeyFrame;\nvarying vec2 uv;\n##video_functions##\nvec2 inputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 outputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 halfPixel = vec2( -0.499999 );\nvoid main(){\nvec2 pixelOut = floor( uv * outputSize );\nvec2 pixelTex = floor( uv * inputSize ) - halfPixel;\nvec4 texVid = texture2D( textureVideo, uv );\nfloat resBase = texture2D( textureResidualBase, uv ).a;\nfloat resHigh = texture2D( textureResidualHigh, uv ).a;\nfloat luma = (texVid.r + texVid.g + texVid.b) / 3.0 * 0.4 + 0.6;\nfloat isbase = step( 0.01, resBase ) * useBase;\nfloat ishigh = step( 0.01, resHigh ) * useHigh;\nfloat isboth = isbase * ishigh;\nfloat iseither = step( 0.01, isbase + ishigh );\nvec3 colBase = vec3( 1.0,-0.5,-0.5 ) * pow( abs(residualFloat(resBase)) / 0.5, 0.1 );\nvec3 colHigh = vec3(-0.5,-0.5, 1.0 ) * pow( abs(residualFloat(resHigh)) / 0.5, 0.1 );\nvec3 colBoth = vec3(-1.0, 1.0,-1.0 );\nvec3 colRes = mix( colBase * isbase + colHigh * ishigh, colBoth, isboth );\nvec3 colOut = luma + colRes;\nvec3 colKeyFrame = luma * vec3( 1.0, 0.5, 0.9 ) + vec3(-1.0) * iseither;\nvec3 colFinal = mix( colOut, colKeyFrame, isKeyFrame );\ngl_FragColor = vec4( colFinal, 1.0 );\n}",ye[we.video_1d_4kernel_upscale_x]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIn;\nuniform vec2 videoSize;\nvarying vec2 uv;\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = (videoSize + halfPixel) * vec2( 0.5, 1.0 );\nvec2 outputSize = (videoSize + halfPixel) * vec2( 1.0, 1.0 );\nuniform vec4 k0;\nuniform vec4 k1;\nvoid main(){\nvec2 pixelTex = floor( uv * inputSize ) - halfPixel;\nvec3 srcTexL2 = texture2D( textureIn, (pixelTex + vec2( -2.0, 0.0 )) / inputSize ).rgb;\nvec3 srcTexL1 = texture2D( textureIn, (pixelTex + vec2( -1.0, 0.0 )) / inputSize ).rgb;\nvec3 srcTexC = texture2D( textureIn, (pixelTex + vec2( 0.0, 0.0 )) / inputSize ).rgb;\nvec3 srcTexR1 = texture2D( textureIn, (pixelTex + vec2( 1.0, 0.0 )) / inputSize ).rgb;\nvec3 srcTexR2 = texture2D( textureIn, (pixelTex + vec2( 2.0, 0.0 )) / inputSize ).rgb;\nvec3 colOut = vec3( 0.0 );\nif( mod( gl_FragCoord.x, 2.0 ) < 1.0 ){\ncolOut = vec3(\ndot( k0, vec4( srcTexL2[0], srcTexL1[0], srcTexC[0], srcTexR1[0] )),\ndot( k0, vec4( srcTexL2[1], srcTexL1[1], srcTexC[1], srcTexR1[1] )),\ndot( k0, vec4( srcTexL2[2], srcTexL1[2], srcTexC[2], srcTexR1[2] ))\n);\n}else{\ncolOut = vec3(\ndot( k1, vec4( srcTexL1[0], srcTexC[0], srcTexR1[0], srcTexR2[0] )),\ndot( k1, vec4( srcTexL1[1], srcTexC[1], srcTexR1[1], srcTexR2[1] )),\ndot( k1, vec4( srcTexL1[2], srcTexC[2], srcTexR1[2], srcTexR2[2] ))\n);\n}\ngl_FragColor = vec4( colOut, 1.0 );\n}",ye[we.video_1d_rgb_to_yuv]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nvarying vec2 uv;\n##video_functions##\nvoid main(){\nvec3 RGB = texture2D( textureVideo, uv ).rgb;\nvec3 YUV = RGBtoYUV( RGB );\ngl_FragColor = vec4( YUV, 1.0 );\n}",ye[we.video_1d_rgb_to_yuv_perseus]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform sampler2D textureResidual;\nvarying vec2 uv;\n##video_functions##\nvoid main(){\nvec3 RGB = texture2D( textureVideo, uv ).rgb;\nvec3 YUV = RGBtoYUV( RGB );\nYUV[0] = YUV[0] + residualFloat( texture2D( textureResidual, uv ).a );\ngl_FragColor = vec4( YUV, 1.0 );\n}",ye[we.video_1d_yuv_to_rgb]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIn;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvoid main(){\nvec3 YUV = texture2D( textureIn, uv ).rgb;\nvec3 RGB = YUVtoRGB( YUV );\ngl_FragColor = vec4( RGB, 1.0 );\n}",ye[we.video_1d_yuv_to_rgb_perseus]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIn;\nuniform sampler2D textureResidual;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = (videoSize + halfPixel);\nvoid main(){\nvec2 pixelTex = floor( uv * inputSize ) - halfPixel;\nvec3 YUV = texture2D( textureIn, (pixelTex + vec2( 0.0, 0.0 )) / inputSize ).rgb;\nfloat component = texture2D( textureResidual, uv ).a;\nYUV[0] = YUV[0] + residualFloat( component );\nvec3 RGB = YUVtoRGB( YUV );\ngl_FragColor = vec4( RGB, 1.0 );\n}",ye[we.video_display]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureFrame;\nuniform sampler2D textureNoise;\nuniform vec2 frameSize;\nuniform vec2 outputSize;\nuniform vec3 dithering;\nvarying vec2 uv;\n##video_functions##\nvoid main(){\nvec3 srcTex = texture2D( textureFrame, uv ).rgb;\nfloat ditherTexSize = 512.0;\nfloat noise = texture2D( textureNoise, (uv + dithering.xy / ditherTexSize) * outputSize / ditherTexSize ).a;\nfloat strength = dithering.z / 127.5;\nsrcTex = srcTex + vec3( noise - 0.5 ) * strength;\ngl_FragColor = vec4( srcTex, 1.0 );\n}",ye[we.video_functions]="\nvec4 vec44componenti( vec4 _vec, int i ){\nif( i == 0 ) return _vec.xxxx;\nif( i == 1 ) return _vec.yyyy;\nif( i == 2 ) return _vec.zzzz;\nreturn _vec.wwww;\n}\nvec4 vec44componentf( vec4 _vec, float i ){\nreturn\n_vec.xxxx * step( i, 0.5 ) +\n_vec.yyyy * step( 0.5, i ) * step( i, 1.5 ) +\n_vec.zzzz * step( 1.5, i ) * step( i, 2.5 ) +\n_vec.wwww * step( 2.5, i );\n}\nvec3 vec433componentf( vec4 _vecA, vec4 _vecB, vec4 _vecC, float i ){\nreturn\nvec3( _vecA.x, _vecB.x, _vecC.x ) * step( i, 0.5 ) +\nvec3( _vecA.y, _vecB.y, _vecC.y ) * step( 0.5, i ) * step( i, 1.5 ) +\nvec3( _vecA.z, _vecB.z, _vecC.z ) * step( 1.5, i ) * step( i, 2.5 ) +\nvec3( _vecA.w, _vecB.w, _vecC.w ) * step( 2.5, i );\n}\nvec4 vec444componentf( vec4 _vecA, vec4 _vecB, vec4 _vecC, vec4 _vecD, float i ){\nreturn\nvec4( _vecA.x, _vecB.x, _vecC.x, _vecD.x ) * step( i, 0.5 ) +\nvec4( _vecA.y, _vecB.y, _vecC.y, _vecD.y ) * step( 0.5, i ) * step( i, 1.5 ) +\nvec4( _vecA.z, _vecB.z, _vecC.z, _vecD.z ) * step( 1.5, i ) * step( i, 2.5 ) +\nvec4( _vecA.w, _vecB.w, _vecC.w, _vecD.w ) * step( 2.5, i );\n}\nuniform mat4 colorSpace_RGBYUV;\nuniform mat4 colorSpace_YUVRGB;\nvec3 RGBtoYUV(vec3 col){\nfloat Y = colorSpace_RGBYUV[0][0] * col.r + colorSpace_RGBYUV[1][0] * col.g + colorSpace_RGBYUV[2][0] * col.b + (colorSpace_RGBYUV[3][0]/255.0);\nfloat U = colorSpace_RGBYUV[0][1] * col.r + colorSpace_RGBYUV[1][1] * col.g + colorSpace_RGBYUV[2][1] * col.b + (colorSpace_RGBYUV[3][1]/255.0);\nfloat V = colorSpace_RGBYUV[0][2] * col.r + colorSpace_RGBYUV[1][2] * col.g + colorSpace_RGBYUV[2][2] * col.b + (colorSpace_RGBYUV[3][2]/255.0);\nreturn vec3(Y,U,V);\n}\nfloat RGBtoY(vec3 col){\nfloat Y = colorSpace_RGBYUV[0][0] * col.r + colorSpace_RGBYUV[1][0] * col.g + colorSpace_RGBYUV[2][0] * col.b + (colorSpace_RGBYUV[3][0]/255.0);\nreturn Y;\n}\nfloat RGBtoU(vec3 col){\nfloat U = colorSpace_RGBYUV[0][1] * col.r + colorSpace_RGBYUV[1][1] * col.g + colorSpace_RGBYUV[2][1] * col.b + (colorSpace_RGBYUV[3][1]/255.0);\nreturn U;\n}\nfloat RGBtoV(vec3 col){\nfloat V = colorSpace_RGBYUV[0][2] * col.r + colorSpace_RGBYUV[1][2] * col.g + colorSpace_RGBYUV[2][2] * col.b + (colorSpace_RGBYUV[3][2]/255.0);\nreturn V;\n}\nvec3 YUVtoRGB(vec3 col){\nfloat Y = col.x - (colorSpace_YUVRGB[3][0]/255.0);\nfloat U = col.y - (colorSpace_YUVRGB[3][1]/255.0);\nfloat V = col.z - (colorSpace_YUVRGB[3][2]/255.0);\nfloat R = colorSpace_YUVRGB[0][0] * Y + colorSpace_YUVRGB[1][0] * U + colorSpace_YUVRGB[2][0] * V;\nfloat G = colorSpace_YUVRGB[0][1] * Y + colorSpace_YUVRGB[1][1] * U + colorSpace_YUVRGB[2][1] * V;\nfloat B = colorSpace_YUVRGB[0][2] * Y + colorSpace_YUVRGB[1][2] * U + colorSpace_YUVRGB[2][2] * V;\nreturn vec3(R,G,B);\n}\nfloat generateNoise(vec2 coord, float seed){\nreturn fract(sin(dot(coord.xy , vec2(12.9898,78.233))) * seed * 8.5453);\n}\nfloat residualFloat( float component ){\nfloat k = floor(component * 255.0);\nreturn (k - step( 127.5, k ) * 256.0) * 2.0 / 255.0;\n}\nvec4 residualVec4( vec4 component ){\nvec4 k = floor(component * 255.0);\nreturn (k - step( 127.5, k ) * 256.0) * 2.0 / 255.0;\n}",ye[we.video_packed_4kernel_rgb_to_u]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 outputSize = videoSize * vec2( 0.5, 0.5 );\nvoid main(){\nvec2 pixelOut = (uv * outputSize);\nvec2 pixelTex = (uv * inputSize) + halfPixel;\nvec3 pixel0 = texture2D( textureVideo, (pixelTex + vec2( 0.0, 0.0 )) / inputSize ).rgb;\nvec3 pixel1 = texture2D( textureVideo, (pixelTex + vec2( 1.0, 0.0 )) / inputSize ).rgb;\nvec3 pixel2 = texture2D( textureVideo, (pixelTex + vec2( 0.0, 1.0 )) / inputSize ).rgb;\nvec3 pixel3 = texture2D( textureVideo, (pixelTex + vec2( 1.0, 1.0 )) / inputSize ).rgb;\nfloat pixel0U = RGBtoU( pixel0 );\nfloat pixel1U = RGBtoU( pixel1 );\nfloat pixel2U = RGBtoU( pixel2 );\nfloat pixel3U = RGBtoU( pixel3 );\ngl_FragColor = vec4( pixel0U, pixel1U, pixel2U, pixel3U );\n}",ye[we.video_packed_4kernel_rgb_to_v]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 outputSize = videoSize * vec2( 0.5, 0.5 );\nvoid main(){\nvec2 pixelOut = (uv * outputSize);\nvec2 pixelTex = (uv * inputSize) + halfPixel;\nvec3 pixel0 = texture2D( textureVideo, (pixelTex + vec2( 0.0, 0.0 )) / inputSize ).rgb;\nvec3 pixel1 = texture2D( textureVideo, (pixelTex + vec2( 1.0, 0.0 )) / inputSize ).rgb;\nvec3 pixel2 = texture2D( textureVideo, (pixelTex + vec2( 0.0, 1.0 )) / inputSize ).rgb;\nvec3 pixel3 = texture2D( textureVideo, (pixelTex + vec2( 1.0, 1.0 )) / inputSize ).rgb;\nfloat pixel0V = RGBtoV( pixel0 );\nfloat pixel1V = RGBtoV( pixel1 );\nfloat pixel2V = RGBtoV( pixel2 );\nfloat pixel3V = RGBtoV( pixel3 );\ngl_FragColor = vec4( pixel0V, pixel1V, pixel2V, pixel3V );\n}",ye[we.video_packed_4kernel_rgb_to_y]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 outputSize = videoSize * vec2( 0.5, 0.5 );\nvoid main(){\nvec2 pixelOut = (uv * outputSize);\nvec2 pixelTex = (uv * inputSize) + halfPixel;\nvec3 pixel0 = texture2D( textureVideo, (pixelTex + vec2( 0.0, 0.0 )) / inputSize ).rgb;\nvec3 pixel1 = texture2D( textureVideo, (pixelTex + vec2( 1.0, 0.0 )) / inputSize ).rgb;\nvec3 pixel2 = texture2D( textureVideo, (pixelTex + vec2( 0.0, 1.0 )) / inputSize ).rgb;\nvec3 pixel3 = texture2D( textureVideo, (pixelTex + vec2( 1.0, 1.0 )) / inputSize ).rgb;\nfloat pixel0Y = RGBtoY( pixel0 );\nfloat pixel1Y = RGBtoY( pixel1 );\nfloat pixel2Y = RGBtoY( pixel2 );\nfloat pixel3Y = RGBtoY( pixel3 );\ngl_FragColor = vec4( pixel0Y, pixel1Y, pixel2Y, pixel3Y );\n}",ye[we.video_packed_4kernel_rgb_to_y_perseus]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform sampler2D textureResidual;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 outputSize = videoSize * vec2( 0.5, 0.5 );\nvoid main(){\nvec2 pixelOut = (uv * outputSize);\nvec2 pixelTex = (uv * inputSize) + halfPixel;\nvec2 uv0 = (pixelTex + vec2( 0.0, 0.0 )) / inputSize;\nvec2 uv1 = (pixelTex + vec2( 1.0, 0.0 )) / inputSize;\nvec2 uv2 = (pixelTex + vec2( 0.0, 1.0 )) / inputSize;\nvec2 uv3 = (pixelTex + vec2( 1.0, 1.0 )) / inputSize;\nvec3 pixel0 = texture2D( textureVideo, uv0 ).rgb;\nvec3 pixel1 = texture2D( textureVideo, uv1 ).rgb;\nvec3 pixel2 = texture2D( textureVideo, uv2 ).rgb;\nvec3 pixel3 = texture2D( textureVideo, uv3 ).rgb;\nfloat pixel0Y = RGBtoY( pixel0 );\nfloat pixel1Y = RGBtoY( pixel1 );\nfloat pixel2Y = RGBtoY( pixel2 );\nfloat pixel3Y = RGBtoY( pixel3 );\nvec4 texResidual = vec4( residualFloat( texture2D( textureResidual, uv ).a ));\ngl_FragColor = vec4( pixel0Y, pixel1Y, pixel2Y, pixel3Y ) + texResidual;\n}",ye[we.video_packed_4kernel_upscale_x]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIn;\nuniform vec2 videoSize;\nvarying vec2 uv;\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = (videoSize + halfPixel) * vec2( 0.5, 0.5 );\nvec2 outputSize = (videoSize + halfPixel) * vec2( 1.0, 0.5 );\nvec2 pixelTexOffset = vec2( 0.0, 0.0 );\nuniform vec4 k0;\nuniform vec4 k1;\nvoid main(){\nvec2 pixelTex = floor( uv * inputSize ) + pixelTexOffset - halfPixel;\nvec4 srcTexL = texture2D( textureIn, (pixelTex + vec2( -1.0, 0.0 )) / inputSize );\nvec4 srcTexC = texture2D( textureIn, (pixelTex + vec2( 0.0, 0.0 )) / inputSize );\nvec4 srcTexR = texture2D( textureIn, (pixelTex + vec2( 1.0, 0.0 )) / inputSize );\nvec4 colOut = vec4( 0.0 );\nif( mod( gl_FragCoord.x, 2.0 ) < 1.0 ){\ncolOut = vec4(\ndot( k0, vec4( srcTexL[0], srcTexL[1], srcTexC[0], srcTexC[1] )),\ndot( k1, vec4( srcTexL[1], srcTexC[0], srcTexC[1], srcTexR[0] )),\ndot( k0, vec4( srcTexL[2], srcTexL[3], srcTexC[2], srcTexC[3] )),\ndot( k1, vec4( srcTexL[3], srcTexC[2], srcTexC[3], srcTexR[2] ))\n);\n}else{\ncolOut = vec4(\ndot( k0, vec4( srcTexL[1], srcTexC[0], srcTexC[1], srcTexR[0] )),\ndot( k1, vec4( srcTexC[0], srcTexC[1], srcTexR[0], srcTexR[1] )),\ndot( k0, vec4( srcTexL[3], srcTexC[2], srcTexC[3], srcTexR[2] )),\ndot( k1, vec4( srcTexC[2], srcTexC[3], srcTexR[2], srcTexR[3] ))\n);\n}\ngl_FragColor = colOut;\n}",ye[we.video_packed_4kernel_upscale_y]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIn;\nuniform vec2 videoSize;\nvarying vec2 uv;\nvec2 halfPixel = vec2( -0.499999 );\nvec2 inputSize = (videoSize + halfPixel) * vec2( 1.0, 0.5 );\nvec2 outputSize = (videoSize + halfPixel) * vec2( 1.0, 1.0 );\nuniform vec4 k0;\nuniform vec4 k1;\nvoid main(){\nvec2 pixelTex = floor( uv * inputSize ) - halfPixel;\nvec4 srcTexT = texture2D( textureIn, (pixelTex + vec2( 0.0, -1.0 )) / inputSize );\nvec4 srcTexC = texture2D( textureIn, (pixelTex + vec2( 0.0, 0.0 )) / inputSize );\nvec4 srcTexB = texture2D( textureIn, (pixelTex + vec2( 0.0, 1.0 )) / inputSize );\nvec4 colOut = vec4( 0.0 );\nif( mod( gl_FragCoord.y, 2.0 ) < 1.0 ){\ncolOut = vec4(\ndot( k0, vec4( srcTexT[0], srcTexT[2], srcTexC[0], srcTexC[2] )),\ndot( k0, vec4( srcTexT[1], srcTexT[3], srcTexC[1], srcTexC[3] )),\ndot( k1, vec4( srcTexT[2], srcTexC[0], srcTexC[2], srcTexB[0] )),\ndot( k1, vec4( srcTexT[3], srcTexC[1], srcTexC[3], srcTexB[1] ))\n);\n}else{\ncolOut = vec4(\ndot( k0, vec4( srcTexT[2], srcTexC[0], srcTexC[2], srcTexB[0] )),\ndot( k0, vec4( srcTexT[3], srcTexC[1], srcTexC[3], srcTexB[1] )),\ndot( k1, vec4( srcTexC[0], srcTexC[2], srcTexB[0], srcTexB[2] )),\ndot( k1, vec4( srcTexC[1], srcTexC[3], srcTexB[1], srcTexB[3] ))\n);\n}\ngl_FragColor = colOut;\n}",ye[we.video_packed_4kernel_upscale_y_perseus]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureIn;\nuniform sampler2D textureResidual;\nuniform vec2 videoSize;\nvarying vec2 uv;\n##video_functions##\nvec2 halfPixel = vec2( -0.49 );\nvec2 inputSize = (videoSize + halfPixel) * vec2( 1.0, 0.5 );\nvec2 outputSize = (videoSize + halfPixel) * vec2( 1.0, 1.0 );\nvec2 residualSize = (videoSize + halfPixel) * vec2( 0.5, 1.0 );\nvec2 offsetResiduals = vec2( 0.0, 1.0 );\nuniform vec4 k0;\nuniform vec4 k1;\nvoid main(){\nvec2 pixelTex = floor( uv * inputSize ) - halfPixel;\nvec4 srcTexT = texture2D( textureIn, (pixelTex + vec2( 0.0, -1.0 )) / inputSize );\nvec4 srcTexC = texture2D( textureIn, (pixelTex + vec2( 0.0, 0.0 )) / inputSize );\nvec4 srcTexB = texture2D( textureIn, (pixelTex + vec2( 0.0, 1.0 )) / inputSize );\nvec4 colOut = vec4( 0.0 );\nif( mod( gl_FragCoord.y, 2.0 ) < 1.0 ){\ncolOut = vec4(\ndot( k0, vec4( srcTexT[0], srcTexT[2], srcTexC[0], srcTexC[2] )),\ndot( k0, vec4( srcTexT[1], srcTexT[3], srcTexC[1], srcTexC[3] )),\ndot( k1, vec4( srcTexT[2], srcTexC[0], srcTexC[2], srcTexB[0] )),\ndot( k1, vec4( srcTexT[3], srcTexC[1], srcTexC[3], srcTexB[1] ))\n);\n}else{\ncolOut = vec4(\ndot( k0, vec4( srcTexT[2], srcTexC[0], srcTexC[2], srcTexB[0] )),\ndot( k0, vec4( srcTexT[3], srcTexC[1], srcTexC[3], srcTexB[1] )),\ndot( k1, vec4( srcTexC[0], srcTexC[2], srcTexB[0], srcTexB[2] )),\ndot( k1, vec4( srcTexC[1], srcTexC[3], srcTexB[1], srcTexB[3] ))\n);\n}\nfloat outX = gl_FragCoord.x - offsetResiduals.x / 2.0;\nfloat outY = gl_FragCoord.y - offsetResiduals.y / 2.0;\nvec4 texResidualTop = texture2D( textureResidual, vec2( outX, outY + 0.0 ) / outputSize );\nvec4 texResidualBot = texture2D( textureResidual, vec2( outX, outY + 0.5 ) / outputSize );\nvec4 quad = vec4(0.0);\nif( mod( gl_FragCoord.x, 2.0 ) < 1.0 ){\nquad = vec4( texResidualTop.xy, texResidualBot.xy );\n}else{\nquad = vec4( texResidualTop.zw, texResidualBot.zw );\n}\ncolOut = colOut + residualVec4( quad );\ngl_FragColor = colOut;\n}",ye[we.video_packed_4kernel_yuv_merge]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureY;\nuniform sampler2D textureU;\nuniform sampler2D textureV;\nuniform vec2 videoSize;\nuniform vec2 dithering;\nvarying vec2 uv;\n##video_functions##\nvec2 inputSize = videoSize * vec2( 1.0, 1.0 );\nvec2 outputSize = videoSize * vec2( 2.0, 2.0 );\nvec2 offsetOut = vec2( 0.0, 0.0 );\nvoid main(){\nvec2 pixelIn = uv + (offsetOut *-0.5) / inputSize;\nvec4 srcTexY = texture2D( textureY, pixelIn );\nvec4 srcTexU = texture2D( textureU, pixelIn );\nvec4 srcTexV = texture2D( textureV, pixelIn );\nvec2 pixelOut = uv;\nfloat component = step( 0.99999, mod( gl_FragCoord.x - offsetOut.x, 2.0 )) + step( 0.99999, mod( gl_FragCoord.y - offsetOut.y, 2.0 )) * 2.0;\nvec3 YUV = vec433componentf( srcTexY, srcTexU, srcTexV, component );\nvec3 RGB = YUVtoRGB( YUV );\ngl_FragColor = vec4( RGB, 1.0 );\n}",ye[we.video_simple]="\n#version 100\nprecision ##float_precision## float;\nuniform sampler2D textureVideo;\nuniform vec2 videoSize;\nvarying vec2 uv;\nvoid main(){\nvec3 colOut = texture2D( textureVideo, uv ).rgb;\ngl_FragColor = vec4( colOut, 1.0 );\n}";var _e="highp";function Se(e){return e=(e=e.replace(/##float_precision##/g,_e)).replace(/##video_functions##/g,ye[we.video_functions])}function We(e,t,i,s){var r=e.createShader(s);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){J.error("Problem compiling shader.");var a=e.getShaderInfoLog(r);if(a.length>0&&(J.error(`ShaderInfoLog: ${a}`),J.error("src",i),-1!==a.indexOf("ERROR")))throw new TypeError(`COMPILE ERROR (${t})`);return null}return r}function Ge(e,t,i,s,r){var a=Se(ye[t]),n=Se(ye[i]),l=We(e,t,a,e.VERTEX_SHADER),o=We(e,i,n,e.FRAGMENT_SHADER),h=e.createProgram();e.attachShader(h,l),e.attachShader(h,o);var u="";switch(e.getError()){case e.INVALID_ENUM:u="INVALID_ENUM. An unacceptable value has been specified for an enumerated argument. The command is ignored and the error flag is set.";break;case e.INVALID_VALUE:u="INVALID_VALUE. A numeric argument is out of range. The command is ignored and the error flag is set.";break;case e.INVALID_OPERATION:u="INVALID_OPERATION. The specified command is not allowed for the current state. The command is ignored and the error flag is set.";break;case e.INVALID_FRAMEBUFFER_OPERATION:u="INVALID_FRAMEBUFFER_OPERATION. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";break;case e.OUT_OF_MEMORY:u="OUT_OF_MEMORY. Not enough memory is left to execute the command.";break;case e.CONTEXT_LOST_WEBGL:u="CONTEXT_LOST_WEBGL."}if(u&&J.error(`ERROR in program "${i}" : ${u}`),e.linkProgram(h),!e.getProgramParameter(h,e.LINK_STATUS))throw J.error(`ERROR linking program "${i}"`),new Error("WEBGL LINK ERROR");var c={program:h,name:i,vertShader:l,fragShader:o,uniforms:{},attributes:{}};return s.forEach((t=>{c.attributes[t]=e.getAttribLocation(h,t)})),r.forEach((t=>{c.uniforms[t]=e.getUniformLocation(h,t)})),c}function Ee(e,t){return t&&t.program&&(e.detachShader(t.program,t.vertShader),e.detachShader(t.program,t.fragShader),e.deleteShader(t.vertShader),e.deleteShader(t.fragShader)),w.OK}function ke(e,t,i,s){t>0&&i>0||J.error(`ERROR framebuffer texture dimensions are invalid. ${t} x ${i}`);var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var a=e.createFramebuffer();switch(e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.checkFramebufferStatus(e.FRAMEBUFFER)){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:J.error("gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT: The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.");break;case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:J.error("gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: There is no attachment.");break;case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:J.error("gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS: Height and width of the attachment are not the same.");break;case e.FRAMEBUFFER_UNSUPPORTED:J.error("gl.FRAMEBUFFER_UNSUPPORTED: The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.")}return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),{width:t,height:i,texture:r,framebuffer:a}}function Xe(e,t){return e.deleteTexture(t.texture),e.deleteFramebuffer(t.framebuffer),w.OK}function Fe(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t}function Le(e,t){return e.deleteTexture(t),w.OK}function Ie(e,t){var i=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),e.STATIC_DRAW),i}function Me(e,t){var i=e.createBuffer(),s=t instanceof Float32Array?t:new Float32Array(t);return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),{buffer:i,array:s}}function Ve(e,t){return e.deleteBuffer(t.buffer),t.array=null,w.OK}function Ze(e,t){return e.useProgram(t.program),w.OK}function Ke(e,t){var i=t.length*t.BYTES_PER_ELEMENT,s=e._malloc(i);e.HEAPU8.set(t,s>>2);var r=new Uint8Array(e.HEAPU8.buffer,s,i);return r.set(new Uint8Array(t.buffer)),r}function Ye(e,t){return t&&null!==t&&e._free(t.byteOffset),w.OK}var Ce=new WeakMap,Ue=new WeakMap,Be=new WeakMap,He=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,ze=new WeakMap,De=new WeakMap,Ne=new WeakMap,Je=new WeakMap,je=new WeakMap,Qe=new WeakMap,$e=new WeakMap,qe=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,st=new WeakMap,rt=new WeakMap,at=new WeakMap,nt=new WeakMap,lt=new WeakMap,ot=new WeakMap,ht=new WeakMap,ut=new WeakMap,ct=new WeakMap,dt=new WeakMap,pt=new WeakMap,ft=new WeakMap,vt=new WeakMap,mt=new WeakMap,bt=new WeakMap,xt=new WeakMap,gt=new WeakMap,At=new WeakMap,Tt=new WeakMap,Rt=new WeakMap,yt=new WeakMap,wt=new WeakSet,_t=new WeakSet,St=new WeakSet,Wt=new WeakSet,Gt=new WeakSet;class Et{constructor(e){f(this,Gt),f(this,Wt),f(this,St),f(this,_t),f(this,wt),p(this,Ce,{writable:!0,value:null}),p(this,Ue,{writable:!0,value:null}),p(this,Be,{writable:!0,value:0}),p(this,He,{writable:!0,value:null}),p(this,Pe,{writable:!0,value:0}),p(this,Oe,{writable:!0,value:null}),p(this,ze,{writable:!0,value:!1}),p(this,De,{writable:!0,value:!1}),p(this,Ne,{writable:!0,value:0}),p(this,Je,{writable:!0,value:{pointer:Ke(P,new Uint8Array(1)),size:1}}),p(this,je,{writable:!0,value:{pointer:Ke(P,new Uint8Array(1)),size:1}}),p(this,Qe,{writable:!0,value:null}),p(this,$e,{writable:!0,value:null}),r(this,"glOptions",{alpha:!1,antialias:!1,depth:!1,desynchronized:!0,failIfMajorPerformanceCaveat:!1,lowLatency:!0,powerPreference:"default",premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1}),p(this,qe,{writable:!0,value:null}),p(this,et,{writable:!0,value:!1}),p(this,tt,{writable:!0,value:null}),p(this,it,{writable:!0,value:!1}),p(this,st,{writable:!0,value:0}),p(this,rt,{writable:!0,value:{vendor:"unknown",renderer:"unknown"}}),p(this,at,{writable:!0,value:null}),p(this,nt,{writable:!0,value:null}),p(this,lt,{writable:!0,value:null}),p(this,ot,{writable:!0,value:null}),p(this,ht,{writable:!0,value:null}),p(this,ut,{writable:!0,value:null}),p(this,ct,{writable:!0,value:null}),p(this,dt,{writable:!0,value:null}),p(this,pt,{writable:!0,value:null}),p(this,ft,{writable:!0,value:null}),p(this,vt,{writable:!0,value:null}),p(this,mt,{writable:!0,value:null}),p(this,bt,{writable:!0,value:null}),p(this,xt,{writable:!0,value:null}),p(this,gt,{writable:!0,value:null}),p(this,At,{writable:!0,value:null}),p(this,Tt,{writable:!0,value:null}),p(this,Rt,{writable:!0,value:[0,.125,1,-.125]}),p(this,yt,{writable:!0,value:[-.125,1,.125,0]}),o(this,Ce,e),o(this,Ue,new Re)}get _gl(){return l(this,$e)}get _lcevcAspectRatio(){return l(this,Be)}set _lcevcAspectRatio(e){o(this,Be,e)}get _lcevcDecoderPointer(){return l(this,He)}get _profileIn(){return l(this,Ue)._profileIn}get _profileOut(){return l(this,Ue)._profileOut}set _setProfileIn(e){l(this,Ue)._setProfileIn(e)}set _setProfileOut(e){l(this,Ue)._setProfileOut(e)}get _parseStats(){return[l(this,st),l(this,it),l(this,tt)]}get _getrefreshDpi(){return l(this,ze)}_setGLOptions(e){for(var t=0,i=Object.entries(e);t<i.length;t++){var s=a(i[t],2),r=s[0],n=s[1];this.glOptions[r]=n}return w.OK}get _shaderVideoDisplay(){return l(this,At)}get _glNoiseTexture(){return l(this,Tt)}set shaderKernel0(e){o(this,Rt,e)}set shaderKernel1(e){o(this,yt,e)}_openLcevcDecoder(e,t){o(this,Qe,getComputedStyle(e).display),"none"===l(this,Qe)&&o(this,Qe,"block"),o(this,$e,t.getContext("webgl",this.glOptions)||t.getContext("experimental-webgl",this.glOptions));var i=l(this,$e).getExtension("WEBGL_debug_renderer_info");return l(this,rt).vendor=l(this,$e).getParameter(i.UNMASKED_VENDOR_WEBGL),l(this,rt).renderer=l(this,$e).getParameter(i.UNMASKED_RENDERER_WEBGL),J.info(`GPU Info\n\tVendor:\t\t${l(this,rt).vendor}\n    \n\tRenderer:\t${l(this,rt).renderer}`),l(this,$e)?(c(this,wt,kt).call(this),w.OK):(J.error("WebGL is not supported in your browser"),w.FAIL)}_setQuads(e,t,i,s,r,a,n,o,h,u,c){var d;return e.attributes||(e.attributes={},e.attributes[n]=l(this,$e).getAttribLocation(e.program,n),e.attributes[t]=l(this,$e).getAttribLocation(e.program,t)),e.buffers||(e.buffers={},e.buffers.pos=l(this,$e).createBuffer(),e.buffers.posArray=new Float32Array(8),e.buffers.uv=l(this,$e).createBuffer(),e.buffers.uvArray=new Float32Array(8)),(d=e.buffers.posArray)[0]=i,d[1]=r,d[2]=s,d[3]=r,d[4]=i,d[5]=a,d[6]=s,d[7]=a,(d=e.buffers.uvArray)[0]=o,d[1]=u,d[2]=h,d[3]=u,d[4]=o,d[5]=c,d[6]=h,d[7]=c,l(this,$e).bindBuffer(l(this,$e).ARRAY_BUFFER,e.buffers.pos),l(this,$e).vertexAttribPointer(e.attributes[t],2,l(this,$e).FLOAT,!1,0,0),l(this,$e).enableVertexAttribArray(e.attributes[t]),l(this,$e).bufferData(l(this,$e).ARRAY_BUFFER,e.buffers.posArray,l(this,$e).STATIC_DRAW),l(this,$e).bindBuffer(l(this,$e).ARRAY_BUFFER,e.buffers.uv),l(this,$e).vertexAttribPointer(e.attributes[n],2,l(this,$e).FLOAT,!1,0,0),l(this,$e).enableVertexAttribArray(e.attributes[n]),l(this,$e).bufferData(l(this,$e).ARRAY_BUFFER,e.buffers.uvArray,l(this,$e).STATIC_DRAW),w.OK}_close(){return Le(l(this,$e),l(this,Tt)),l(this,$e).clearColor(0,0,0,1),l(this,$e).clear(l(this,$e).COLOR_BUFFER_BIT),P._perseus_end_tracing(),function(e,t){t&&null!==t&&e._free(t),w.OK}(P,l(this,Oe)),0===P._perseus_decoder_close(l(this,He))?w.OK:w.FAIL}_reset(e,t,i){if(J.msg("reset"),o(this,et,!0),P._perseus_decoder_close(l(this,He)),o(this,He,P._perseus_decoder_open_wrapper(1)),o(this,Oe,function(e,t){var i=t.length*t.BYTES_PER_ELEMENT,s=e._malloc(i);return e.HEAP32.set(t,s>>2),s}(P,new Int32Array(5))),P._perseus_start_tracing(),1!==i){o(this,qe,null);var s=null,r=e._getKeyframe(t,5);if(null!==r&&(s=this._parseLcevcDataContinuous(e,r,0)),!s)return J.warn(`Failed to load and parse lcevc data for timestamp: ${t}`),P&&l(this,Je).pointer&&c(this,_t,Xt).call(this),o(this,et,!1),w.FAIL;o(this,qe,P._perseus_decoder_get_surface_size(l(this,He),0))}return o(this,et,!1),w.OK}_parseLcevcDataContinuous(e,t,i){var s=l(this,He),r=t;2===l(this,Ce).containerFormat&&(r+=.01);var a=e._getGroup(r);if(!a||Et.round(r)<Et.round(a.startTime)||Et.round(r)>Et.round(a.endTime))return J.debug(`Frame not found at this timestamp ${Et.round(r)}`),null;var n=l(this,tt);o(this,st,0);var h=[],u=[],c=-1,d=!1;if(i>0&&(u=e._getPreviousGroups(a,i)).length>0){if(u[u.length-1].index>n)return P._perseus_decoder_clear_temporal(s,0),o(this,tt,a.index),o(this,it,!0),o(this,st,i),null;for(var p=1;p<u.length;p+=1)if(u[p].index===n){c=p-1;break}o(this,st,c+1);for(var f=c;f>=0;f-=1)-1!==u[f].level&&u[f].level!==l(this,Ce).currentLevel||(u[f].keyframe&&(d=!0),(!1===l(this,it)||d)&&(this._parseLcevcDataItem(u[f].pssData),h.push(u[f])))}var v=null;if(-1!==a.level&&a.level!==l(this,Ce).currentLevel)return null;if(a.keyframe&&(d=!0),!1!==l(this,it)&&!d)return null;if(v=this._parseLcevcDataItem(a.pssData),h.push(a),o(this,tt,a.index),o(this,it,!1),s&&v&&0!==v.flags.parse){var m=P._perseus_decoder_get_last_error_wrapper(s);if(J.error(`Module decoder failed. Error #${m}`),3===m)a.keyframe||this._reset(e,r,0);return null}return 0===v.lcevc.width||0===v.lcevc.height?(J.error("parsed lcevc data failed integrity check."),null):{flags:v.flags,lcevc:v.lcevc,parseLog:h,group:a}}_parseLcevcDataFromKeyframe(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=l(this,He),a=t;2===l(this,Ce).containerFormat&&(a+=.01);var n=e._getGroup(a);if(!n||Et.round(a)<Et.round(n.startTime)||Et.round(a)>Et.round(n.endTime))return J.debug(`Frame not found at this timestamp ${a}`),null;o(this,tt,n.index),o(this,it,!1),P._perseus_decoder_clear_temporal(r,0);var h=e._getKeyframe(a,i);if(null===h)return null;var u=[],c=null,d=e._getGroup(h,!0);if(null!==d)do{if(-1===d.level||d.level===l(this,Ce).currentLevel||s){if(0!==(c=this._parseLcevcDataItem(d.pssData)).flags.parse){for(var p=d;0!==c.flags.parse&&p&&(p=e._getPreviousGroups(p,1)[0]);)c=this._parseLcevcDataItem(p.pssData);d=p}if(u.push(d),0!==c.flags.parse)break}d=e._getNextGroup(d)}while(null!==d&&d.startTime<=n.startTime);if(!c)return J.error("could not find route from keyframe back to current frame."),l(this,ze)&&(o(this,ze,!1),P._perseus_decoder_clear_temporal(r,0),this._reset(e,a,1),o(this,Pe,l(this,Ce).currentLevel)),null;if(0!==c.flags.parse){var f=P._perseus_decoder_get_last_error_wrapper(r);if(J.error(`Module decoder failed. Error #${f}`),3===f)n.keyframe||this._reset(e,a,0);return null}return 0===c.lcevc.width||0===c.lcevc.height?(J.error("parsed lcevc data failed integrity check."),null):{flags:c.flags,lcevc:c.lcevc,parseLog:u,group:n}}_refreshDpi(){l(this,ze)||o(this,ze,!0)}_parseLcevcDataItem(e){var t=l(this,He),i=-1,s=-1,r=-1,a={};if(l(this,et)||(c(this,St,Ft).call(this,e),l(this,De)||(o(this,De,!0),i=P._perseus_decoder_parse_wrapper(t,l(this,Je).pointer.byteOffset,l(this,Je).size,l(this,Oe)),o(this,De,!1))),0===i){var n=new Int32Array(P.HEAP32.buffer,l(this,Oe),5);a.width=n[0],a.height=n[1],a.is1D=n[2],a.hasBase=n[3],a.hasHigh=n[4];var h=a.width>>1,u=a.width,d=u*a.height;d+=d/4*2,s=P._perseus_decoder_decode_base_wrapper(t,l(this,Je).pointer.byteOffset,h),c(this,Wt,Lt).call(this,d),t&&l(this,Je).pointer&&(r=P._perseus_decoder_decode_high_wrapper(t,l(this,je).pointer.byteOffset,u)),0===s&&0===r||(i=-1)}return{flags:{parse:i,decodeBase:s,decodeHigh:r},lcevc:a}}_glDebug(e,t,i,s,r,a,n){var o=l(this,at),h=o.uniforms;return Ze(l(this,$e),o),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(h.textureVideo,0),null===i?l(this,$e).uniform1f(h.useBase,0):(l(this,$e).activeTexture(l(this,$e).TEXTURE1),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,i),l(this,$e).uniform1i(h.textureResidualBase,1),l(this,$e).uniform1f(h.useBase,1)),null===s?l(this,$e).uniform1f(h.useHigh,0):(l(this,$e).activeTexture(l(this,$e).TEXTURE2),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,s),l(this,$e).uniform1i(h.textureResidualHigh,2),l(this,$e).uniform1f(h.useHigh,1)),l(this,$e).uniform2f(h.videoSize,r,a),l(this,$e).uniform1f(h.isKeyFrame,n?1:0),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(o,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoSimple(e,t,i,s){var r=l(this,nt),a=r.uniforms;return Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(a.textureVideo,0),l(this,$e).uniform2f(a.videoSize,i,s),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideo1DRGBToYUV(e,t){var i=l(this,lt),s=i.uniforms;Ze(l(this,$e),i),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(s.textureIn,0);var r=l(this,Ue)._getProfile(l(this,Ue)._profileIn),a=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(s.colorSpace_RGBYUV,!1,r.glMatrix),l(this,$e).uniformMatrix4fv(s.colorSpace_YUVRGB,!1,a.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(i,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideo1DRGBToYUVPerseus(e,t,i){var s=l(this,ot),r=s.uniforms;Ze(l(this,$e),s),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(r.textureIn,0),l(this,$e).activeTexture(l(this,$e).TEXTURE1),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,i),l(this,$e).uniform1i(r.textureResidual,1);var a=l(this,Ue)._getProfile(l(this,Ue)._profileIn),n=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(r.colorSpace_RGBYUV,!1,a.glMatrix),l(this,$e).uniformMatrix4fv(r.colorSpace_YUVRGB,!1,n.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(s,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideo1D4KernelUpscaleX(e,t,i,s){var r=l(this,ht),a=r.uniforms;return Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t.texture),l(this,$e).uniform1i(a.textureIn,0),l(this,$e).uniform2f(a.videoSize,i,s),l(this,$e).uniform4fv(a.k0,l(this,Rt)),l(this,$e).uniform4fv(a.k1,l(this,yt)),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideo1DYUVToRGB(e,t){var i=l(this,ct),s=i.uniforms;Ze(l(this,$e),i),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t.texture),l(this,$e).uniform1i(s.textureIn,0);var r=l(this,Ue)._getProfile(l(this,Ue)._profileIn),a=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(s.colorSpace_RGBYUV,!1,r.glMatrix),l(this,$e).uniformMatrix4fv(s.colorSpace_YUVRGB,!1,a.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(i,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideo1DYUVToRGBPerseus(e,t,i){var s=l(this,ut),r=s.uniforms;Ze(l(this,$e),s),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t.texture),l(this,$e).uniform1i(r.textureIn,0),l(this,$e).activeTexture(l(this,$e).TEXTURE1),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,i),l(this,$e).uniform1i(r.textureResidual,1),l(this,$e).uniform2f(r.videoSize,e.width,e.height);var a=l(this,Ue)._getProfile(l(this,Ue)._profileIn),n=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(r.colorSpace_RGBYUV,!1,a.glMatrix),l(this,$e).uniformMatrix4fv(r.colorSpace_YUVRGB,!1,n.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(s,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelRGBToYPerseus(e,t,i,s,r){var a=l(this,pt),n=a.uniforms;Ze(l(this,$e),a),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(n.textureVideo,0),l(this,$e).activeTexture(l(this,$e).TEXTURE1),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,i),l(this,$e).uniform1i(n.textureResidual,1),l(this,$e).uniform2f(n.videoSize,s,r);var o=l(this,Ue)._getProfile(l(this,Ue)._profileIn),h=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(n.colorSpace_RGBYUV,!1,o.glMatrix),l(this,$e).uniformMatrix4fv(n.colorSpace_YUVRGB,!1,h.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(a,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelRGBToY(e,t,i,s){var r=l(this,dt),a=r.uniforms;Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(a.textureVideo,0),l(this,$e).uniform2f(a.videoSize,i,s);var n=l(this,Ue)._getProfile(l(this,Ue)._profileIn),o=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(a.colorSpace_RGBYUV,!1,n.glMatrix),l(this,$e).uniformMatrix4fv(a.colorSpace_YUVRGB,!1,o.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelRGBToU(e,t,i,s){var r=l(this,ft),a=r.uniforms;Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(a.textureVideo,0),l(this,$e).uniform2f(a.videoSize,i,s);var n=l(this,Ue)._getProfile(l(this,Ue)._profileIn),o=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(a.colorSpace_RGBYUV,!1,n.glMatrix),l(this,$e).uniformMatrix4fv(a.colorSpace_YUVRGB,!1,o.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelRGBToV(e,t,i,s){var r=l(this,vt),a=r.uniforms;Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(a.textureVideo,0),l(this,$e).uniform2f(a.videoSize,i,s);var n=l(this,Ue)._getProfile(l(this,Ue)._profileIn),o=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(a.colorSpace_RGBYUV,!1,n.glMatrix),l(this,$e).uniformMatrix4fv(a.colorSpace_YUVRGB,!1,o.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelUpscaleX(e,t,i,s){var r=l(this,mt),a=r.uniforms;return Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t.texture),l(this,$e).uniform1i(a.textureIn,0),l(this,$e).uniform2f(a.videoSize,i,s),l(this,$e).uniform4fv(a.k0,l(this,Rt)),l(this,$e).uniform4fv(a.k1,l(this,yt)),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelUpscaleY(e,t,i,s){var r=l(this,bt),a=r.uniforms;return Ze(l(this,$e),r),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t.texture),l(this,$e).uniform1i(a.textureIn,0),l(this,$e).uniform2f(a.videoSize,i,s),l(this,$e).uniform4fv(a.k0,l(this,Rt)),l(this,$e).uniform4fv(a.k1,l(this,yt)),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(r,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelUpscaleYPerseus(e,t,i,s,r){var a=l(this,xt),n=a.uniforms;return Ze(l(this,$e),a),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t.texture),l(this,$e).uniform1i(n.textureIn,0),l(this,$e).activeTexture(l(this,$e).TEXTURE1),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,i),l(this,$e).uniform1i(n.textureResidual,1),l(this,$e).uniform2f(n.videoSize,s,r),l(this,$e).uniform4fv(n.k0,l(this,Rt)),l(this,$e).uniform4fv(n.k1,l(this,yt)),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(a,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}_glVideoPacked4KernelYUVMerge(e,t,i,s,r,a){var n=l(this,gt),o=n.uniforms;Ze(l(this,$e),n),l(this,$e).viewport(0,0,e.width,e.height),l(this,$e).activeTexture(l(this,$e).TEXTURE0),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,t),l(this,$e).uniform1i(o.textureY,0),l(this,$e).activeTexture(l(this,$e).TEXTURE1),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,i),l(this,$e).uniform1i(o.textureU,1),l(this,$e).activeTexture(l(this,$e).TEXTURE2),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,s),l(this,$e).uniform1i(o.textureV,2),l(this,$e).uniform2f(o.videoSize,r,a);var h=l(this,Ue)._getProfile(l(this,Ue)._profileIn),u=l(this,Ue)._getProfile(l(this,Ue)._profileOut);return l(this,$e).uniformMatrix4fv(o.colorSpace_RGBYUV,!1,h.glMatrix),l(this,$e).uniformMatrix4fv(o.colorSpace_YUVRGB,!1,u.glMatrixInverse),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,e.framebuffer),this._setQuads(n,"position",-1,1,-1,1,"texcoord",0,1,0,1),l(this,$e).drawArrays(l(this,$e).TRIANGLE_STRIP,0,4),l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,null),l(this,$e).bindFramebuffer(l(this,$e).FRAMEBUFFER,null),l(this,$e).flush(),w.OK}static round(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:3);return Math.round((e+Number.EPSILON)*t)/t}}function kt(){var e,t;return e=l(this,$e),t="highp",e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision||(t="mediump",e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision||(t="lowp")),_e=t,Ee(l(this,$e),l(this,at)),o(this,at,Ge(l(this,$e),we.vert,we.debug_residuals,["position","texcoord"],["textureVideo","textureResidualBase","textureResidualHigh","videoSize","useBase","useHigh","isKeyFrame"])),Ee(l(this,$e),l(this,nt)),o(this,nt,Ge(l(this,$e),we.vert,we.video_simple,["position","texcoord"],["textureVideo","videoSize"])),Ee(l(this,$e),l(this,lt)),o(this,lt,Ge(l(this,$e),we.vert,we.video_1d_rgb_to_yuv,["position","texcoord"],["textureVideo","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,ot)),o(this,ot,Ge(l(this,$e),we.vert,we.video_1d_rgb_to_yuv_perseus,["position","texcoord"],["textureVideo","textureResidual","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,ht)),o(this,ht,Ge(l(this,$e),we.vert,we.video_1d_4kernel_upscale_x,["position","texcoord"],["textureIn","videoSize","k0","k1"])),Ee(l(this,$e),l(this,ut)),o(this,ut,Ge(l(this,$e),we.vert,we.video_1d_yuv_to_rgb_perseus,["position","texcoord"],["textureIn","textureResidual","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,ct)),o(this,ct,Ge(l(this,$e),we.vert,we.video_1d_yuv_to_rgb,["position","texcoord"],["textureIn","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,dt)),o(this,dt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_rgb_to_y,["position","texcoord"],["textureVideo","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,pt)),o(this,pt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_rgb_to_y_perseus,["position","texcoord"],["textureVideo","textureResidual","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,ft)),o(this,ft,Ge(l(this,$e),we.vert,we.video_packed_4kernel_rgb_to_u,["position","texcoord"],["textureVideo","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,vt)),o(this,vt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_rgb_to_v,["position","texcoord"],["textureVideo","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,mt)),o(this,mt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_upscale_x,["position","texcoord"],["textureIn","videoSize","k0","k1"])),Ee(l(this,$e),l(this,bt)),o(this,bt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_upscale_y,["position","texcoord"],["textureIn","videoSize","k0","k1"])),Ee(l(this,$e),l(this,xt)),o(this,xt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_upscale_y_perseus,["position","texcoord"],["textureIn","textureResidual","videoSize","k0","k1"])),Ee(l(this,$e),l(this,gt)),o(this,gt,Ge(l(this,$e),we.vert,we.video_packed_4kernel_yuv_merge,["position","texcoord"],["textureY","textureU","textureV","videoSize","colorSpace_RGBYUV","colorSpace_YUVRGB"])),Ee(l(this,$e),l(this,At)),o(this,At,Ge(l(this,$e),we.vert,we.video_display,["position","texcoord"],["textureFrame","textureNoise","frameSize","outputSize","dithering"])),c(this,Gt,It).call(this),w.OK}function Xt(){return Ye(P,l(this,Je).pointer)}function Ft(e){return l(this,Je).pointer.byteLength<e.length?(Ye(P,l(this,Je).pointer),l(this,Je).pointer=Ke(P,e)):l(this,Je).pointer.set(e),l(this,Je).size=e.length,w.OK}function Lt(e){return Ye(P,l(this,je).pointer),o(this,je,{pointer:Ke(P,new Uint8Array(1)),size:e}),l(this,je).size=e,w.OK}function It(){var e=l(this,$e).createTexture();l(this,$e).bindTexture(l(this,$e).TEXTURE_2D,e);for(var t=262144,i=new Uint8Array(t),s=0;s<t;s+=1)i[s]=255*Math.random()>>0;return l(this,$e).texImage2D(l(this,$e).TEXTURE_2D,0,l(this,$e).ALPHA,512,512,0,l(this,$e).ALPHA,l(this,$e).UNSIGNED_BYTE,i),l(this,$e).texParameteri(l(this,$e).TEXTURE_2D,l(this,$e).TEXTURE_MIN_FILTER,l(this,$e).NEAREST),l(this,$e).texParameteri(l(this,$e).TEXTURE_2D,l(this,$e).TEXTURE_MAG_FILTER,l(this,$e).NEAREST),l(this,$e).texParameteri(l(this,$e).TEXTURE_2D,l(this,$e).TEXTURE_WRAP_S,l(this,$e).REPEAT),l(this,$e).texParameteri(l(this,$e).TEXTURE_2D,l(this,$e).TEXTURE_WRAP_T,l(this,$e).REPEAT),o(this,Tt,e),w.OK}var Mt=Et;var Vt=class{constructor(){this.id=0,this.frameRate=0,this.mediaTime=-1,this.presentationTime=-1,this.keyframe=!1,this.drift=0,this.inputWidth=0,this.inputHeight=0,this.inputWidthTrue=0,this.inputHeightTrue=0,this.outputWidth=0,this.outputHeight=0,this.hasLcevc=!1,this.lcevcInfo={parse:!1,width:0,height:0,is1D:!1,hasBase:!1,hasHigh:!1,ditherStrength:0,parseLog:null},this.timingStats={uploadBase:0,decodeResidual:0,uploadResidual:0,renderShader:0,presentationShader:0,displayCount:0,displayFirst:0,displayRecent:0},this.available=!0,this.rendered=!1,this.randomSeed=Math.random(),this.fbo=null}get _isLcevcParsed(){return this.lcevcInfo.parse?_.APPLIED:_.NOT_APPLIED}};var Zt=class{static detectOperatingSystem(){var e,t=window.navigator,i=t.userAgent,s=t.platform;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(s)?e=E:-1!==["iPhone","iPad","iPod"].indexOf(s)?e=k:-1!==["Win32","Win64","Windows","WinCE"].indexOf(s)?e=X:/Android/.test(i)?e=F:!e&&/Linux/.test(s)&&(e=L),e}static detectPlayer(){var e;return void 0!==window.Hls?e=M:void 0!==window.dashjs?e=V:void 0!==window.shaka?e=I:void 0!==window.THEOplayer&&(e=Z),e}static detectBrowser(){var e;return navigator.userAgent.search("Edge")>-1?e=K.EDGE:navigator.userAgent.search("Trident/7.0")>-1?e=K.IE11:navigator.userAgent.search("Chrome")>-1?e=K.CHROME:navigator.userAgent.search("Firefox")>-1?e=K.FIREFOX:navigator.userAgent.search("Safari")>-1?e=K.SAFARI:navigator.userAgent.search("Opera")>-1&&(e=K.OPERA),e}},Kt=new WeakMap,Yt=new WeakMap,Ct=new WeakMap,Ut=new WeakMap,Bt=new WeakSet;function Ht(){o(this,Ut,Zt.detectOperatingSystem())}var Pt=class{constructor(e,t){f(this,Bt),p(this,Kt,{writable:!0,value:null}),p(this,Yt,{writable:!0,value:""}),p(this,Ct,{writable:!0,value:""}),p(this,Ut,{writable:!0,value:""}),o(this,Kt,{bypass:!0,seek:0,play:0,pause:0,fpsReceived:!1}),o(this,Yt,e),o(this,Ct,t),c(this,Bt,Ht).call(this)}getOffsets(e,t,i){var s,r,a=!0,n=1/i;return l(this,Yt)===K.CHROME&&(a=!1,l(this,Ct)===M&&(e===Y&&(s=0,r=0),e===C&&(s=0,r=0)),l(this,Ct)===I&&(s=1e-5,r=0,e===Y&&(t&&(s=1e-5+2*n,r=0),t||(i>30?(s=1e-5-3*n,r=1e-5-3*n):(s=-.01,r=0-.5*n)))),l(this,Ct)===Z&&(e===Y&&(s=i>30?-.03:-.05,r=i>30?-.03:-.05),e===C&&(s=.01,r=.01)),l(this,Ct)===V&&(s=.01,r=.01)),l(this,Yt)===K.FIREFOX&&(a=!1,l(this,Ct)===I&&(e===Y&&(s=0,r=0),e===C&&(s=1*n,r=1*n)),l(this,Ct)===M&&(s=i>30?.02:.03,r=-.01,l(this,Ut)===E&&i>30&&(s=.022)),l(this,Ct)===V&&(s=i>30?.03:.04,r=0),l(this,Ct)===Z&&(e===Y&&(s=i>30?-.02:-.04,r=i>30?-.04:-.06),e===C&&(s=.02,r=.02))),l(this,Yt)===K.SAFARI&&(a=!1,l(this,Ct)===M&&(e===Y&&(s=-.01,r=-.01),e===C&&(s=-.01,r=-.01)),l(this,Ct)===I&&(s=1e-5,r=0,e===Y&&t&&(s=1e-5+2*n,r=0)),l(this,Ct)===Z&&(e===Y&&(s=-.02,r=-.02),e===C&&(s=-.01,r=-.01))),l(this,Kt).bypass=a,l(this,Kt).seek=r||0,l(this,Kt).play=s||0,l(this,Kt).fpsReceived=Number.isFinite(i),l(this,Kt)}},Ot=new WeakMap,zt=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,Jt=new WeakMap,jt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,qt=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,si=new WeakMap,ri=new WeakMap,ai=new WeakMap,ni=new WeakMap,li=new WeakMap,oi=new WeakMap,hi=new WeakMap,ui=new WeakMap,ci=new WeakMap,di=new WeakMap,pi=new WeakMap,fi=new WeakMap,vi=new WeakMap,mi=new WeakMap,bi=new WeakMap,xi=new WeakMap,gi=new WeakMap,Ai=new WeakSet,Ti=new WeakSet,Ri=new WeakSet,yi=new WeakSet,wi=new WeakSet;function _i(){for(var e=0;e<l(this,Dt);e+=1){var t=l(this,Jt)[e];if(t.available)return t}if(l(this,Dt)<l(this,Nt)){var i=new Vt;return i.fbo=ke(l(this,zt),1,1),l(this,Jt).push(i),o(this,Dt,l(this,Jt).length),i}return null}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.id=0,e.frameRate=0,e.mediaTime=-1,e.presentationTime=-1,e.keyframe=!1,e.drift=0,e.inputWidth=0,e.inputHeight=0,e.inputWidthTrue=0,e.inputHeightTrue=0,e.outputWidth=0,e.outputHeight=0,e.hasLcevc=!1;var i=e.lcevcInfo;i.parse=!1,i.width=0,i.height=0,i.is1D=!1,i.hasBase=!1,i.hasHigh=!1,i.ditherStrength=0,i.parseLog=null;var s=e.timingStats;return s.uploadBase=0,s.decodeResidual=0,s.uploadResidual=0,s.renderShader=0,s.presentationShader=0,s.displayCount=0,s.displayFirst=0,s.displayRecent=0,e.available=!0,e.rendered=!1,e.randomSeed=Math.random(),e.fbo&&t&&(Xe(l(this,zt),e.fbo),e.fbo=ke(l(this,zt),1,1)),w.OK}function Wi(e,t,i){return l(this,bi)===e&&l(this,Ot).streamingFormat===t&&l(this,Ot).containerFormat===i}function Gi(){return l(this,Ot).isLive}function Ei(e){var t={offset:l(this,Ot).totalOffset,drift:e.drift,correctFirstKeyframe:!0};if(c(this,yi,Gi).call(this)&&c(this,Ri,Wi).call(this,I,B,C))return{offset:.08,drift:0,correctFirstKeyframe:!1};if(c(this,yi,Gi).call(this)&&c(this,Ri,Wi).call(this,I,U,C))return i(i({},t),{},{correctFirstKeyframe:!1});if(c(this,yi,Gi).call(this)&&c(this,Ri,Wi).call(this,I,U,Y))return i(i({},t),{},{offset:l(this,Ot).timestampOffset,correctFirstKeyframe:!1});if(!c(this,yi,Gi).call(this)&&c(this,Ri,Wi).call(this,I,B,C))return{offset:l(this,Ot).firstKeyframeOffset,drift:0,correctFirstKeyframe:!1};if(!c(this,yi,Gi).call(this)&&c(this,Ri,Wi).call(this,I,U,Y)){var s=.1-l(this,Ot).firstKeyframeOffset;return i(i({},t),{},{offset:t.offset+s})}return t}var ki=class{constructor(e,t){return f(this,wi),f(this,yi),f(this,Ri),f(this,Ti),f(this,Ai),p(this,Ot,{writable:!0,value:null}),p(this,zt,{writable:!0,value:null}),p(this,Dt,{writable:!0,value:0}),p(this,Nt,{writable:!0,value:10}),p(this,Jt,{writable:!0,value:[]}),p(this,jt,{writable:!0,value:null}),p(this,Qt,{writable:!0,value:null}),p(this,$t,{writable:!0,value:.1}),p(this,qt,{writable:!0,value:null}),p(this,ei,{writable:!0,value:!1}),p(this,ti,{writable:!0,value:-1}),p(this,ii,{writable:!0,value:-1}),p(this,si,{writable:!0,value:0}),p(this,ri,{writable:!0,value:null}),p(this,ai,{writable:!0,value:null}),p(this,ni,{writable:!0,value:null}),p(this,li,{writable:!0,value:0}),p(this,oi,{writable:!0,value:!1}),p(this,hi,{writable:!0,value:!1}),p(this,ui,{writable:!0,value:.01}),p(this,ci,{writable:!0,value:0}),p(this,di,{writable:!0,value:0}),p(this,pi,{writable:!0,value:0}),p(this,fi,{writable:!0,value:0}),p(this,vi,{writable:!0,value:!1}),p(this,mi,{writable:!0,value:""}),p(this,bi,{writable:!0,value:""}),p(this,xi,{writable:!0,value:[]}),p(this,gi,{writable:!0,value:100}),o(this,Ot,e),o(this,zt,t),o(this,ri,Fe(l(this,zt))),o(this,ai,Fe(l(this,zt))),o(this,ni,Fe(l(this,zt))),o(this,ei,!0),o(this,bi,Zt.detectPlayer()),o(this,mi,l(this,Ot).currentBrowser.browser),o(this,Qt,new Pt(l(this,mi),l(this,bi))),o(this,jt,l(this,Qt).getOffsets(l(this,Ot).containerFormat,l(this,Ot).isLive)),w.OK}get _displayFrame(){return l(this,Jt)[l(this,ti)]}get _is1D(){return l(this,vi)}get _getAudioDelay(){return l(this,ui)}get _recentFrameRate(){return l(this,si)}get _isLcevcParsed(){return l(this,oi)}get _isQueueRendered(){var e=l(this,Jt)[l(this,ti)];return!e||!e.available&&e.rendered}_close(){var e=l(this,zt);return l(this,Jt).forEach((t=>{Xe(e,t.fbo),t.presentationTime=-1})),Le(e,l(this,ri)),Le(e,l(this,ai)),Le(e,l(this,ni)),o(this,zt,null),o(this,Ot,null),w.OK}_unsyncPresentationTime(){return o(this,qt,null),w.OK}_inputFrame(e,t,i,r,a){var n,h,u,d,p,f,v,m,b,x,g,A,T,w,_,E,k,X,F,L,I,V,Z,K,C,U,B,H,O,z,D,N,j,Q,$,q,ee,te,ie,se=arguments,re=this;return s().async((function(s){for(;;)switch(s.prev=s.next){case 0:if(n=se.length>5&&void 0!==se[5]&&se[5],h=se.length>6&&void 0!==se[6]&&se[6],u=se.length>7&&void 0!==se[7]?se[7]:0,d=se.length>8&&void 0!==se[8]?se[8]:0,p=0,f=0,v=0,m=0,b=0,x=0,g=0,A=0,T=0,w=0,_=0,E=0,k=0,X=0,F=r,l(re,ei)){s.next=22;break}return J.error("Queue not initialised."),s.abrupt("return",null);case 22:if(!n){s.next=27;break}(L=new Vt).fbo=ke(l(re,zt),1,1),s.next=31;break;case 27:if(null!==(L=c(re,Ai,_i).call(re))){s.next=31;break}return J.error("No empty Frame in Queue."),s.abrupt("return",null);case 31:if(I=performance.now(),F?(0===F.mediaTime&&(F.mediaTime=i.currentTime),L.mediaTime=F.mediaTime,I=F.now,o(re,pi,F.width),o(re,fi,F.height)):(L.mediaTime=i.currentTime,o(re,pi,i.videoWidth),o(re,fi,i.videoHeight)),l(re,Ot).renderBufferCheck&&(l(re,pi)!==l(re,ci)/2||l(re,Ot).currentLevel!==l(re,Ot).nextLevel&&!l(re,Ot).isLcevcPresentlyDecoded)&&(a._getrefreshDpi||(l(re,Ot).useTimestampOffsetForNextProfile(),l(re,Ot).setCurrentLevelBufferSwitch(),a._refreshDpi())),null===l(re,qt)&&o(re,qt,I-1e3*L.mediaTime),L.presentationTime=1e3*L.mediaTime+l(re,qt)+1e3*l(re,$t),L.id=l(re,li),o(re,li,l(re,li)+1),L.drift=u,L.totalOffset=l(re,Ot).totalOffset,h||L.mediaTime!==l(re,ii)){s.next=43;break}return J.msg("Already input this frame."),s.abrupt("return",null);case 43:if(o(re,ii,L.mediaTime),V=l(re,Ot).getConfigOption("shaderPath"),p=performance.now(),(Z=l(re,zt)).bindTexture(Z.TEXTURE_2D,l(re,ri)),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.NEAREST),Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,Z.RGBA,Z.UNSIGNED_BYTE,i),f=performance.now(),K=0,C=c(re,wi,Ei).call(re,L),U=C.offset,B=C.drift,H=C.correctFirstKeyframe,K=L.mediaTime+B+U+(window.DEBUG_FAKETIMEOFFSET||0),H&&(K=K===l(re,Ot).totalOffset?l(re,Ot).firstKeyframeOffset:K),v=performance.now(),l(re,Ot).rtpTimestampSync&&F&&F.rtpTimestamp&&(K=F.rtpTimestamp),1!==d||!l(re,jt).bypass){s.next=60;break}return s.abrupt("return",null);case 60:O=null,l(re,Ot).isLcevcEnabled&&V!==S&&(0!==L.drift||l(re,Ot).isPerformanceScalingEnabled&&l(re,Ot).isPerformanceScalingActive?O=null:i.paused||!l(re,hi)?(1===d&&(K+=l(re,jt).seek),2===d&&(K+=l(re,jt).pause),O=a._parseLcevcDataFromKeyframe(t,K,5,n)):(K+=l(re,jt).play,l(re,bi)===M&&l(re,Ot).containerFormat===Y&&K>=10&&K<20&&(K+=.06),O=a._parseLcevcDataContinuous(t,K,10))),m=performance.now(),null!==O&&0===O.flags.parse?(L.hasLcevc=!0,(z=L.lcevcInfo).parse=0===O.flags.parse,z.width=O.lcevc.width,z.height=O.lcevc.height,o(re,ci,z.width),o(re,di,z.height),z.is1D=1===O.lcevc.is1D,o(re,vi,1===O.lcevc.is1D),z.hasBase=1===O.lcevc.hasBase,z.hasHigh=1===O.lcevc.hasHigh,z.parseLog=O.parseLog,a._lcevcAspectRatio=z.width/z.height,L.frameRate=O.group.frameRate,o(re,si,L.frameRate),L.keyframe=O.group.keyframe,L.outputWidth=L.lcevcInfo.width,L.outputHeight=L.lcevcInfo.height,z.is1D?F?(L.inputWidthTrue=F.width,L.inputHeightTrue=F.height,L.inputWidth=L.inputWidthTrue<<1,L.inputHeight=L.inputHeightTrue):(L.inputWidth=i.videoWidth,L.inputHeight=i.videoHeight,L.inputWidthTrue=L.inputWidth>>1,L.inputHeightTrue=L.inputHeight):(L.inputWidth=i.videoWidth,L.inputHeight=i.videoHeight,L.inputWidthTrue=L.inputWidth,L.inputHeightTrue=L.inputHeight),o(re,oi,!0),o(re,hi,!0),D=a._lcevcDecoderPointer,L.lcevcInfo.ditherStrength=P._perseus_decoder_get_dither_strength(D),L.lcevcInfo.hasBase&&(b=performance.now(),N=!1,0===O.flags.decodeBase?($=P._perseus_decoder_get_surface_size(D,0))===L.inputWidthTrue*L.inputHeightTrue?(N=!0,j=P._perseus_decoder_get_surface(D,0,y),Q=new Uint8Array(P.HEAPU8.buffer,j,$)):J.warn("Lcevc base size mismatch."):J.warn(`Lcevc base not decoded (ERROR:${O.flags.decodeBase}).`),x=performance.now(),g=x,N?(Z.bindTexture(Z.TEXTURE_2D,l(re,ai)),Z.texImage2D(Z.TEXTURE_2D,0,Z.ALPHA,L.inputWidthTrue,L.inputHeightTrue,0,Z.ALPHA,Z.UNSIGNED_BYTE,Q)):(L.lcevcInfo.hasBase=!1,Z.bindTexture(Z.TEXTURE_2D,l(re,ai)),Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,1,1,0,Z.RGBA,Z.UNSIGNED_BYTE,null)),A=performance.now()),L.lcevcInfo.hasHigh&&(T=performance.now(),N=!1,0===O.flags.decodeHigh?(q=P._perseus_decoder_get_surface_size(D,1))===L.outputWidth*L.outputHeight?(N=!0,j=P._perseus_decoder_get_surface(D,0,R),Q=new Uint8Array(P.HEAPU8.buffer,j,q)):J.warn("Lcevc high size mismatch."):J.warn(`Lcevc high not decoded (ERROR:${O.flags.decodeHigh}).`),w=performance.now(),_=w,N?(ee=V===W&&!1===z.is1D,Z.bindTexture(Z.TEXTURE_2D,l(re,ni)),ee?Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,L.outputWidth>>2,L.outputHeight,0,Z.RGBA,Z.UNSIGNED_BYTE,Q):Z.texImage2D(Z.TEXTURE_2D,0,Z.ALPHA,L.outputWidth,L.outputHeight,0,Z.ALPHA,Z.UNSIGNED_BYTE,Q)):(L.lcevcInfo.hasHigh=!1,Z.bindTexture(Z.TEXTURE_2D,l(re,ni)),Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,1,1,0,Z.RGBA,Z.UNSIGNED_BYTE,null)),E=performance.now())):(o(re,hi,!1),L.hasLcevc=!1,L.frameRate=l(re,si)||0,a._lcevcAspectRatio>0?(a._lcevcAspectRatio=i.videoWidth/i.videoHeight,L.inputHeight=i.videoHeight,L.inputHeightTrue=L.inputHeight,L.inputWidth=L.inputHeight*a._lcevcAspectRatio,F?L.inputWidth===F.width?(L.lcevcInfo.is1D=!1,L.inputWidthTrue=L.inputWidth):(L.lcevcInfo.is1D=!0,L.inputWidthTrue=L.inputWidth>>1):L.inputWidthTrue=L.inputWidth):(L.inputWidth=i.videoWidth,L.inputHeight=i.videoHeight,L.inputWidthTrue=L.inputWidth,L.inputHeightTrue=L.inputHeight),L.outputWidth=L.inputWidth,L.outputHeight=L.inputHeight),k=performance.now(),s.t0=V,s.next=s.t0===W?68:s.t0===G?70:(s.t0,72);break;case 68:return L.lcevcInfo.is1D?e._renderFrame1D(a,L,l(re,ri),l(re,ai),l(re,ni)):e._renderFrame(a,L,l(re,ri),l(re,ai),l(re,ni)),s.abrupt("break",74);case 70:return e._renderDebug(a,L,l(re,ri),l(re,ai),l(re,ni)),s.abrupt("break",74);case 72:return e._renderSimple(a,L,l(re,ri),l(re,ai),l(re,ni)),s.abrupt("break",74);case 74:return X=performance.now(),L.timingStats.uploadBase=f-p,L.timingStats.decodeResidual=m-v+(x-b)+(w-T),L.timingStats.uploadResidual=A-g+(E-_),L.timingStats.renderShader=X-k,L.available=!1,L.randomSeed=Math.abs(Math.sin(L.mediaTime))%1,te=(performance.now()-I)/1e3,l(re,xi).length<l(re,gi)?o(re,xi,[te].concat(l(re,xi))):(o(re,xi,l(re,xi).slice(0,Math.floor(.5*l(re,gi)))),ie=l(re,xi).reduce(((e,t)=>e+t),0)/l(re,xi).length,o(re,xi,[]),o(re,ui,ie),l(re,Ot)._updateAudioParams(l(re,ui))),s.abrupt("return",L);case 84:case"end":return s.stop()}}),null,null,null,Promise)}getInternalTextures(){return{texVid:l(this,ri),texBase:l(this,ai),texHigh:l(this,ni)}}_updateQueue(e,t,i){var s=performance.now();o(this,jt,l(this,Qt).getOffsets(l(this,Ot).containerFormat,l(this,Ot).isLive,l(this,si)));for(var r=[],a=-1,n=-1,h=0;h<l(this,Jt).length;h+=1){var u=l(this,Jt)[h];!u.available&&u.presentationTime<s&&(r.push(h),(-1===a||u.presentationTime>n)&&(a=h,n=u.presentationTime))}-1!==a&&o(this,ti,a),t.paused||e._processQueue(l(this,Jt),a,s,i);for(var d=0;d<r.length;d+=1){var p=r[d];if(p!==a){var f=l(this,Jt)[p];c(this,Ti,Si).call(this,f)}}return w.OK}_resetQueue(){return o(this,Dt,0),o(this,Jt,[]),o(this,ii,-1),o(this,ti,-1),o(this,hi,!1),this._unsyncPresentationTime(),w.OK}_presentFrame(e,t,i,s,r,a,n){var o=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:null)||l(this,Jt)[l(this,ti)];if(!o)return J.debug(`Invalid queueFrame or index (${l(this,ti)})`),_.ERROR;o.lcevcInfo.parse||this._unsyncPresentationTime();var h=o.fbo.width/o.fbo.height,u=o.fbo.width,c=o.fbo.height;if(r&&(c=(u=Math.abs(i.width-i.offsetWidth)>1?i.offsetWidth:i.width)/h>>0,a&&(!l(this,Ot).isPerformanceScalingEnabled||!l(this,Ot).isPerformanceScalingActive))){var d=window.devicePixelRatio;u*=d,c*=d}var p=i.offsetHeight<=0?c:i.offsetHeight;c=c>p?p:c,i.width=u,i.height=c;var f=performance.now();t._renderToScreen(e,o.fbo.texture,o.fbo.width,o.fbo.height,u,c,o.randomSeed,o.lcevcInfo.ditherStrength);var v=performance.now(),m=performance.now(),b=o.timingStats;return 0===b.displayFirst&&(b.displayFirst=m),b.displayRecent=m,b.displayCount+=1,b.presentationShader=v-f,s._setPresentationFrame(o),o.rendered=!0,o.lcevcInfo.parse?_.APPLIED:_.NOT_APPLIED}},Xi=new WeakMap,Fi=new WeakMap,Li=new WeakMap,Ii=new WeakMap,Mi=new WeakMap,Vi=new WeakMap,Zi=new WeakMap,Ki=new WeakMap,Yi=new WeakMap,Ci=new WeakMap,Ui=new WeakMap,Bi=new WeakMap,Hi=new WeakMap,Pi=new WeakMap,Oi=new WeakSet;function zi(e,t,i,s){var r=s?l(this,Xi).LINEAR:null;if(e.width!==t||e.height!==i||e.filter!==r){Xe(l(this,Xi),e);var a=ke(l(this,Xi),t,i,r);e.width=t,e.height=i,e.texture=a.texture,e.framebuffer=a.framebuffer,e.filter=r}return w.OK}var Di=class{constructor(e){f(this,Oi),p(this,Xi,{writable:!0,value:null}),p(this,Fi,{writable:!0,value:null}),p(this,Li,{writable:!0,value:null}),p(this,Ii,{writable:!0,value:null}),p(this,Mi,{writable:!0,value:null}),p(this,Vi,{writable:!0,value:null}),p(this,Zi,{writable:!0,value:null}),p(this,Ki,{writable:!0,value:null}),p(this,Yi,{writable:!0,value:null}),p(this,Ci,{writable:!0,value:null}),p(this,Ui,{writable:!0,value:null}),p(this,Bi,{writable:!0,value:null}),p(this,Hi,{writable:!0,value:0}),p(this,Pi,{writable:!0,value:0}),o(this,Xi,e),o(this,Yi,ke(e,1,1)),o(this,Fi,ke(e,1,1)),o(this,Li,ke(e,1,1)),o(this,Ii,ke(e,1,1)),o(this,Mi,ke(e,1,1)),o(this,Vi,ke(e,1,1)),o(this,Zi,ke(e,1,1)),o(this,Ki,ke(e,1,1)),o(this,Ci,ke(e,1,1)),o(this,Ui,ke(e,1,1)),o(this,Bi,ke(e,1,1))}get _presentationFrameWidth(){return l(this,Hi)}get _presentationFrameHeight(){return l(this,Pi)}_close(){var e=l(this,Xi);return Xe(e,l(this,Yi)),w.OK,Xe(e,l(this,Fi)),w.OK,Xe(e,l(this,Li)),w.OK,Xe(e,l(this,Ii)),w.OK,Xe(e,l(this,Mi)),w.OK,Xe(e,l(this,Vi)),w.OK,Xe(e,l(this,Zi)),w.OK,Xe(e,l(this,Ki)),w.OK,Xe(e,l(this,Ci)),w.OK,Xe(e,l(this,Ui)),w.OK,Xe(e,l(this,Bi)),w.OK,o(this,Xi,null),w.OK}_renderFrame(e,t,i,s,r){var a=t.inputWidth,n=t.inputHeight,o=t.outputWidth,h=t.outputHeight;return c(this,Oi,zi).call(this,t.fbo,o,h,!0),c(this,Oi,zi).call(this,l(this,Fi),a>>1,n>>1),c(this,Oi,zi).call(this,l(this,Li),a>>1,n>>1),c(this,Oi,zi).call(this,l(this,Ii),a>>1,n>>1),c(this,Oi,zi).call(this,l(this,Vi),a,n>>1),c(this,Oi,zi).call(this,l(this,Zi),a,n>>1),c(this,Oi,zi).call(this,l(this,Ki),a,n>>1),c(this,Oi,zi).call(this,l(this,Ci),a,n),c(this,Oi,zi).call(this,l(this,Ui),a,n),c(this,Oi,zi).call(this,l(this,Bi),a,n),t.lcevcInfo.hasBase?e._glVideoPacked4KernelRGBToYPerseus(l(this,Fi),i,s,a,n):e._glVideoPacked4KernelRGBToY(l(this,Fi),i,a,n),e._glVideoPacked4KernelRGBToU(l(this,Li),i,a,n),e._glVideoPacked4KernelRGBToV(l(this,Ii),i,a,n),e._glVideoPacked4KernelUpscaleX(l(this,Vi),l(this,Fi),a,n),e._glVideoPacked4KernelUpscaleX(l(this,Zi),l(this,Li),a,n),e._glVideoPacked4KernelUpscaleX(l(this,Ki),l(this,Ii),a,n),t.lcevcInfo.hasHigh?e._glVideoPacked4KernelUpscaleYPerseus(l(this,Ci),l(this,Vi),r,a,n):e._glVideoPacked4KernelUpscaleY(l(this,Ci),l(this,Vi),a,n),e._glVideoPacked4KernelUpscaleY(l(this,Ui),l(this,Zi),a,n),e._glVideoPacked4KernelUpscaleY(l(this,Bi),l(this,Ki),a,n),e._glVideoPacked4KernelYUVMerge(t.fbo,l(this,Ci).texture,l(this,Ui).texture,l(this,Bi).texture,a,n),w.OK}_getInternalFrameBufferStates(){return{gl:l(this,Xi),fboVideoYUV:l(this,Yi),fboVideoY:l(this,Fi),fboVideoU:l(this,Li),fboVideoV:l(this,Ii),fboUpscale:l(this,Mi),fboUpscaleY:l(this,Vi),fboUpscaleU:l(this,Zi),fboUpscaleV:l(this,Ki),fboApplyY:l(this,Ci),fboApplyU:l(this,Ui),fboApplyV:l(this,Bi)}}_renderFrame1D(e,t,i,s,r){var a=t.inputWidth,n=t.inputHeight,o=t.outputWidth,h=t.outputHeight;return c(this,Oi,zi).call(this,t.fbo,o,h,!0),c(this,Oi,zi).call(this,l(this,Yi),a>>1,n),c(this,Oi,zi).call(this,l(this,Mi),o,o),t.lcevcInfo.hasBase?e._glVideo1DRGBToYUVPerseus(l(this,Yi),i,s):e._glVideo1DRGBToYUV(l(this,Yi),i),e._glVideo1D4KernelUpscaleX(l(this,Mi),l(this,Yi),a,n),t.lcevcInfo.hasHigh?e._glVideo1DYUVToRGBPerseus(t.fbo,l(this,Mi),r):e._glVideo1DYUVToRGB(t.fbo,l(this,Mi)),w.OK}_renderSimple(e,t,i){var s=t.inputWidth,r=t.inputHeight,a=t.outputWidth,n=t.outputHeight;return c(this,Oi,zi).call(this,t.fbo,a,n,!0),e._glVideoSimple(t.fbo,i,s,r),w.OK}_renderDebug(e,t,i,s,r){var a=t.inputWidth,n=t.inputHeight,l=t.outputWidth,o=t.outputHeight;return c(this,Oi,zi).call(this,t.fbo,l,o,!0),e._glDebug(t.fbo,i,t.lcevcInfo.hasBase?s:null,t.lcevcInfo.hasHigh?r:null,a,n,t.keyframe),w.OK}_renderToScreen(e,t,i,s,r,a,n,h){var u=e._shaderVideoDisplay,c=u.uniforms;o(this,Hi,i),o(this,Pi,s),Ze(l(this,Xi),u),l(this,Xi).viewport(0,0,r,a),l(this,Xi).activeTexture(l(this,Xi).TEXTURE0),l(this,Xi).bindTexture(l(this,Xi).TEXTURE_2D,t),l(this,Xi).uniform1i(c.textureFrame,0),l(this,Xi).activeTexture(l(this,Xi).TEXTURE1),l(this,Xi).bindTexture(l(this,Xi).TEXTURE_2D,e._glNoiseTexture),l(this,Xi).uniform1i(c.textureNoise,1),l(this,Xi).uniform2f(c.frameSize,i,s),l(this,Xi).uniform2f(c.outputSize,r,a);var d=262144*n>>0&511,p=262144*n>>9&511;return l(this,Xi).uniform3f(c.dithering,d,p,h),l(this,Xi).bindFramebuffer(l(this,Xi).FRAMEBUFFER,null),e._setQuads(u,"position",-1,1,1,-1,"texcoord",0,1,0,1),l(this,Xi).drawArrays(l(this,Xi).TRIANGLE_STRIP,0,4),l(this,Xi).bindTexture(l(this,Xi).TEXTURE_2D,null),l(this,Xi).flush(),w.OK}};var Ni=class{constructor(e,t){this.index=e,this.startTime=e*t,this.endTime=(e+1)*t,this.groups=[],this.groupKeys=[],this.keyframes=[],this.needsUpdate=!1}};var Ji=class{constructor(){this.index=null,this.frameRate=0,this.startTime=0,this.endTime=0,this.keyframe=!1,this.level=-1,this.pssData=null}};function ji(e,t){let i=0,s=e.length-1;for(;i<=s;){const r=~~((i+s)/2);if(t===e[r])return r;t>e[r]?i=r+1:t<e[r]&&(s=r-1)}return i}var Qi=new WeakMap,$i=new WeakMap,qi=new WeakMap,es=new WeakMap,ts=new WeakMap,is=new WeakMap,ss=new WeakMap,rs=new WeakSet,as=new WeakSet;class ns{constructor(e){f(this,as),f(this,rs),p(this,Qi,{writable:!0,value:null}),p(this,$i,{writable:!0,value:1}),p(this,qi,{writable:!0,value:[]}),p(this,es,{writable:!0,value:null}),p(this,ts,{writable:!0,value:!1}),p(this,is,{writable:!0,value:3e3}),p(this,ss,{writable:!0,value:null}),o(this,Qi,e),c(this,rs,ls).call(this)}_close(){return l(this,qi).forEach((e=>{e.groups.forEach((e=>{e.pssData=null}))})),c(this,rs,ls).call(this),o(this,Qi,null),w.OK}_flushDataRange(e,t){for(var i=0;i<l(this,qi).length;i+=1){var s=l(this,qi)[i];if(s)if(s.startTime>=e)if(s.endTime<=t)delete l(this,qi)[i];else{for(var r=0;r<s.groupKeys.length;r+=1){var a=s.groupKeys[r],n=s.groups[a];n&&n.startTime<t&&(s.groupKeys.splice(r,1),delete s.groups[a],r-=1)}u(ns,ns,hs).call(ns,s)}else if(s.endTime>=e){for(var o=0;o<s.groupKeys.length;o+=1){var h=s.groupKeys[o],c=s.groups[h];c&&c.startTime>e&&(s.groupKeys.splice(o,1),delete s.groups[h],o-=1)}u(ns,ns,hs).call(ns,s)}}return w.OK}_addData(e,t,i,s,r,a,n){var h=t/(i||l(this,is));n&&(h=10*t/(10*i||l(this,is)));var d=e+Math.min(1/h,l(this,$i));l(this,ts)&&(c(this,as,os).call(this,e),o(this,ts,!1));var p=Math.floor(e/l(this,$i)),f=l(this,qi)[p];f||(f=new Ni(p,l(this,$i)),l(this,qi)[p]=f);var v=u(ns,ns,us).call(ns,e),m=f.groups[v];if(!m){m=new Ji;var b=ji(f.groupKeys,v);f.groupKeys.splice(b,0,v),f.groups[v]=m}m.index=v,m.frameRate=h,m.startTime=e,m.endTime=d,m.keyframe=s,m.level=r,m.pssData=a,f.needsUpdate=!0,s&&null===l(this,es)&&(l(this,Qi).controls._checkIsLive(e),o(this,es,0===v?.01:v),l(this,Qi).isLive?l(this,Qi).setFirstKeyframeOffset(l(this,es)):l(this,Qi).setFirstKeyframeOffset(l(this,es)<2?l(this,es):.01));var x=f.groupKeys.indexOf(v);if(x>0){var g=f.groupKeys[x-1],A=f.groups[g];A&&A.endTime>m.startTime&&(A.endTime=m.startTime)}else{var T=l(this,qi)[p-1];if(T&&T.groupKeys.length>0){var R=T.groupKeys[T.groupKeys.length-1],y=T.groups[R];y&&y.endTime>m.startTime&&(y.endTime=m.startTime,T.needsUpdate=!0)}}for(var _=x+1,S=f.groupKeys[_],W=f.groups[S];W&&W.startTime<m.endTime;){if(f.groupKeys.splice(_,1),delete f.groups[S],W.endTime>m.endTime)if(W.startTime=m.endTime,W.index=u(ns,ns,us).call(ns,W.startTime),W.startTime>f.endTime){var G=Math.floor(W.startTime/l(this,$i)),E=l(this,qi)[G];if(E||(E=new Ni(G,l(this,$i)),l(this,qi)[G]=E),!E.groups[W.index]){var k=ji(E.groupKeys,W.index);E.groupKeys.splice(k,0,W.index),E.groups[W.index]=W}E.needsUpdate=!0}else f.groups[W.index]||(f.groupKeys.splice(_,0,W.index),f.groups[W.index]=W,_+=1);S=f.groupKeys[_],W=f.groups[S]}if(m.endTime>f.endTime){var X=l(this,qi)[p+1];if(X)for(S=X.groupKeys[0],W=X.groups[S];W&&W.startTime<m.endTime;)m.endTime>W.endTime?(X.groupKeys.splice(0,1),delete X.groups[S]):(W.startTime=m.endTime,W.index=u(ns,ns,us).call(ns,W.startTime),delete X.groups[S],X.groups[W.index]||(X.groupKeys[0]=W.index,X.groups[W.index]=W)),X.needsUpdate=!0,S=X.groupKeys[0],W=X.groups[S]}return w.OK}_getSegment(e){if(Number.isNaN(e))return null;var t=l(this,qi)[e];return t?(t.needsUpdate&&u(ns,ns,hs).call(ns,t),t):null}_getGroup(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Math.floor(e/l(this,$i)),s=this._getSegment(i);if(!s&&!(s=this._getSegment(i-1)))return null;var r=u(ns,ns,us).call(ns,e),a=ji(s.groupKeys,r)-1;if(-1===a&&i>1){if(!(s=this._getSegment(i-1)))return null;a=ji(s.groupKeys,r)-1;var n=this._getKeyFrameGroup(s,a);return n||null}a=-1===a?0:a;var o=this._getKeyFrameGroup(s,a);return t&&o&&!o.keyframe&&(o=this._getKeyFrameGroup(s,a+1)),o||null}_getKeyFrameGroup(e,t){var i=e.groupKeys[t],s=e.groups[i];return s||l(this,ss)}_getKeyframe(e,t){for(var i=Math.floor(e/l(this,$i)),s=u(ns,ns,us).call(ns,e),r=0;r<=t;r+=1){var a=i-r,n=this._getSegment(a);if(n&&n.keyframes.length>0){var o=ji(n.keyframes,s)-1;if(-1===o&&n.groupKeys[o+1]>=s&&(o=0),o>-1){var h=n.keyframes[o];return u(ns,ns,cs).call(ns,h)}}}return null}_getPreviousGroups(e,t){var i=[],s=Math.floor(e.startTime/l(this,$i)),r=this._getSegment(s);if(!r)return null;for(var a=r.groupKeys.indexOf(e.index),n=t+1;i.length<t&&n>0;)(a-=1)<0&&(s-=1,(r=this._getSegment(s))&&(a=r.groupKeys.length-1)),r&&i.push(r.groups[r.groupKeys[a]]),n-=1;return i}_getNextGroup(e){var t=Math.floor(e.startTime/l(this,$i)),i=this._getSegment(t);if(!i)return null;var s=null,r=i.groupKeys.indexOf(e.index);if((r+=1)<i.groupKeys.length)s=i.groups[i.groupKeys[r]];else{if(t+=1,!(i=this._getSegment(t)))return null;i.groupKeys.length>0&&(s=i.groups[i.groupKeys[0]])}return s}_hasLcevcData(e){var t=this._getGroup(e);return t&&e>=t.startTime&&e<=t.endTime}}function ls(){return o(this,qi,[]),o(this,es,null),w.OK}function os(e){if(0===l(this,qi).length)return w.FAIL;for(var t=Math.floor(e/l(this,$i)),i=this._getSegment(t),s=Object.keys(l(this,qi))[0];!i||t<s;)t-=1,i=this._getSegment(t);var r=u(ns,ns,us).call(ns,e),a=ji(i.groupKeys,r)-1;return 0===a?l(this,qi).splice(t,1):(i.groupKeys=i.groupKeys.slice(a,-1),i.endTime=i.groupKeys[i.groupKeys.length-1]),o(this,qi,l(this,qi).slice(t+1,-1)),0}function hs(e){e.needsUpdate=!1,e.keyframes=[];for(var t=0;t<e.groupKeys.length;t+=1){var i=e.groupKeys[t],s=e.groups[i];s?(s.index=i,s.keyframe&&e.keyframes.push(i)):(J.debug("Group not found. Fixing broken segment"),e.groupKeys.splice(t,1),delete e.groups[i],t-=1)}return w.OK}function us(e){return e}function cs(e){return e}var ds=ns,ps=0,fs=1,vs=0,ms=.9,bs=7979984,xs=5253487,gs=10632842,As=16242052,Ts=15622744,Rs=6215285,ys=1e3,ws=256,_s=128,Ss=20,Ws=100,Gs=new WeakMap,Es=new WeakMap,ks=new WeakMap,Xs=new WeakMap,Fs=new WeakMap,Ls=new WeakMap,Is=new WeakMap,Ms=new WeakMap,Vs=new WeakMap,Zs=new WeakMap,Ks=new WeakMap,Ys=new WeakMap,Cs=new WeakMap,Us=new WeakMap,Bs=new WeakMap,Hs=new WeakMap,Ps=new WeakMap,Os=new WeakMap,zs=new WeakMap,Ds=new WeakMap,Ns=new WeakMap,Js=new WeakMap,js=new WeakMap,Qs=new WeakMap,$s=new WeakMap,qs=new WeakMap,er=new WeakMap,tr=new WeakMap,ir=new WeakMap,sr=new WeakMap,rr=new WeakMap,ar=new WeakMap,nr=new WeakMap,lr=new WeakMap,or=new WeakMap,hr=new WeakMap,ur=new WeakMap,cr=new WeakMap,dr=new WeakMap,pr=new WeakMap,fr=new WeakMap,vr=new WeakMap,mr=new WeakMap,br=new WeakSet,xr=new WeakSet,gr=new WeakSet,Ar=new WeakSet,Tr=new WeakSet,Rr=new WeakSet,yr=new WeakSet,wr=new WeakSet,_r=new WeakSet,Sr=new WeakSet,Wr=new WeakSet,Gr=new WeakSet,Er=new WeakSet,kr=new WeakSet,Xr=new WeakSet,Fr=new WeakSet,Lr=new WeakSet,Ir=new WeakSet,Mr=new WeakSet;class Vr{constructor(e,t,i){f(this,Mr),f(this,Ir),f(this,Lr),f(this,Fr),f(this,Xr),f(this,kr),f(this,Er),f(this,Gr),f(this,Wr),f(this,Sr),f(this,_r),f(this,wr),f(this,yr),f(this,Rr),f(this,Tr),f(this,Ar),f(this,gr),f(this,xr),f(this,br),p(this,Gs,{writable:!0,value:null}),p(this,Es,{writable:!0,value:null}),p(this,ks,{writable:!0,value:""}),p(this,Xs,{writable:!0,value:""}),p(this,Fs,{writable:!0,value:0}),p(this,Ls,{writable:!0,value:{processed:0,unique:0,dropped:0,processedAverage:0}}),p(this,Is,{writable:!0,value:1}),p(this,Ms,{writable:!0,value:ps}),p(this,Vs,{writable:!0,value:0}),p(this,Zs,{writable:!0,value:0}),p(this,Ks,{writable:!0,value:0}),p(this,Ys,{writable:!0,value:0}),p(this,Cs,{writable:!0,value:0}),p(this,Us,{writable:!0,value:0}),p(this,Bs,{writable:!0,value:0}),p(this,Hs,{writable:!0,value:0}),p(this,Ps,{writable:!0,value:0}),p(this,Os,{writable:!0,value:!1}),p(this,zs,{writable:!0,value:!1}),p(this,Ds,{writable:!0,value:0}),p(this,Ns,{writable:!0,value:0}),p(this,Js,{writable:!0,value:0}),p(this,js,{writable:!0,value:!1}),p(this,Qs,{writable:!0,value:!1}),p(this,$s,{writable:!0,value:!1}),p(this,qs,{writable:!0,value:null}),p(this,er,{writable:!0,value:null}),p(this,tr,{writable:!0,value:null}),p(this,ir,{writable:!0,value:null}),p(this,sr,{writable:!0,value:null}),p(this,rr,{writable:!0,value:null}),p(this,ar,{writable:!0,value:0}),p(this,nr,{writable:!0,value:0}),p(this,lr,{writable:!0,value:0}),p(this,or,{writable:!0,value:null}),p(this,hr,{writable:!0,value:null}),p(this,ur,{writable:!0,value:null}),p(this,cr,{writable:!0,value:null}),p(this,dr,{writable:!0,value:null}),p(this,pr,{writable:!0,value:null}),p(this,fr,{writable:!0,value:null}),p(this,vr,{writable:!0,value:null}),p(this,mr,{writable:!0,value:null}),o(this,Gs,e),c(this,Ar,Pr).call(this),this._enable(t,i)}_close(){return c(this,xr,Ur).call(this),c(this,yr,Dr).call(this),w.OK}_enable(e,t){return o(this,Qs,e),l(this,Qs)?(c(this,br,Cr).call(this,t),u(Vr,Vr,Zr).call(Vr,l(this,rr),t)):(u(Vr,Vr,Kr).call(Vr,l(this,rr)),c(this,xr,Ur).call(this)),w.OK}_update(){return l(this,Qs)?(l(this,er).innerHTML=`${l(this,ks)}<br/>${l(this,Xs)}`,w.OK):w.FAIL}_processQueue(e,t,i,s){for(var r=0;r<e.length;r+=1){var a=e[r];a.presentationTime<i&&r!==t&&c(this,gr,Hr).call(this,a)}if(l(this,$s)){for(var n='\n      <table id="lcevc-stats-infobox-advanced-frame">\n      <tr><td>Current Frame</td></tr>\n      <tr></tr>\n      <tr><td>#ftext#</td></tr>\n      </table>\n      ',o='\n      <table id="lcevc-stats-infobox-advanced-queue">\n      <tr><td colspan="3">Queued Frames</td></tr>\n      <tr>\n        <td>Display</td>\n        <td>Properties</td>\n        <td>Parsed Residuals</td>\n      </tr>\n      <tr></tr>\n      #qtext#\n      </table>\n      ',h='\n      <table id="lcevc-stats-infobox-advanced-residuals">\n      <tr><td colspan="6">Residual Store</td></tr>\n      <tr>\n        <td>Index</td>\n        <td>Time</td>\n        <td>FRate</td>\n        <td>Lev</td>\n        <td>KeyF</td>\n        <td>pssData</td>\n      </tr>\n      #rtext#\n      </table>\n      ',u=String.fromCharCode(10),d="",p="",f="",v=[],m=0;m<e.length;m+=1){var b=e[m];b.available||v.push([m,b.mediaTime])}v.sort(((e,t)=>e[1]-t[1]));for(var x=0;x<v.length;x+=1){var g=v[x][0],A=e[g];if(p+="<tr>",p+="<td>",g===t){p+=`Current Frame${u}`,d+=`<u>Lcevc Info:</u>${u}`,d+=`hasBase:   ${A.lcevcInfo.hasBase}${u}`,d+=`hasHigh:   ${A.lcevcInfo.hasHigh}${u}`,d+=`is1D:      ${A.lcevcInfo.is1D}${u}`,d+=`dither:    ${A.lcevcInfo.ditherStrength}${u}`,d+=u,d+=`<u>Render Sizes:</u>${u}`,d+=`input:     ${A.inputWidth}x${A.inputHeight}${u}`,d+=`inputTrue: ${A.inputWidthTrue}x${A.inputHeightTrue}${u}`,d+=`output:    ${A.outputWidth}x${A.outputHeight}${u}`,d+=`lcevcInfo: ${A.lcevcInfo.width}x${A.lcevcInfo.height}${u}`,d+=`fbo:       ${A.fbo.width}x${A.fbo.height}${u}`,d+=u;var T=Math.floor(A.mediaTime/1),R=s._getSegment(T);if(R)for(var y=0;y<R.groupKeys.length;y+=1){var _=R.groupKeys[y],S=R.groups[_];f+="<tr>",f+=`<td>${S.index}</td>${u}`,f+=`<td>${S.startTime} - ${S.endTime}</td>${u}`,f+=`<td>${S.frameRate}</td>${u}`,f+=`<td>${S.level}</td>${u}`,f+=`<td>${S.keyframe}</td>${u}`,f+=`<td>${S.pssData?S.pssData.length:"null"}</td>${u}`,f+="</tr>"}else f+=`<tr><td>ERROR. Segment ${T} not found</td></tr>`}else A.presentationTime<i?p+=`Old Frame${u}`:p+=`New Frame${u}`;if(p+=`schedule: ${(A.presentationTime-i).toFixed(3)}ms${u}`,p+=`displayCount: ${A.timingStats.displayCount}${u}`,p+="</td>",p+="<td>",p+=`mediaTime:${A.mediaTime}s${u}`,p+=`drift:${A.drift}${u}`,p+=`frameRate:${A.frameRate}${u}`,p+=`hasLcevc:${A.hasLcevc}${u}`,p+="</td>",null!==A.lcevcInfo.parseLog){p+="<td>";for(var W=0;W<A.lcevcInfo.parseLog.length;W+=1){W>0&&(p+=u);var G=A.lcevcInfo.parseLog[W];p+=G.startTime,G.keyframe&&(p+=" Keyframe")}p+="</td>"}p+="</tr>"}n=n.replace("#ftext#",d),o=o.replace("#qtext#",p),h=h.replace("#rtext#",f),l(this,ir).innerHTML=n+o+h}return w.OK}_setPresentationFrame(e){var t="<br/>",i="";i+=`size: ${e.outputWidth} x ${e.outputHeight}${t}`;i+=`lcevc: ${e.lcevcInfo.parse?'<span style="color:#6f6">active</span>':'<span style="color:#f66">inactive</span>'}${t}`;i+=`dps: ${l(this,Gs).isPerformanceScalingActive&&l(this,Gs).isPerformanceScalingEnabled&&!l(this,zs)?'<span style="color:#6f6">active</span>':'<span style="color:#f66">inactive</span>'}${t}`;return i+=`baseOnly: ${l(this,Gs).isPerformanceScalingActive&&l(this,Gs).isPerformanceScalingEnabled&&l(this,zs)?'<span style="color:#6f6">active</span>':'<span style="color:#f66">inactive</span>'}${t}`,i+=`currentLevel: ${l(this,Gs).currentLevel}${t}`,i+=`nextLevel: ${l(this,Gs).nextLevel}${t}`,o(this,Xs,i),w.OK}get _getTimeRatio(){return l(this,Js)}get _getRenderDecline(){return l(this,Os)}get _incrementMaxSwitch(){return o(this,Ks,l(this,Ks)+1),l(this,Ks)}get _getDPSRenderDecline(){return l(this,zs)}get _getCurrentRenderedFrames(){return l(this,Hs)}}function Zr(e,t){return e?(t.appendChild(e),w.OK):w.FAIL}function Kr(e){return e?(e.parentElement&&e.parentElement.removeChild(e),w.OK):w.FAIL}function Yr(e,t,i,s){var r=document.getElementById(e);r||(r=document.createElement("div")),r.id=e,r.innerHTML=t;var a=`z-index:${ys};`;return r.style.cssText=a+i,s.appendChild(r),r}function Cr(e){return o(this,qs,u(Vr,Vr,Yr).call(Vr,"lcevc-stats-infobox","",`background-color:${u(Vr,Vr,Nr).call(Vr,vs,ms)};`,e)),o(this,er,u(Vr,Vr,Yr).call(Vr,"lcevc-stats-infobox-content","","",l(this,qs))),o(this,tr,u(Vr,Vr,Yr).call(Vr,"lcevc-stats-infobox-btn"," ","",l(this,qs))),o(this,sr,u(Vr,Vr,Br).bind(this)),l(this,tr).addEventListener("click",l(this,sr)),w.OK}function Ur(){return l(this,tr)&&l(this,tr).removeEventListener("click",l(this,sr)),l(this,tr)&&l(this,tr).remove(),l(this,er)&&l(this,er).remove(),l(this,qs)&&l(this,qs).remove(),o(this,tr,null),o(this,er,null),o(this,qs,null),w.OK}function Br(){if(o(this,$s,!l(this,$s)),l(this,$s)){var e=document.body;o(this,ir,u(Vr,Vr,Yr).call(Vr,"lcevc-stats-infobox-advanced","","",e))}else u(Vr,Vr,Kr).call(Vr,l(this,ir)),o(this,ir,null);return w.OK}function Hr(e){var t=performance.now();if(e.available)return w.FAIL;if(l(this,Ms)===fs&&Math.abs(e.frameRate-l(this,ar))>.6&&o(this,Ms,ps),l(this,Ms)===ps&&(o(this,Ms,fs),o(this,Fs,t+1e3*l(this,Is)),o(this,ar,e.frameRate),o(this,nr,e.mediaTime),o(this,lr,l(this,nr)+l(this,Is)-.5/l(this,ar)),l(this,Ls).processed=0,l(this,Ls).unique=0,l(this,Ls).dropped=0),l(this,Ms)===fs&&(e.mediaTime>=l(this,nr)&&e.mediaTime<=l(this,lr)&&(l(this,Ls).processed+=1,e.timingStats.displayCount>0?l(this,Ls).unique+=1:l(this,Ls).dropped+=1),t>=l(this,Fs))){c(this,Gr,ea).call(this,l(this,ar),l(this,Ls).processed,l(this,Ls).unique,l(this,Ls).dropped);var i="",s="<br/>";i+=`fps: ${l(this,ar).toFixed(3)}${s}`,i+=`processed: ${l(this,Ls).processed}${s}`,i+=`display:   ${l(this,Ls).unique}${s}`,i+=`drop:      ${l(this,Ls).dropped}${s}`,o(this,ks,i),o(this,Hs,l(this,Ls).processed),o(this,Ps,l(this,Ls).dropped),o(this,Ms,ps)}return c(this,Sr,$r).call(this,e.frameRate,e.timingStats.uploadBase,e.timingStats.decodeResidual,e.timingStats.uploadResidual,e.timingStats.renderShader+e.timingStats.presentationShader),w.OK}function Pr(){return c(this,Tr,Or).call(this),c(this,Rr,zr).call(this),w.OK}function Or(){var e=document.createElement("canvas");e.width=5*Ss+10+2*_s+10+Ws,e.height=Ws,e.style.cssText=`\n    position: absolute;\n    display: block;\n    top: 0;\n    right: 0;\n    padding: 10px;\n    z-index: ${ys};\n    background-color: ${u(Vr,Vr,Nr).call(Vr,vs,ms)};`;var t=e.getContext("webgl");o(this,rr,e),o(this,Es,t),l(this,Es).clearColor((vs>>16&255)/255,(vs>>8&255)/255,(vs>>0&255)/255,0),l(this,Es).clear(l(this,Es).DEPTH_BUFFER_BIT|l(this,Es).COLOR_BUFFER_BIT),l(this,Es).enable(l(this,Es).BLEND),l(this,Es).blendFuncSeparate(l(this,Es).SRC_ALPHA,l(this,Es).ONE_MINUS_SRC_ALPHA,l(this,Es).ONE,l(this,Es).ONE_MINUS_SRC_ALPHA);var i=document.createElement("div");return i.style.cssText=`\n    position: absolute;\n    display: block;\n    top: 0;\n    pointer-events: none;\n    font-family: arial;\n    font-size: 10px;\n    color: #fff;\n    z-index: ${ys};\n    right: ${Ws+10}px;`,i.innerHTML=`<b style="color:${u(Vr,Vr,Jr).call(Vr,bs)}">&#9608</b> upload base\n    <b style="color:${u(Vr,Vr,Jr).call(Vr,xs)}">&#9608</b> emscripten\n    <b style="color:${u(Vr,Vr,Jr).call(Vr,gs)}">&#9608</b> upload residual\n    <b style="color:${u(Vr,Vr,Jr).call(Vr,As)}">&#9608</b> shaders\n    &nbsp;&nbsp;&nbsp;`,l(this,rr).key=i,l(this,rr).addEventListener("mouseover",c(this,wr,jr)),l(this,rr).addEventListener("mouseout",c(this,_r,Qr)),w.OK}function zr(){o(this,or,ke(l(this,Es),ws,_s)),o(this,hr,ke(l(this,Es),ws,Ss)),o(this,ur,ke(l(this,Es),ws,1)),o(this,cr,Ge(l(this,Es),we.stats_data_vert,we.stats_data_frag,["aBars"],["dataTextureSize","offset"]));return o(this,dr,Ge(l(this,Es),we.stats_bar_vert,we.stats_bar_frag,["aPos","aUV"],["dataTexture","dataTextureSize","offset","viewportSize","spacing"])),l(this,dr).buffers={aPos:Ie(l(this,Es),[-1,-1,1,-1,-1,1,1,1,-1,1,1,-1]),aUV:Ie(l(this,Es),[0,0,1,0,0,1,1,1,0,1,1,0])},o(this,pr,Ge(l(this,Es),we.stats_radial_vert,we.stats_radial_frag,["aPos","aUV"],["dataTexture","viewportSize","timeRatio"])),l(this,pr).buffers={aPos:Ie(l(this,Es),[-1,-1,1,-1,-1,1,1,1,-1,1,1,-1]),aUV:Ie(l(this,Es),[0,0,1,0,0,1,1,1,0,1,1,0])},o(this,fr,Me(l(this,Es),new Float32Array(180))),o(this,vr,Me(l(this,Es),new Float32Array(180))),o(this,mr,Me(l(this,Es),new Float32Array(180))),c(this,Fr,na).call(this),w.OK}function Dr(){return o(this,Vs,0),o(this,Zs,0),o(this,Ys,0),o(this,Cs,0),o(this,Us,0),o(this,Bs,0),Ve(l(this,Es),l(this,fr)),Ve(l(this,Es),l(this,vr)),Ve(l(this,Es),l(this,mr)),Xe(l(this,Es),l(this,or)),Xe(l(this,Es),l(this,hr)),Xe(l(this,Es),l(this,ur)),Ee(l(this,Es),l(this,cr)),Ee(l(this,Es),l(this,dr)),Ee(l(this,Es),l(this,pr)),o(this,Es,null),l(this,rr).key.parentElement&&l(this,rr).key.parentElement.removeChild(l(this,rr).key),l(this,rr).removeEventListener("mouseover",c(this,wr,jr)),l(this,rr).removeEventListener("mouseout",c(this,_r,Qr)),l(this,rr).parentElement&&l(this,rr).parentElement.removeChild(l(this,rr)),l(this,rr).width=0,l(this,rr).height=0,o(this,rr,null),w.OK}function Nr(e,t){return`rgba(${e>>16&255},${e>>8&255},${e>>0&255},${t})`}function Jr(e){return`#${`000000${e.toString(16)}`.slice(-6)}`}function jr(){return this.parentElement.appendChild(this.key),w.OK}function Qr(){return this.parentElement.removeChild(this.key),w.OK}function $r(e,t,i,s,r){var a,n=l(this,cr).attributes.aBars,h=0+t,d=h+i,p=d+s,f=p+r,v=1e3/e;(a=l(this,fr)).array.pointer=0,u(Vr,Vr,ta).call(Vr,a.array,bs,0,h,v),u(Vr,Vr,ta).call(Vr,a.array,xs,h,d,v),u(Vr,Vr,ta).call(Vr,a.array,gs,d,p,v),u(Vr,Vr,ta).call(Vr,a.array,As,p,f,v),u(Vr,Vr,ta).call(Vr,a.array,vs,f,v,v),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,a.buffer),l(this,Es).vertexAttribPointer(n,3,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(n),l(this,Es).bufferSubData(l(this,Es).ARRAY_BUFFER,0,a.array.subarray(0,a.array.pointer)),a=l(this,mr);var m=.95;o(this,Ys,t*(1-m)+l(this,Ys)*m),o(this,Cs,i*(1-m)+l(this,Cs)*m),o(this,Us,s*(1-m)+l(this,Us)*m),o(this,Bs,r*(1-m)+l(this,Bs)*m);var b=f=(p=(d=(h=0+l(this,Ys))+l(this,Cs))+l(this,Us))+l(this,Bs);return l(this,js)||c(this,Wr,qr).call(this,b,v),a.array.pointer=0,u(Vr,Vr,ta).call(Vr,a.array,bs,0,h,b),u(Vr,Vr,ta).call(Vr,a.array,xs,h,d,b),u(Vr,Vr,ta).call(Vr,a.array,gs,d,p,b),u(Vr,Vr,ta).call(Vr,a.array,As,p,f,b),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,a.buffer),l(this,Es).vertexAttribPointer(n,3,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(n),l(this,Es).bufferSubData(l(this,Es).ARRAY_BUFFER,0,a.array.subarray(0,a.array.pointer)),o(this,Vs,(l(this,Vs)+1)%_s),c(this,Er,sa).call(this),c(this,Xr,aa).call(this),c(this,Fr,na).call(this),w.OK}function qr(e){var t;return s().async((function(i){for(;;)switch(i.prev=i.next){case 0:o(this,js,!0),t=l(this,ar).toFixed(3),!l(this,Gs).videoFrameCallbackEnabled&&l(this,Ds)<120&&(l(this,Ls).processedAverage+=l(this,Ls).processed,t=l(this,Ls).processed,l(this,Ls).processedAverage=l(this,ar).toFixed(3)-l(this,Ls).processed),l(this,Ks)>10?(o(this,Os,!0),o(this,zs,!0)):l(this,Ks)>5?o(this,Os,!0):0!==l(this,Hs)&&l(this,Hs)-l(this,Ps)<.6*t?l(this,Ds)>179?(o(this,Os,!0),o(this,Ds,0)):o(this,Ds,l(this,Ds)+1):(o(this,Os,!1),o(this,zs,!1),o(this,Ds,0)),l(this,Ks)<=10&&!0===l(this,Os)&&(l(this,Hs)-l(this,Ps)<.8*t?l(this,Ns)>179?(o(this,zs,!0),o(this,Ns,0)):o(this,Ns,l(this,Ns)+1):(o(this,zs,!1),o(this,Ns,0))),o(this,Js,e/(1e3/t)),o(this,js,!1);case 7:case"end":return i.stop()}}),null,this,null,Promise)}function ea(e,t,i,s){var r=0+s,a=r+i,n=Math.max(e,t),h=l(this,vr).array;h.pointer=0,u(Vr,Vr,ta).call(Vr,h,Ts,0,r,n),u(Vr,Vr,ta).call(Vr,h,Rs,r,a,n),u(Vr,Vr,ta).call(Vr,h,vs,a,n,n);var d=l(this,cr).attributes.aBars;return h=l(this,vr).array,l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,l(this,vr).buffer),l(this,Es).vertexAttribPointer(d,3,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(d),l(this,Es).bufferSubData(l(this,Es).ARRAY_BUFFER,0,l(this,vr).array.subarray(0,h.pointer)),o(this,Zs,(l(this,Zs)+1)%Ss),c(this,kr,ra).call(this),w.OK}function ta(e,t,i,s,r){var a=i/r*ws,n=s/r*ws;return u(Vr,Vr,ia).call(Vr,e,a,0,n,1,t),w.OK}function ia(e,t,i,s,r,a){var n=e.pointer;return e[n+0]=t,e[n+1]=i,e[n+2]=a,e[n+3]=s,e[n+4]=i,e[n+5]=a,e[n+6]=t,e[n+7]=r,e[n+8]=a,e[n+9]=s,e[n+10]=r,e[n+11]=a,e[n+12]=t,e[n+13]=r,e[n+14]=a,e[n+15]=s,e[n+16]=i,e[n+17]=a,e.pointer=n+18,w.OK}function sa(){var e=l(this,cr);l(this,Es).useProgram(e.program),l(this,Es).viewport(0,0,ws,_s),l(this,Es).uniform2f(e.uniforms.dataTextureSize,ws,_s),l(this,Es).uniform1f(e.uniforms.offset,l(this,Vs));var t=e.attributes.aBars;return l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,l(this,fr).buffer),l(this,Es).vertexAttribPointer(t,3,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(t),l(this,Es).bindFramebuffer(l(this,Es).FRAMEBUFFER,l(this,or).framebuffer),l(this,Es).drawArrays(l(this,Es).TRIANGLES,0,l(this,fr).array.pointer/3),w.OK}function ra(){var e=l(this,cr);l(this,Es).useProgram(e.program),l(this,Es).viewport(0,0,ws,Ss),l(this,Es).uniform2f(e.uniforms.dataTextureSize,ws,Ss),l(this,Es).uniform1f(e.uniforms.offset,l(this,Zs));var t=e.attributes.aBars;return l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,l(this,vr).buffer),l(this,Es).vertexAttribPointer(t,3,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(t),l(this,Es).bindFramebuffer(l(this,Es).FRAMEBUFFER,l(this,hr).framebuffer),l(this,Es).drawArrays(l(this,Es).TRIANGLES,0,l(this,vr).array.pointer/3),w.OK}function aa(){var e=l(this,cr);l(this,Es).useProgram(e.program),l(this,Es).viewport(0,0,ws,1),l(this,Es).uniform2f(e.uniforms.dataTextureSize,ws,1),l(this,Es).uniform1f(e.uniforms.offset,0);var t=e.attributes.aBars;return l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,l(this,mr).buffer),l(this,Es).vertexAttribPointer(t,3,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(t),l(this,Es).bindFramebuffer(l(this,Es).FRAMEBUFFER,l(this,ur).framebuffer),l(this,Es).drawArrays(l(this,Es).TRIANGLES,0,l(this,mr).array.pointer/3),w.OK}function na(){return l(this,Es).bindFramebuffer(l(this,Es).FRAMEBUFFER,null),l(this,Es).clear(l(this,Es).COLOR_BUFFER_BIT),c(this,Lr,la).call(this),c(this,Ir,oa).call(this),c(this,Mr,ha).call(this),w.OK}function la(){var e=l(this,pr),t=l(this,rr).width-Ws;return l(this,Es).useProgram(e.program),l(this,Es).viewport(t,0,Ws,Ws),l(this,Es).activeTexture(l(this,Es).TEXTURE0),l(this,Es).bindTexture(l(this,Es).TEXTURE_2D,l(this,ur).texture),l(this,Es).uniform1i(e.uniforms.dataTexture,0),l(this,Es).uniform1f(e.uniforms.viewportSize,Ws),l(this,Es).uniform1f(e.uniforms.timeRatio,l(this,Js)),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,e.buffers.aPos),l(this,Es).vertexAttribPointer(e.attributes.aPos,2,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(e.attributes.aPos),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,e.buffers.aUV),l(this,Es).vertexAttribPointer(e.attributes.aUV,2,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(e.attributes.aUV),l(this,Es).drawArrays(l(this,Es).TRIANGLES,0,6),w.OK}function oa(){var e=l(this,dr),t=5*Ss+10,i=2*_s;return l(this,Es).useProgram(e.program),l(this,Es).viewport(t,0,i,Ws),l(this,Es).activeTexture(l(this,Es).TEXTURE0),l(this,Es).bindTexture(l(this,Es).TEXTURE_2D,l(this,or).texture),l(this,Es).uniform1i(e.uniforms.dataTexture,0),l(this,Es).uniform2f(e.uniforms.dataTextureSize,ws,_s),l(this,Es).uniform1f(e.uniforms.offset,l(this,Vs)),l(this,Es).uniform2f(e.uniforms.viewportSize,i,Ws),l(this,Es).uniform2f(e.uniforms.spacing,2,0),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,e.buffers.aPos),l(this,Es).vertexAttribPointer(e.attributes.aPos,2,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(e.attributes.aPos),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,e.buffers.aUV),l(this,Es).vertexAttribPointer(e.attributes.aUV,2,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(e.attributes.aUV),l(this,Es).drawArrays(l(this,Es).TRIANGLES,0,6),w.OK}function ha(){var e=l(this,dr),t=5*Ss;return l(this,Es).useProgram(e.program),l(this,Es).viewport(0,0,t,Ws),l(this,Es).activeTexture(l(this,Es).TEXTURE0),l(this,Es).bindTexture(l(this,Es).TEXTURE_2D,l(this,hr).texture),l(this,Es).uniform1i(e.uniforms.dataTexture,0),l(this,Es).uniform2f(e.uniforms.dataTextureSize,ws,Ss),l(this,Es).uniform1f(e.uniforms.offset,l(this,Zs)),l(this,Es).uniform2f(e.uniforms.viewportSize,t,Ws),l(this,Es).uniform2f(e.uniforms.spacing,4,1),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,e.buffers.aPos),l(this,Es).vertexAttribPointer(e.attributes.aPos,2,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(e.attributes.aPos),l(this,Es).bindBuffer(l(this,Es).ARRAY_BUFFER,e.buffers.aUV),l(this,Es).vertexAttribPointer(e.attributes.aUV,2,l(this,Es).FLOAT,!1,0,0),l(this,Es).enableVertexAttribArray(e.attributes.aUV),l(this,Es).drawArrays(l(this,Es).TRIANGLES,0,6),w.OK}var ua=Vr;const ca="https://d3mfda3gpj3dw1.cloudfront.net/svg/",da=`${ca}lcevc-logo-white.svg`,pa=`${ca}lcevc-toggle.svg`;let fa=!0;var va=class{#e;#t;#i;#s;#r;#a=!0;constructor(e,t){const i=document.createElement("style");let s;i.id="lcevc-styles",i.innerHTML='\n.toggleLCEVC-img {\n  width: 100px;\n  height: 20px;\n  margin: 6px;\n}\n\n.onoffswitch-checkbox {\n  display: none;\n}\n\n.onoffswitch-label {\n  position: absolute;\n  width: 64px;\n  height: 17px;\n  margin: 6px;\n  display: inline-block;\n  overflow: hidden;\n  cursor: pointer;\n  border: 2px solid #999999;\n  border-radius: 20px;\n}\n\n.dropdown-img {\n  position: absolute;\n  width: 60px;\n  height: 100px;\n  margin: 6px;\n  display: inline-block;\n  overflow: hidden;\n  bottom: 54px;\n}\n\n.onoffswitch-inner {\n  display: inline-block;\n  width: 200%;\n  margin-left: -100%;\n  -moz-transition: margin 0.3s ease-in 0s;\n  -webkit-transition: margin 0.3s ease-in 0s;\n  -o-transition: margin 0.3s ease-in 0s;\n  transition: margin 0.3s ease-in 0s;\n}\n\n.onoffswitch-inner:before, .onoffswitch-inner:after {\n  display: inline-block;\n  float: left;\n  width: 64px;\n  height: 21px;\n  padding: 0;\n  line-height: 21px;\n  font-size: 14px;\n  color: white;\n  font-family: Trebuchet, Arial, sans-serif;\n  font-weight: bold;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.onoffswitch-inner:before {\n  content: "ON";\n  padding-left: 5px;\n  margin-top: -2px;\n  background-color: #ffffff;\n  color: #000000;\n}\n\n.onoffswitch-inner:after {\n  content: "OFF";\n  padding-right: 5px;\n  margin-top: -2px;\n  background-color: #B3B3B3;\n  color: #000000;\n  text-align: right;\n}\n\n.onoffswitch-switch {\n  position: absolute;\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  background: #000000;\n  border: 2px solid #999999;\n  border-radius: 20px;\n  top: 3px;\n  bottom: 0;\n  right: 46px;\n  -moz-transition: all 0.3s ease-in 0s;\n  -webkit-transition: all 0.3s ease-in 0s;\n  -o-transition: all 0.3s ease-in 0s;\n  transition: all 0.3s ease-in 0s;\n}\n\n.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\n  margin-left: 0;\n}\n\n.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {\n  right: 4px;\n}\n',document.getElementsByTagName("head")[0].appendChild(i),this.#e=e,this.#t=document.createElement("img"),this.#t.className="toggleLCEVC-img",this.#t.src=pa,this.#t.crossOrigin="anonymous",this.#t.alt="LCEVC",t.appendChild(this.#t),this.#i=document.createElement("img"),fa&&(fa=!1,this.#i.className="dropdown-img",this.#i.dataset.decDropDownImg="",this.#i.src="https://dyctis843rxh5.cloudfront.net/v-nova/dropdown_white.gif",this.#i.alt="^",t.appendChild(this.#i)),window.lcevcToogleIDs?s=window.lcevcToogleIDs.slice(-1)[0]+1:(s=0,window.lcevcToogleIDs=[]),window.lcevcToogleIDs.push(s);const r=`myonoffswitch${s}`;this.#s=document.createElement("input"),this.#s.name="onoffswitch",this.#s.id=r,this.#s.type="checkbox",this.#s.className="onoffswitch-checkbox",this.#s.checked=!0,this.#s.onchange=this._onToggleLcevc.bind(this),t.appendChild(this.#s),this.#r=document.createElement("label"),this.#r.className="onoffswitch-label",this.#r.htmlFor=r,t.appendChild(this.#r);const a=document.createElement("span");a.className="onoffswitch-inner",this.#r.appendChild(a);const n=document.createElement("span");n.className="onoffswitch-switch",this.#r.appendChild(n)}_close(){for(fa=!0,this.#t.remove(),this.#s.remove();this.#r.hasChildNodes();)this.#r.lastChild?.remove();return this.#r.remove(),w.OK}get _offsetSize(){return this.#t.offsetWidth+12+this.#s.offsetWidth+this.#r.offsetWidth+12}get _isEnable(){return this.#a}_onToggleLcevc(){return this.#a=!this.#a,this.#e.setConfigOption("shaderPath",0!==this.#e.getConfigOption("shaderPath")?0:1),this.#i.style.display="none",this.#e._enableLcevc(this.#a),this.#e.video.dispatchEvent(new Event("render")),w.OK}},ma=new WeakMap,ba=new WeakMap,xa=new WeakMap,ga=new WeakMap,Aa=new WeakMap,Ta=new WeakMap,Ra=new WeakMap;var ya=class{get regionCount(){return l(this,ba)}constructor(e){return p(this,ma,{writable:!0,value:50}),p(this,ba,{writable:!0,value:0}),p(this,xa,{writable:!0,value:0}),p(this,ga,{writable:!0,value:0}),p(this,Aa,{writable:!0,value:null}),p(this,Ta,{writable:!0,value:null}),p(this,Ra,{writable:!0,value:!1}),o(this,Aa,e.createBuffer()),o(this,Ta,new Float32Array(6*l(this,ma)*2)),e.bindBuffer(e.ARRAY_BUFFER,l(this,Aa)),e.bufferData(e.ARRAY_BUFFER,l(this,Ta),e.DYNAMIC_DRAW),w.OK}_close(e){return e.deleteBuffer(l(this,Aa)),o(this,Ta,null),w.OK}_update(e){if(e.length>0){o(this,xa,e.start(0)),o(this,ga,e.end(0));for(var t=e.length,i=Math.max(0,t-l(this,ma)),s=l(this,Ta),r=i;r<t;r+=1){var a=e.start(r),n=e.end(r);o(this,xa,Math.min(a,l(this,xa))),o(this,ga,Math.max(n,l(this,ga)));var h=6*r*2;s[h+0]=0,s[h+1]=a,s[h+2]=1,s[h+3]=n,s[h+4]=2,s[h+5]=a,s[h+6]=3,s[h+7]=n,s[h+8]=2,s[h+9]=a,s[h+10]=1,s[h+11]=n}o(this,ba,t-i)}else o(this,ba,0);return o(this,Ra,!0),w.OK}_updateFrom(e){o(this,xa,0),o(this,ga,e);var t=l(this,Ta);return t[0]=0,t[1]=l(this,xa),t[2]=1,t[3]=l(this,ga),t[4]=2,t[5]=l(this,xa),t[6]=3,t[7]=l(this,ga),t[8]=2,t[9]=l(this,xa),t[10]=1,t[11]=l(this,ga),o(this,ba,1),o(this,Ra,!0),w.OK}_bindBuffer(e,t){return e.bindBuffer(e.ARRAY_BUFFER,l(this,Aa)),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t),l(this,Ra)&&(e.bufferSubData(e.ARRAY_BUFFER,0,l(this,Ta).subarray(0,12*l(this,ba))),o(this,Ra,!1)),w.OK}},wa=32*window.devicePixelRatio,_a=new WeakMap,Sa=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,Ea=new WeakMap,ka=new WeakMap,Xa=new WeakMap,Fa=new WeakMap,La=new WeakMap,Ia=new WeakMap,Ma=new WeakMap,Va=new WeakMap,Za=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,Ca=new WeakMap,Ua=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Pa=new WeakMap,Oa=new WeakMap,za=new WeakMap,Da=new WeakMap,Na=new WeakMap,Ja=new WeakMap,ja=new WeakMap,Qa=new WeakMap,$a=new WeakMap,qa=new WeakMap,en=new WeakMap,tn=new WeakMap,sn=new WeakMap,rn=new WeakMap,an=new WeakMap,nn=new WeakMap,ln=new WeakMap,on=new WeakMap,hn=new WeakMap,un=new WeakMap,cn=new WeakMap,dn=new WeakMap,pn=new WeakMap,fn=new WeakMap,vn=new WeakSet,mn=new WeakSet,bn=new WeakSet,xn=new WeakSet,gn=new WeakSet,An=new WeakSet,Tn=new WeakSet,Rn=new WeakSet,yn=new WeakSet,wn=new WeakSet,_n=new WeakSet,Sn=new WeakSet,Wn=new WeakSet,Gn=new WeakSet,En=new WeakSet,kn=new WeakSet,Xn=new WeakSet;class Fn{constructor(e,t){if(f(this,Xn),f(this,kn),f(this,En),f(this,Gn),f(this,Wn),f(this,Sn),f(this,_n),f(this,wn),f(this,yn),f(this,Rn),f(this,Tn),f(this,An),f(this,gn),f(this,xn),f(this,bn),f(this,mn),f(this,vn),p(this,_a,{writable:!0,value:null}),p(this,Sa,{writable:!0,value:null}),p(this,Wa,{writable:!0,value:!1}),p(this,Ga,{writable:!0,value:null}),p(this,Ea,{writable:!0,value:null}),p(this,ka,{writable:!0,value:null}),p(this,Xa,{writable:!0,value:null}),p(this,Fa,{writable:!0,value:null}),p(this,La,{writable:!0,value:null}),p(this,Ia,{writable:!0,value:null}),p(this,Ma,{writable:!0,value:null}),p(this,Va,{writable:!0,value:0}),p(this,Za,{writable:!0,value:null}),p(this,Ka,{writable:!0,value:null}),p(this,Ya,{writable:!0,value:null}),p(this,Ca,{writable:!0,value:null}),p(this,Ua,{writable:!0,value:null}),p(this,Ba,{writable:!0,value:null}),p(this,Ha,{writable:!0,value:null}),p(this,Pa,{writable:!0,value:null}),p(this,Oa,{writable:!0,value:null}),p(this,za,{writable:!0,value:null}),p(this,Da,{writable:!0,value:null}),p(this,Na,{writable:!0,value:null}),p(this,Ja,{writable:!0,value:null}),p(this,ja,{writable:!0,value:null}),p(this,Qa,{writable:!0,value:null}),p(this,$a,{writable:!0,value:0}),p(this,qa,{writable:!0,value:0}),p(this,en,{writable:!0,value:0}),p(this,tn,{writable:!0,value:0}),p(this,sn,{writable:!0,value:0}),p(this,rn,{writable:!0,value:-1}),p(this,an,{writable:!0,value:-1}),p(this,nn,{writable:!0,value:-1}),p(this,ln,{writable:!0,value:!1}),p(this,on,{writable:!0,value:null}),p(this,hn,{writable:!0,value:null}),p(this,un,{writable:!0,value:null}),p(this,cn,{writable:!0,value:"0"}),p(this,dn,{writable:!0,value:null}),p(this,pn,{writable:!0,value:!1}),p(this,fn,{writable:!0,value:null}),o(this,_a,e),o(this,Sa,t),o(this,Wa,l(this,Sa)&&!!l(this,Sa).enabled),l(this,Wa)){c(this,vn,Ln).call(this,l(this,Sa).controlsID),o(this,on,l(this,Sa).fullscreenElement||l(this,Ga).parentElement),o(this,hn,c(this,Tn,Yn).bind(this)),l(this,Ha).addEventListener("mousemove",l(this,hn)),l(this,Ha).addEventListener("mousedown",l(this,hn)),l(this,Ha).addEventListener("mouseout",l(this,hn)),l(this,Ha).addEventListener("touchstart",l(this,hn)),l(this,Ha).addEventListener("touchend",l(this,hn)),o(this,un,c(this,Rn,Cn).bind(this)),window.addEventListener("resize",l(this,un)),o(this,fn,c(this,Gn,zn).bind(this)),-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")?window.addEventListener("webkitfullscreenchange",l(this,fn),!1):window.addEventListener("fullscreenchange",l(this,fn),!1);var i=Ge(l(this,Pa),we.controls_vert,we.controls_frag,["aPos","aUV","aState"],["textureIcons","canvasSize"]);i.buffers={},i.buffers.pos=l(this,Pa).createBuffer(),i.buffers.posArray=new Float32Array(120),i.buffers.uv=l(this,Pa).createBuffer(),i.buffers.uvArray=new Float32Array(120),i.buffers.state=l(this,Pa).createBuffer(),i.buffers.stateArray=new Float32Array(120),o(this,Oa,i),o(this,za,Ge(l(this,Pa),we.scrub_vert,we.scrub_frag,["aChunks"],["canvasSize","scrubArea","timeRange","color"])),o(this,Ja,new ya(l(this,Pa))),l(this,Ja).color=l(this,Sa).colorPlayed,o(this,ja,new ya(l(this,Pa))),l(this,ja).color=l(this,Sa).colorBuffered,o(this,Qa,new ya(l(this,Pa))),l(this,Qa).color=l(this,Sa).colorUnplayed,o(this,Da,Fe(l(this,Pa))),l(this,Pa).bindTexture(l(this,Pa).TEXTURE_2D,l(this,Da)),l(this,Pa).texImage2D(l(this,Pa).TEXTURE_2D,0,l(this,Pa).RGBA,l(this,Pa).RGBA,l(this,Pa).UNSIGNED_BYTE,l(this,Na)),this._update()}}get _isFullscreen(){return l(this,ln)}get _isLive(){return l(this,dn)}_close(){if(!l(this,Wa))return w.FAIL;l(this,Sa).playButton&&l(this,Za).remove(),l(this,Sa).seekButton&&(l(this,Ya).remove(),l(this,Ka).remove()),l(this,Sa).volumeButton&&l(this,Ca).remove(),l(this,Sa).toggleButton&&l(this,Ua)._close(),l(this,Sa).fullscreenButton&&l(this,Ba).remove();var e=l(this,Ha);return e.removeEventListener("mousemove",l(this,hn)),e.removeEventListener("mousedown",l(this,hn)),e.removeEventListener("mouseout",l(this,hn)),e.removeEventListener("touchstart",l(this,hn)),e.removeEventListener("touchend",l(this,hn)),e.parentElement.removeChild(e),window.removeEventListener("resize",l(this,un)),o(this,Ha,null),o(this,Na,null),Ee(l(this,Pa),l(this,Oa)),l(this,Pa).deleteBuffer(l(this,Oa).buffers.pos),l(this,Pa).deleteBuffer(l(this,Oa).buffers.uv),l(this,Pa).deleteBuffer(l(this,Oa).buffers.state),Ee(l(this,Pa),l(this,za)),Le(l(this,Pa),l(this,Da)),o(this,Oa,null),o(this,za,null),o(this,Da,null),l(this,ja)._close(l(this,Pa)),l(this,Ja)._close(l(this,Pa)),l(this,Qa)._close(l(this,Pa)),o(this,ja,null),o(this,Ja,null),o(this,Qa,null),o(this,Pa,null),o(this,hn,null),o(this,un,null),w.OK}_update(){return l(this,Wa)?(c(this,yn,Un).call(this),c(this,wn,Bn).call(this),c(this,_n,Hn).call(this),c(this,Sn,Pn).call(this),w.OK):w.FAIL}_refreshIcons(e){return l(this,Wa)?(l(this,Za).src=l(this,e?ka:Ea),w.OK):w.OK}_checkIsLive(e){return o(this,dn,e>1),w.OK}get _isLcevcToggleEnable(){return l(this,Ua)._isEnable}static newCanvas(e,t){var i=document.createElement("canvas");return i.ctx=i.getContext("2d"),i.width=e,i.height=t,i}}function Ln(e){o(this,Ga,document.getElementById(e)),l(this,Ga).style="\n    height: 32px;\n    background-color: #000000;";var t="\n    width: 32px;\n    height: 32px;\n    bottom: 0;\n    position: relative;\n    cursor: pointer";c(this,mn,In).call(this),l(this,Sa).playButton&&(o(this,Za,document.createElement("img")),l(this,Za).id="play-button",l(this,Za).src=l(this,Ea),l(this,Za).style=t,l(this,Za).onclick=c(this,bn,Mn).bind(this),l(this,Ga).appendChild(l(this,Za)),o(this,Va,l(this,Va)+1)),l(this,Sa).seekButton&&(o(this,Ya,document.createElement("img")),l(this,Ya).id="rewind-button",l(this,Ya).src=l(this,Fa),l(this,Ya).style=t,l(this,Ya).onclick=c(this,xn,Vn).bind(this),l(this,Ga).appendChild(l(this,Ya)),o(this,Va,l(this,Va)+1),o(this,Ka,document.createElement("img")),l(this,Ka).id="forward-button",l(this,Ka).src=l(this,Xa),l(this,Ka).style=t,l(this,Ka).onclick=c(this,gn,Zn).bind(this),l(this,Ga).appendChild(l(this,Ka)),o(this,Va,l(this,Va)+1)),l(this,Sa).volumeButton&&(o(this,Ca,document.createElement("img")),l(this,Ca).id="volume-button",l(this,Ca).src=l(this,La),l(this,Ca).style=t,l(this,Ca).onclick=c(this,An,Kn).bind(this),l(this,Ga).appendChild(l(this,Ca)),o(this,Va,l(this,Va)+1)),l(this,Sa).fullscreenButton&&(o(this,Ba,document.createElement("img")),l(this,Ba).id="fullscreen-button",l(this,Ba).src=l(this,Ma),l(this,Ba).style=t,l(this,Ba).onclick=c(this,En,Dn).bind(this)),"left"===l(this,Sa).fullscreenButtonPos&&(l(this,Ga).appendChild(l(this,Ba)),o(this,Va,l(this,Va)+1));var i=document.createElement("canvas");return i.style.position="relative",i.style.height="32px",o(this,Ha,i),o(this,Pa,i.getContext("webgl")),l(this,Sa).toggleButton&&"left"===l(this,Sa).toggleButtonPos&&(o(this,Ua,new va(l(this,_a),l(this,Ga))),i.style.position="absolute",i.style.right="left"===l(this,Sa).fullscreenButtonPos?"0":`${wa}`),l(this,Ga).appendChild(i),l(this,Sa).toggleButton&&"left"!==l(this,Sa).toggleButtonPos&&o(this,Ua,new va(l(this,_a),l(this,Ga))),"left"!==l(this,Sa).fullscreenButtonPos&&(l(this,Ba).style.position="absolute",l(this,Ba).style.bottom=null,l(this,Ba).style.right="0",l(this,Ga).appendChild(l(this,Ba)),o(this,Va,l(this,Va)+1)),c(this,yn,Un).call(this),w.OK}function In(){var e=wa;o(this,Na,Fn.newCanvas(2*e,e));var t=Fn.newCanvas(3*e,e-2),i=t.ctx;i.fillStyle="#fff";var s=.5*e|0;i.font=`${s}px Arial`,i.fillText("Live",e,.7*e),i.beginPath(),i.fillStyle="#f33",i.arc(.6*e,.5*e,.12*e,0,6.283185307179586),i.fill(),l(this,Na).ctx.drawImage(t,1,1);var r=Fn.newCanvas(62,62);((i=r.ctx).fillStyle="#fff",i.beginPath(),i.moveTo(20,13),i.lineTo(20,49),i.lineTo(45,31),i.fill(),o(this,Ea,r.toDataURL()),(i=(r=Fn.newCanvas(62,62)).ctx).fillStyle="#fff",i.fillRect(17,16,10,30),i.fillRect(35,16,10,30),o(this,ka,r.toDataURL()),l(this,Sa).seekButton)&&((i=(r=Fn.newCanvas(62,62)).ctx).fillStyle="#fff",i.beginPath(),i.moveTo(30,18),i.lineTo(30,44),i.lineTo(16,31),i.moveTo(44,18),i.lineTo(44,44),i.lineTo(30,31),i.fill(),o(this,Fa,r.toDataURL()),(i=(r=Fn.newCanvas(62,62)).ctx).fillStyle="#fff",i.beginPath(),i.moveTo(18,18),i.lineTo(18,44),i.lineTo(32,31),i.moveTo(32,18),i.lineTo(32,44),i.lineTo(46,31),i.fill(),o(this,Xa,r.toDataURL()));(i=(r=Fn.newCanvas(62,62)).ctx).fillStyle="#fff",i.beginPath(),i.moveTo(12,25),i.lineTo(12,37),i.lineTo(22,37),i.lineTo(31,46),i.lineTo(31,16),i.lineTo(22,25),i.fill(),i.strokeStyle="#fff",i.lineWidth=3,i.beginPath(),i.arc(24,31,18,.6,-.6,!0),i.stroke(),i.beginPath(),i.arc(20,31,32,.65,-.65,!0),i.stroke(),o(this,La,r.toDataURL()),(i=(r=Fn.newCanvas(62,62)).ctx).fillStyle="#fff",i.beginPath(),i.moveTo(12,25),i.lineTo(12,37),i.lineTo(22,37),i.lineTo(31,46),i.lineTo(31,16),i.lineTo(22,25),i.fill(),i.strokeStyle="#fff",i.lineWidth=3,i.moveTo(40,25),i.lineTo(52,37),i.moveTo(52,25),i.lineTo(40,37),i.stroke(),o(this,Ia,r.toDataURL());return(i=(r=Fn.newCanvas(62,62)).ctx).strokeStyle="#fff",i.lineWidth=4,i.moveTo(24,16),i.lineTo(16,16),i.lineTo(16,24),i.moveTo(38,16),i.lineTo(46,16),i.lineTo(46,24),i.moveTo(24,46),i.lineTo(16,46),i.lineTo(16,38),i.moveTo(38,46),i.lineTo(46,46),i.lineTo(46,38),i.stroke(),o(this,Ma,r.toDataURL()),w.OK}function Mn(){var e=l(this,_a).video;e.paused?(e.play(),l(this,Za).src=l(this,ka)):(e.pause(),l(this,Za).src=l(this,Ea))}function Vn(){l(this,_a).video.currentTime-=10}function Zn(){l(this,_a).video.currentTime+=10}function Kn(){var e=l(this,_a).video;e.muted=!e.muted,e.muted?l(this,Ca).src=l(this,Ia):l(this,Ca).src=l(this,La)}function Yn(e){var t=!1;switch(e.type){case"mousemove":o(this,rn,e.offsetX),o(this,an,e.offsetY);break;case"mousedown":o(this,rn,e.offsetX),o(this,an,e.offsetY),t=!0;break;case"mouseout":case"touchend":o(this,rn,-1),o(this,an,-1);break;case"touchstart":o(this,rn,e.touches[0].offsetX),o(this,an,e.touches[0].offsetY),t=!0}if(t){var i=l(this,_a).video;if(l(this,dn))i.currentTime-=10;else{var s=l(this,Ha).width;if(l(this,rn)>0&&l(this,rn)<s){var r=.25*wa,a=(l(this,rn)-0-r)/(s-0-r-r),n=Math.min(Math.max(a,0),1)*(l(this,tn)-l(this,en))+l(this,en);i.currentTime=n}}}return c(this,Sn,Pn).call(this),w.OK}function Cn(){return this._update(),w.OK}function Un(){var e=0;l(this,Sa).toggleButton&&(e=l(this,Ua)._offsetSize);var t=l(this,Za).offsetWidth*l(this,Va)+e,i=l(this,Ga).offsetWidth-t,s=wa;return l(this,Ha).width=i,l(this,Ha).height=s,l(this,Ha).style.width=`${i}px`,l(this,Pa).viewport(0,0,l(this,Ha).width,l(this,Ha).height),w.OK}function Bn(){var e=l(this,Oa);return o(this,nn,-1),l(this,dn)&&c(this,Wn,On).call(this,0,0,0,0,3),l(this,Pa).bindBuffer(l(this,Pa).ARRAY_BUFFER,e.buffers.pos),l(this,Pa).vertexAttribPointer(e.attributes.aPos,2,l(this,Pa).FLOAT,!1,0,0),l(this,Pa).enableVertexAttribArray(e.attributes.aPos),l(this,Pa).bufferData(l(this,Pa).ARRAY_BUFFER,e.buffers.posArray,l(this,Pa).STATIC_DRAW),l(this,Pa).bindBuffer(l(this,Pa).ARRAY_BUFFER,e.buffers.uv),l(this,Pa).vertexAttribPointer(e.attributes.aUV,2,l(this,Pa).FLOAT,!1,0,0),l(this,Pa).enableVertexAttribArray(e.attributes.aUV),l(this,Pa).bufferData(l(this,Pa).ARRAY_BUFFER,e.buffers.uvArray,l(this,Pa).STATIC_DRAW),l(this,Pa).bindBuffer(l(this,Pa).ARRAY_BUFFER,e.buffers.state),l(this,Pa).vertexAttribPointer(e.attributes.aState,2,l(this,Pa).FLOAT,!1,0,0),l(this,Pa).enableVertexAttribArray(e.attributes.aState),l(this,Pa).bufferData(l(this,Pa).ARRAY_BUFFER,e.buffers.stateArray,l(this,Pa).STATIC_DRAW),w.OK}function Hn(){var e=l(this,_a).video;o(this,sn,e.currentTime),l(this,Ja)._updateFrom(e.currentTime),l(this,ja)._update(e.buffered),l(this,Qa)._updateFrom(e.duration);var t=Math.min(l(this,Ja).time0,l(this,Qa).time0),i=Math.max(l(this,Ja).time1,l(this,Qa).time1);return o(this,$a,t),o(this,qa,i),l(this,dn)?(o(this,en,0),o(this,tn,0)):(o(this,en,0),o(this,tn,e.duration||1)),o(this,en,Math.min(l(this,en),l(this,sn))),o(this,tn,Math.max(l(this,tn),l(this,sn))),w.OK}function Pn(){var e,t;l(this,Pa).clearColor(0,0,0,1),l(this,Pa).clear(l(this,Pa).DEPTH_BUFFER_BIT|l(this,Pa).COLOR_BUFFER_BIT),l(this,Pa).enable(l(this,Pa).BLEND),l(this,Pa).blendFuncSeparate(l(this,Pa).SRC_ALPHA,l(this,Pa).ONE_MINUS_SRC_ALPHA,l(this,Pa).ONE,l(this,Pa).ONE_MINUS_SRC_ALPHA),e=l(this,Oa),t=e.uniforms,l(this,Pa).useProgram(e.program),l(this,Pa).viewport(0,0,l(this,Ha).width,l(this,Ha).height),l(this,Pa).activeTexture(l(this,Pa).TEXTURE0),l(this,Pa).bindTexture(l(this,Pa).TEXTURE_2D,l(this,Da)),l(this,Pa).uniform1i(t.textureIcons,0),l(this,Pa).uniform2f(t.canvasSize,l(this,Ha).width,l(this,Ha).height),l(this,Pa).bindBuffer(l(this,Pa).ARRAY_BUFFER,e.buffers.pos),l(this,Pa).vertexAttribPointer(e.attributes.aPos,2,l(this,Pa).FLOAT,!1,0,0),l(this,Pa).enableVertexAttribArray(e.attributes.aPos),l(this,Pa).bindBuffer(l(this,Pa).ARRAY_BUFFER,e.buffers.uv),l(this,Pa).vertexAttribPointer(e.attributes.aUV,2,l(this,Pa).FLOAT,!1,0,0),l(this,Pa).enableVertexAttribArray(e.attributes.aUV),l(this,Pa).bindBuffer(l(this,Pa).ARRAY_BUFFER,e.buffers.state),l(this,Pa).vertexAttribPointer(e.attributes.aState,2,l(this,Pa).FLOAT,!1,0,0),l(this,Pa).enableVertexAttribArray(e.attributes.aState);var i=l(this,dn)?1:0;if(l(this,Pa).drawArrays(l(this,Pa).TRIANGLES,0,6*i),!l(this,dn)){e=l(this,za),t=e.uniforms,l(this,Pa).useProgram(e.program),l(this,Pa).viewport(0,0,l(this,Ha).width,l(this,Ha).height);var s=.25*wa,r=s/2,a=s,n=s+r,o=l(this,Ha).width-s,h=wa-s-r;l(this,Pa).uniform2f(t.canvasSize,l(this,Ha).width,l(this,Ha).height),l(this,Pa).uniform4f(t.scrubArea,a,n,o,h),l(this,Pa).uniform2f(t.timeRange,l(this,en),l(this,tn)),[l(this,Qa),l(this,ja),l(this,Ja)].forEach((i=>{i.regionCount>0&&(l(this,Pa).uniform1f(t.color,i.color),i._bindBuffer(l(this,Pa),e.attributes.aChunks),l(this,Pa).drawArrays(l(this,Pa).TRIANGLES,0,6*i.regionCount))}));var u=.25*wa,c=u,d=u,p=l(this,Ha).width-u,f=wa-u,v=(l(this,sn)-l(this,en))/(l(this,tn)-l(this,en)),m=Math.min(Math.max(v,0),1)*(p-c)+c;l(this,Pa).enable(l(this,Pa).SCISSOR_TEST),l(this,Pa).scissor(m-1,d,2,f-d),l(this,Pa).clearColor(1,1,1,1),l(this,Pa).clear(l(this,Pa).COLOR_BUFFER_BIT),l(this,Pa).disable(l(this,Pa).SCISSOR_TEST)}return l(this,Pa).bindFramebuffer(l(this,Pa).FRAMEBUFFER,null),l(this,Pa).bindTexture(l(this,Pa).TEXTURE_2D,null),l(this,Pa).disable(l(this,Pa).BLEND),w.OK}function On(e,t,i,s,r){var a=l(this,Oa),n=a.buffers.posArray,h=a.buffers.uvArray,u=a.buffers.stateArray,c=6*e,d=2*c,p=2*c,f=2*c,v=wa,m=i,b=i+v*r-1,x=s,g=s+v-1;n[d+0]=m,n[d+1]=x,n[d+2]=b,n[d+3]=x,n[d+4]=m,n[d+5]=g,n[d+6]=b,n[d+7]=g,n[d+8]=m,n[d+9]=g,n[d+10]=b,n[d+11]=x;var A=t*v/l(this,Na).width,T=A+(v*r-1)/l(this,Na).width,R=0+(v-1)/l(this,Na).height;h[p+0]=A,h[p+1]=0,h[p+2]=T,h[p+3]=0,h[p+4]=A,h[p+5]=R,h[p+6]=T,h[p+7]=R,h[p+8]=A,h[p+9]=R,h[p+10]=T,h[p+11]=0;var y=l(this,rn)>=m&&l(this,rn)<=b&&l(this,an)>=x&&l(this,an)<=g;y&&o(this,nn,e);var w=y?1:0;return u[f+0]=0,u[f+1]=w,u[f+2]=1,u[f+3]=w,u[f+4]=2,u[f+5]=w,u[f+6]=3,u[f+7]=w,u[f+8]=2,u[f+9]=w,u[f+10]=1,u[f+11]=w,w}function zn(){if(l(this,pn))o(this,pn,!1);else{var e=l(this,Ha),t=l(this,on)||e.parentElement;c(this,Xn,Jn).call(this,t);var i=new Event("resize",{bubbles:!0,cancelable:!0});i.eventName="resize",window.dispatchEvent(i)}return w.OK}function Dn(){var e=l(this,on)||l(this,Ha).parentElement;return l(this,ln)?c(this,Xn,Jn).call(this,e):c(this,kn,Nn).call(this,e),w.OK}function Nn(e){return o(this,ln,!0),o(this,pn,!0),o(this,cn,e.style.padding),e.style.padding="0",e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),l(this,_a).onFullscreen(!0),w.OK}function Jn(e){if(!l(this,ln))return w.FAIL;o(this,pn,!0),e.style.padding=`${l(this,cn)}px`;try{document.exitFullscreen&&null!==document.fullscreenElement?document.exitFullscreen():document.mozCancelFullScreen||(document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}catch(t){J.info(t)}return o(this,ln,!1),l(this,_a).onFullscreen(!1),w.OK}var jn=Fn,Qn=new WeakMap,$n=new WeakMap,qn=new WeakMap,el=new WeakMap,tl=new WeakSet;function il(){document[l(this,Qn)]&&l(this,el).call(this)}var sl=class{constructor(e){f(this,tl),p(this,Qn,{writable:!0,value:null}),p(this,$n,{writable:!0,value:""}),p(this,qn,{writable:!0,value:null}),p(this,el,{writable:!0,value:null}),o(this,el,e),void 0!==document.hidden?(o(this,Qn,"hidden"),o(this,$n,"visibilitychange")):void 0!==document.msHidden?(o(this,Qn,"msHidden"),o(this,$n,"msvisibilitychange")):void 0!==document.webkitHidden&&(o(this,Qn,"webkitHidden"),o(this,$n,"webkitvisibilitychange")),void 0===document.addEventListener&&l(this,Qn)||(o(this,qn,c(this,tl,il).bind(this)),document.addEventListener(l(this,$n),c(this,tl,il).bind(this),!1))}_close(){document.removeEventListener(l(this,$n),l(this,qn))}};const rl={debugStats:!1,renderAtDisplaySize:!0,shaderPath:1,logLevel:0,dps:!0,dynamicPerformanceScaling:!0,iOSFallback:!1,logo:!0,drawLogo:!0,loop:!1,poster:!0,ebmlVersion:"3.0.0",mp4boxVersion:"0.5.2",ebmlLoadOnStartup:!1,mp4boxLoadOnStartup:!0,playerControls:{controlsID:"player-controls",enabled:!1,playButton:!0,seekButton:!1,volumeButton:!1,fullscreenButton:!0,fullscreenButtonPos:"left",toggleButton:!1,toggleButtonPos:"right",position:"bottom",offsetY:24,offsetX:0,colorPlayed:6192829,colorBuffered:11382189,colorUnplayed:6184542,fullscreenElement:null}};var al=300,nl=2,ll=100,ol=new WeakMap,hl=new WeakMap,ul=new WeakMap,cl=new WeakMap,dl=new WeakMap,pl=new WeakMap,fl=new WeakMap,vl=new WeakMap,ml=new WeakMap,bl=new WeakMap,xl=new WeakMap,gl=new WeakMap,Al=new WeakMap,Tl=new WeakMap,Rl=new WeakMap,yl=new WeakMap,wl=new WeakMap,_l=new WeakMap,Sl=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,El=new WeakMap,kl=new WeakMap,Xl=new WeakMap,Fl=new WeakMap,Ll=new WeakMap,Il=new WeakMap,Ml=new WeakMap,Vl=new WeakMap,Zl=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,Cl=new WeakMap,Ul=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,Pl=new WeakMap,Ol=new WeakMap,zl=new WeakMap,Dl=new WeakMap,Nl=new WeakMap,Jl=new WeakMap,jl=new WeakMap,Ql=new WeakMap,$l=new WeakMap,ql=new WeakMap,eo=new WeakMap,to=new WeakMap,io=new WeakMap,so=new WeakMap,ro=new WeakMap,ao=new WeakMap,no=new WeakMap,lo=new WeakMap,oo=new WeakMap,ho=new WeakMap,uo=new WeakMap,co=new WeakMap,po=new WeakMap,fo=new WeakMap,vo=new WeakMap,mo=new WeakMap,bo=new WeakMap,xo=new WeakMap,go=new WeakSet,Ao=new WeakSet,To=new WeakSet,Ro=new WeakSet,yo=new WeakSet,wo=new WeakSet,_o=new WeakSet,So=new WeakSet,Wo=new WeakSet,Go=new WeakSet,Eo=new WeakSet,ko=new WeakSet,Xo=new WeakSet,Fo=new WeakSet,Lo=new WeakSet,Io=new WeakSet,Mo=new WeakMap,Vo=new WeakSet,Zo=new WeakSet,Ko=new WeakSet,Yo=new WeakSet,Co=new WeakSet,Uo=new WeakSet,Bo=new WeakSet,Ho=new WeakSet,Po=new WeakSet,Oo=new WeakSet,zo=new WeakSet,Do=new WeakSet,No=new WeakSet,Jo=new WeakSet;function jo(){var e=l(this,ul).parentElement;o(this,lo,new Image),l(this,lo).src=da,l(this,lo).crossOrigin="anonymous",l(this,lo).style.zIndex="100",l(this,lo).style.position="absolute",l(this,lo).style.width="15%",l(this,lo).style.margin="10px 10px",l(this,lo).hidden=!0,e.prepend(l(this,lo))}function Qo(){var e=Zt.detectBrowser();return l(this,Rl).browser=e,e===K.FIREFOX||e===K.SAFARI&&o(this,yl,!0),w.OK}function $o(e,t){var i=t;if(e||i||(o(this,Ol,!1),o(this,zl,!1)),l(this,zl)){0===i.mediaTime&&(i.mediaTime=l(this,ol).currentTime);var s=null;if(l(this,ol).frameMetadata){var r=l(this,ol).frameMetadata.mediaTime;s=1/(i.mediaTime-r),l(this,Jl)._recentFrameRate?o(this,Wl,l(this,Jl)._recentFrameRate):o(this,Wl,s)}var a=i;a.frameRate=s,a.now=e,l(this,ol).frameMetadata=a,l(this,vo)||l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),a,l(this,bl)),o(this,Dl,l(this,ol).requestVideoFrameCallback(c(this,To,$o).bind(this)))}else l(this,ol).cancelVideoFrameCallback(l(this,Dl))}function qo(){return window.cancelAnimationFrame(l(this,ql)),l(this,Ol)&&!l(this,zl)&&(o(this,zl,!0),o(this,Dl,l(this,ol).requestVideoFrameCallback(c(this,To,$o).bind(this)))),o(this,ql,window.requestAnimationFrame(c(this,yo,eh).bind(this))),w.OK}function eh(){var e=l(this,ol);if(window.cancelAnimationFrame(l(this,ql)),l(this,Jl)){if(l(this,zl)||l(this,hl)!==e.currentTime&&(l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),e,null,l(this,bl)),l(this,Jl)._recentFrameRate&&o(this,Wl,l(this,Jl)._recentFrameRate)),l(this,Kl))if(l(this,Jl)._updateQueue(l(this,Nl),l(this,ol),l(this,jl)),l(this,Jl)._isQueueRendered)o(this,co,l(this,Jl)._displayFrame?l(this,Jl)._displayFrame:l(this,co));else{var t=l(this,Jl)._presentFrame(l(this,bl),l(this,Ql),l(this,ul),l(this,Nl),l(this,pl).renderAtDisplaySize,l(this,pl).renderAtPixelRatio,l(this,ul).parentElement);o(this,_l,t===_.APPLIED),l(this,pl).logo&&this._toggleLogo(t===_.APPLIED),t===_.ERROR&&l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),e,e.frameMetadata,l(this,bl))}l(this,$l)._update(),l(this,Nl)._update(),this.isPerformanceScalingEnabled&&c(this,Ko,fh).call(this),o(this,hl,e.currentTime),l(this,zl)||0===l(this,Jl)._recentFrameRate?o(this,ql,window.requestAnimationFrame(c(this,yo,eh).bind(this))):o(this,ql,setTimeout(c(this,yo,eh).bind(this),100/l(this,Jl)._recentFrameRate))}else window.clearTimeout(l(this,ql));c(this,Io,ch).call(this)}function th(){return window.cancelAnimationFrame(l(this,ql)),w.OK}function ih(){if(c(this,So,sh).call(this)===w.OK){if(null===l(this,Al))try{o(this,Al,l(this,gl).createMediaElementSource(this.video))}catch(e){}o(this,Tl,l(this,gl).createGain()),l(this,Tl).connect(l(this,gl).destination),this.audioNodeDelay=l(this,gl).createDelay(10),this.audioNodeDelay.connect(l(this,Tl)),this.audioNodeDelay.delayTime.value=l(this,Jl)._getAudioDelay;try{l(this,Al).connect(this.audioNodeDelay)}catch(e){}}return w.OK}function sh(){if(null==l(this,gl))if(window.AudioContext)o(this,gl,new AudioContext);else{if(!window.webkitAudioContext)return w.ERROR;o(this,gl,new window.webkitAudioContext)}return w.OK}function rh(e){if(null===l(this,Jl))return w.OK;var t=l(this,Jl)._presentFrame(l(this,bl),l(this,Ql),l(this,ul),l(this,Nl),l(this,pl).renderAtDisplaySize,l(this,pl).renderAtPixelRatio,l(this,ul).parentElement,e);return l(this,pl).logo&&this._toggleLogo(t===_.APPLIED),Xe(l(this,bl)._gl,e.fbo),w.OK}function ah(e){if(o(this,co,e),null===l(this,Jl))return w.OK;var t=l(this,Jl)._presentFrame(l(this,bl),l(this,Ql),l(this,ul),l(this,Nl),l(this,pl).renderAtDisplaySize,l(this,pl).renderAtPixelRatio,l(this,ul).parentElement,e);return l(this,pl).logo&&this._toggleLogo(t===_.APPLIED),w.OK}function nh(){return s().async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l(this,jl)||!l(this,jl)._hasLcevcData(l(this,Cl))){e.next=4;break}if(l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),null,l(this,bl),!0,!0).then((e=>{c(this,Go,ah).call(this,e)})),!this.isLcevcPresentlyDecoded){e.next=4;break}return e.abrupt("return",w.OK);case 4:return o(this,Ul,l(this,Ul)+1),l(this,Ul)<ll?setTimeout(c(this,Eo,nh).bind(this),10):l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),null,l(this,bl),!0,!0).then((e=>{this.seekedForFirstKeyframe||c(this,Go,ah).call(this,e)})),e.abrupt("return",w.OK);case 7:case"end":return e.stop()}}),null,this,null,Promise)}function lh(){return l(this,Kl)||(o(this,Kl,!0),c(this,_o,ih).call(this)),w.OK}function oh(e){switch(e.type){case"loadeddata":l(this,$l)._checkIsLive(l(this,ol).currentTime),l(this,$l)._update(),l(this,Yl)&&(o(this,Cl,l(this,ol).currentTime),c(this,Eo,nh).call(this)),l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),null,l(this,bl),!1,!0,0,0),window.LCEVCdec.loadeddata=!0;break;case"play":l(this,gl)&&l(this,gl).resume(),o(this,vo,!1),c(this,ko,lh).call(this),l(this,Jl)._unsyncPresentationTime(),l(this,$l)._refreshIcons(!0),l(this,yl)&&(l(this,ol).currentTime+=.001);break;case"pause":o(this,vo,!0),l(this,Jl)._unsyncPresentationTime(),l(this,$l)._refreshIcons(!1),l(this,Rl).browser===K.FIREFOX&&(l(this,ol).currentTime=l(this,ol).currentTime+.01);break;case"seeked":o(this,mo,!0),c(this,ko,lh).call(this),l(this,Jl)._resetQueue(),l(this,Jl)._isLcevcParsed&&P._perseus_decoder_clear_temporal(l(this,bl)._lcevcDecoderPointer,0),l(this,ol).paused&&"Safari"!==l(this,Rl).browser&&l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),null,l(this,bl),!1,!0,0,1),l(this,yl)&&l(this,vo)&&!l(this,bo)&&l(this,ol).currentTime>.1&&c(this,Fo,hh).call(this,l(this,ol).currentTime);break;case"render":if(l(this,ol).paused)l(this,Jl)._resetQueue(),l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),l(this,ol).frameMetadata,l(this,bl),!0,!0).then((e=>{c(this,Wo,rh).call(this,e)}));break;case"resizing":l(this,co)&&c(this,Go,ah).call(this,l(this,co));break;case"timeupdate":o(this,oo,l(this,ol).currentTime)}}function hh(e){var t=l(this,ol).volume;l(this,ol).volume=0,l(this,ol).play();var i=setInterval((()=>{l(this,ol).currentTime-e>.1&&(l(this,ol).pause(),o(this,bo,!1),l(this,ol).volume=t,clearInterval(i))}),100);o(this,bo,!0)}function uh(e,t,i,s){l(this,ul).style.height="auto"===t?t:`${t}px`,l(this,ul).style.width="auto"===e?e:`${e}px`,l(this,ul).style[s]=i}function ch(){l(this,ul).style.top="0px",l(this,ul).style.left="0px";var e=document.fullscreenElement||document.webkitCurrentFullScreenElement;if(e){var t=this.frameWidth/this.frameHeight;e.clientHeight<e.clientWidth?e.clientWidth>=t*e.clientHeight?c(this,Lo,uh).call(this,"auto",e.clientHeight,(e.clientWidth-l(this,ul).width)/2+"px","left"):c(this,Lo,uh).call(this,e.clientWidth,"auto",(e.clientHeight-l(this,ul).height)/2+"px","top"):e.clientHeight>=1/t*e.clientWidth?c(this,Lo,uh).call(this,t*e.clientHeight,"auto",(e.clientHeight-l(this,ul).height)/2+"px","top"):c(this,Lo,uh).call(this,"auto",e.clientWidth/t,(e.clientWidth-l(this,ul).width)/2+"px","left"),"block"===window.getComputedStyle(l(this,ul)).display?l(this,ol).style.display="none":l(this,ol).style.display="block"}else l(this,ol).style.display="block",l(this,ul).style.width="100%",l(this,ul).style.height="100%"}function dh(){l(this,ol).paused&&c(this,Xo,oh).call(this,{type:"resizing"}),c(this,Io,ch).call(this)}function ph(){return o(this,Gl,{audio:[],video:[],audioData:new Map,videoData:new Map}),w.OK}function fh(){if(l(this,Nl)._getRenderDecline||l(this,Nl)._getTimeRatio>1)if(l(this,Bl).active&&l(this,Nl)._getDPSRenderDecline?(l(this,ol).style.display="block",l(this,ul).style.display="none",c(this,Yo,vh).call(this,H.BASE_ONLY,"base-only enabled, canvas is hidden.")):l(this,ul).style.display="block",l(this,Bl).active)this.setConfigOption("shaderPath",this.getConfigOption("shaderPath"));else{c(this,No,wh).call(this,T.PERFORMANCE_DROPPED);var e=l(this,Nl)._incrementMaxSwitch;l(this,Pl)+al/l(this,Wl)*nl>l(this,ol).currentTime&&e<6?o(this,Hl,l(this,Hl)*nl):l(this,Hl)>al&&o(this,Hl,l(this,Hl)/nl),l(this,Bl).active=!0,this.setConfigOption("shaderPath",0),l(this,Bl).resetCounter=l(this,Hl),o(this,Pl,l(this,ol).currentTime),c(this,Yo,vh).call(this,H.ACTIVE,"pass-through enabled, upscale only.")}else l(this,Bl).active?(l(this,Bl).resetCounter-=1,l(this,Bl).resetCounter<=0&&(l(this,Bl).active=!1,this.setConfigOption("shaderPath",1),l(this,Bl).resetCounter=0,c(this,No,wh).call(this,T.PERFORMANCE_RESTORED),c(this,Yo,vh).call(this,H.OFF,"full decoding restored."))):this.setConfigOption("shaderPath",this.getConfigOption("shaderPath"));return w.OK}function vh(e,t){l(this,Bl).mode!==e&&(l(this,Bl).mode=e,J.always(`Dynamic Performance Scaling: ${t}`))}function mh(e,t,i,s,r){if(t>0&&t<1||t<0&&t>-1)return w.OK;if("audio"===e){var a=ji(l(this,Gl).audio,i);l(this,Gl).audio.splice(a,0,i);var n=t;if(-1!==a){var o=l(this,Gl).audioData.get(l(this,Gl).audio[a]);o&&Math.abs(o.end-i)<20&&(n=o.drift)}l(this,Gl).audioData.set(i,{start:i-l(this,El),end:s+l(this,kl),level:r,drift:t+n})}else if("video"===e){var h=0,u=ji(l(this,Gl).audio,i)-1;if(u>=0){var c=l(this,Gl).audioData.get(l(this,Gl).audio[u]);if(c)h=Math.abs(i-c.start)<2&&Math.abs(s-c.end)<2&&c.level===r?c.drift:0}var d=ji(l(this,Gl).video,i);l(this,Gl).video.splice(d,0,i),l(this,Gl).videoData.set(i,{start:i,end:s+l(this,kl),level:r,drift:t+h})}return w.OK}function bh(e,t){var i=ji(l(this,Gl).audio,t)-1;if(i>=0){for(var s=l(this,Gl).audio[i],r=0;r<s;r+=1)l(this,Gl).audioData.delete(r);l(this,Gl).audio.slice(s)}var a=ji(l(this,Gl).video,t)-1;if(a>=0){for(var n=l(this,Gl).video[a],o=0;o<n;o+=1)l(this,Gl).videoData.delete(o);l(this,Gl).video.slice(n)}return w.OK}function xh(e){var t=0,i=ji(l(this,Gl).audio,e)-1;if(i>=0){var s=l(this,Gl).audioData.get(l(this,Gl).audio[i]);if(s)t+=e>=s.start&&e<=s.end?s.drift:0}var r=ji(l(this,Gl).video,e)-1;if(r>=0){var a=l(this,Gl).videoData.get(l(this,Gl).video[r]);if(a)t+=e>=a.start&&e<=a.end?a.drift:0}return t}function gh(e){var t=e.data.id,i=e.data.level;if("lcevcData"===t&&[-1,l(this,Sl),l(this,wl)].includes(i)){if(e.data.end)return void(l(this,fl)||o(this,fl,e.data.end));o(this,xl,!0);var s=e.data.frameSample,r=e.data.pssData,a=s[0],n=s[1],h=s[3],u=l(this,Ml)?a:a/n+Math.min(h,0)/n;if(0!==c(this,Bo,xh).call(this,u))return;l(this,ml)&&(o(this,ml,!1),o(this,fl,!0)),l(this,jl)._addData(u,n,s[2],s[4],i,r,s[5])}if("rawLCEVC"===t){var d=e.data.frameSample,p=e.data.lcevcData;l(this,jl)._addData(d[0],d[1],d[2],d[4],i,p,d[5])}}function Ah(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t in l(this,Vl)||(l(this,Vl)[t]=[]),l(this,Vl)[t].push({node:e,handler:i,capture:s}),e.addEventListener(t,i,s),w.OK}function Th(e,t){return l(this,Vl)[t].filter((t=>t.node===e)).forEach((e=>{var i=e.node,s=e.handler,r=e.capture;return i.removeEventListener(t,s,r)})),l(this,Vl)[t]=l(this,Vl)[t].filter((t=>t.node!==e)),w.OK}function Rh(){var e=l(this,ol),t=["loadeddata","play","pause","seeked","render","loadeddata","timeupdate"];return o(this,so,c(this,Xo,oh).bind(this)),o(this,ro,t),t.forEach((t=>{c(this,Po,Ah).call(this,e,t,l(this,so))})),w.OK}function yh(){var e=l(this,ol);l(this,so)&&(l(this,ro).forEach((t=>{c(this,Oo,Th).call(this,e,t)})),o(this,so,null));return w.OK}function wh(e,t){if(!l(this,io)[e])return w.FAIL;return l(this,io)[e].forEach((e=>{e(t)})),w.OK}function _h(){var e=l(this,ol);if(!document.fullscreenEnabled&&e.webkitSupportsFullscreen){var t=document.createElement("video");t.id="capture-video",t.width=1,t.height=1,t.playsInline=!0,t.autoplay=!0,t.controls=!0,document.body.appendChild(t);var i=l(this,ul);t.srcObject=i.captureStream(60),t.addEventListener("play",(()=>{e.play()})),t.addEventListener("pause",(()=>{e.pause()})),e.addEventListener("play",(()=>{t.play()})),e.addEventListener("pause",(()=>{t.pause()})),e.webkitEnterFullscreen&&(e.webkitEnterFullscreen=()=>{t.webkitEnterFullscreen(),setTimeout((()=>{t.srcObject=i.captureStream(l(this,Wl))}),100)}),e.webkitExitFullscreen&&(e.webkitExitFullscreen=()=>{t.webkitExitFullscreen()})}}var Sh=class{constructor(e,t,i){var s=this;if(f(this,Jo),f(this,No),f(this,Do),f(this,zo),f(this,Oo),f(this,Po),f(this,Ho),f(this,Bo),f(this,Uo),f(this,Co),f(this,Yo),f(this,Ko),f(this,Zo),f(this,Vo),f(this,Io),f(this,Lo),f(this,Fo),f(this,Xo),f(this,ko),f(this,Eo),f(this,Go),f(this,Wo),f(this,So),f(this,_o),f(this,wo),f(this,yo),f(this,Ro),f(this,To),f(this,Ao),f(this,go),p(this,ol,{writable:!0,value:null}),p(this,hl,{writable:!0,value:-1}),p(this,ul,{writable:!0,value:null}),p(this,cl,{writable:!0,value:null}),p(this,dl,{writable:!0,value:null}),p(this,pl,{writable:!0,value:{}}),p(this,fl,{writable:!0,value:!1}),p(this,vl,{writable:!0,value:!0}),p(this,ml,{writable:!0,value:!0}),p(this,bl,{writable:!0,value:null}),p(this,xl,{writable:!0,value:!1}),p(this,gl,{writable:!0,value:null}),p(this,Al,{writable:!0,value:null}),p(this,Tl,{writable:!0,value:null}),p(this,Rl,{writable:!0,value:{browser:"unknown",version:"unknown"}}),p(this,yl,{writable:!0,value:!1}),p(this,wl,{writable:!0,value:-1}),r(this,"containerFormat",0),r(this,"streamingFormat",-1),p(this,_l,{writable:!0,value:!1}),p(this,Sl,{writable:!0,value:-1}),p(this,Wl,{writable:!0,value:0}),p(this,Gl,{writable:!0,value:{audio:[],video:[],audioData:new Map,videoData:new Map}}),p(this,El,{writable:!0,value:2}),p(this,kl,{writable:!0,value:0}),p(this,Xl,{writable:!0,value:0}),p(this,Fl,{writable:!0,value:0}),p(this,Ll,{writable:!0,value:!1}),p(this,Il,{writable:!0,value:0}),p(this,Ml,{writable:!0,value:!1}),p(this,Vl,{writable:!0,value:{}}),p(this,Zl,{writable:!0,value:!1}),p(this,Kl,{writable:!0,value:!1}),p(this,Yl,{writable:!0,value:!1}),p(this,Cl,{writable:!0,value:0}),p(this,Ul,{writable:!0,value:0}),p(this,Bl,{writable:!0,value:{enabled:!0,active:!1,resetCounter:0,mode:H.OFF}}),p(this,Hl,{writable:!0,value:al}),p(this,Pl,{writable:!0,value:0}),p(this,Ol,{writable:!0,value:!1}),p(this,zl,{writable:!0,value:!1}),p(this,Dl,{writable:!0,value:null}),p(this,Nl,{writable:!0,value:null}),p(this,Jl,{writable:!0,value:null}),p(this,jl,{writable:!0,value:null}),p(this,Ql,{writable:!0,value:null}),p(this,$l,{writable:!0,value:null}),p(this,ql,{writable:!0,value:-1}),p(this,eo,{writable:!0,value:null}),p(this,to,{writable:!0,value:null}),p(this,io,{writable:!0,value:{}}),p(this,so,{writable:!0,value:null}),p(this,ro,{writable:!0,value:null}),p(this,ao,{writable:!0,value:0}),p(this,no,{writable:!0,value:0}),p(this,lo,{writable:!0,value:null}),p(this,oo,{writable:!0,value:null}),p(this,ho,{writable:!0,value:0}),p(this,uo,{writable:!0,value:!0}),p(this,co,{writable:!0,value:null}),p(this,po,{writable:!0,value:0}),p(this,fo,{writable:!0,value:0}),p(this,vo,{writable:!0,value:!0}),p(this,mo,{writable:!0,value:!1}),p(this,bo,{writable:!0,value:!1}),r(this,"seekedForFirstKeyframe",!1),p(this,xo,{writable:!0,value:-1}),p(this,Mo,{writable:!0,value:()=>{var e,t=[null];return(i,s)=>{for(var r=!1,a=[],n=0;n<t.length;n+=1){var l=t[n]||{},o=l.element,h=l.handler;if(n===t.length-1&&!r&&o!==i&&t.push({element:i,handler:s}),o){if(!o.isConnected)continue;if(!h)continue;if(o===i){r=!0,a.push({element:i,handler:s});continue}a.push(l)}}t=a,e?e.disconnect():e=new ResizeObserver((e=>{e.forEach((e=>{if(e.contentBoxSize){var i=t.find((t=>t.element===e.target));i&&i.handler&&i.handler(e.target)}}))})),t.forEach((t=>{var i=t.element;return e.observe(i)}))}}}),!document.getElementById("lcevc-styles")){var a=document.createElement("style");a.id="lcevc-styles",a.setAttribute("type","text/css"),a.innerHTML="\n      /* debug tools */\n      #lcevc-stats-infobox,\n      #lcevc-stats-infobox-content,\n      #lcevc-stats-infobox-btn,\n      #lcevc-stats-infobox-advanced {\n        display: block;\n        left: 0;\n        top: 0;\n        font-size: 12px;\n        font-family: monospace;\n        color: #fff;\n        white-space: pre;\n      }\n      #lcevc-stats-infobox {\n        position: absolute;\n        padding: 8px;\n      }\n      #lcevc-stats-infobox-content {\n        position: relative;\n      }\n      #lcevc-stats-infobox-btn {\n        position: relative;\n        padding: 2px 8px;\n        margin-top: 10px;\n        width:fit-content;\n        font-size: 10px;\n        background-color: #333;\n        border: 1px solid #555;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n      #lcevc-stats-infobox-advanced {\n        height: fit-content;\n        white-space: normal;\n        pointer-events: none;\n      }\n      #lcevc-stats-infobox-advanced table {\n        display: inline-block;\n        vertical-align: top;\n        border: 4px solid #fff;\n        border-collapse: collapse;\n        font-size: 11px;\n      }\n      #lcevc-stats-infobox-advanced td {\n        border: 1px solid rgba(255,255,255,0.15);\n        padding: 4px;\n        vertical-align: top;\n        white-space: pre;\n      }\n      #lcevc-stats-infobox-advanced-frame {\n        background-color: #06435f;\n        color: #3eecf4;\n      }\n      #lcevc-stats-infobox-advanced-queue {\n        background-color: #123423;\n        color: #3ef4a8;\n      }\n      #lcevc-stats-infobox-advanced-residuals {\n        background-color: #84391c;\n        color: #f8bf1e;\n        min-height: 1600px;\n      }\n      ",document.getElementsByTagName("head")[0].appendChild(a)}if(!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype){var n=[0,0,0],h=0,u=function(){return l(this,Wl)>0?l(this,Wl):30}.bind(this),d=function(){return l(this,mo)}.bind(this),v=function(){o(this,mo,!1)}.bind(this);HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(e){var t=this.getVideoPlaybackQuality(),i=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,s=(a,l)=>{var o=this.getVideoPlaybackQuality(),c=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(c>i){var p=this.mozFrameDelay||o.totalFrameDelay-t.totalFrameDelay||0,f=l-a;(n=[this.currentTime].concat(n)).pop();var m=n[0];d()?(v(),h=this.currentTime):m===n[1]&&m!==n[2]||Math.abs(h-this.currentTime)>.1?h=this.currentTime:h+=1/u(),e(l,{presentationTime:l+1e3*p,expectedDisplayTime:l+f,width:this.videoWidth,height:this.videoHeight,mediaTime:h,presentedFrames:c,processingDuration:p}),delete this._rvfcpolyfillmap[r]}else this._rvfcpolyfillmap[r]=requestAnimationFrame((e=>s(l,e)))},r=Date.now(),a=performance.now();return this._rvfcpolyfillmap[r]=requestAnimationFrame((e=>s(a,e))),r},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(e){cancelAnimationFrame(this._rvfcpolyfillmap[e]),delete this._rvfcpolyfillmap[e]}}if("HTMLVideoElement"!==e.constructor.name||"HTMLCanvasElement"!==t.constructor.name)throw new TypeError("The LCEVCdec constructor requires a HTMLVideoElement and a HLTMCanvasElement to be passed to it.");o(this,ol,e),o(this,ul,t),l(this,ul).style.width="100%",l(this,ul).style.height="100%",c(this,Po,Ah).call(this,document,"fullscreenchange",(e=>c(this,Io,ch).call(this,e))),c(this,Po,Ah).call(this,document,"webkitfullscreenchange",(e=>c(this,Io,ch).call(this,e))),c(this,Po,Ah).call(this,window,"orientationchange",(e=>c(this,Io,ch).call(this,e))),o(this,dl,new sl(this.clearTemporal.bind(this))),o(this,pl,function(e){const t={...rl,...e};return void 0!==e.dynamicPerformanceScaling&&(t.dps=e.dynamicPerformanceScaling),void 0!==e.drawLogo&&(t.logo=e.drawLogo),t.playerControls={...rl.playerControls,...e.playerControls},t}(i)),this.enablePerformanceScaling(l(this,pl).dps),o(this,Yl,l(this,pl).poster),l(this,ol).loop=l(this,pl).loop,window.driftEndOffset=l(this,kl),c(this,Zo,ph).call(this),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(J.info("requestVideoFrameCallback supported."),o(this,Ol,!0)),o(this,bl,new Mt(this)),l(this,bl)._openLcevcDecoder(l(this,ol),l(this,ul));var m=l(this,bl)._gl;o(this,$l,new jn(this,l(this,pl).playerControls)),o(this,Nl,new ua(this,l(this,pl).debugStats,l(this,ul).parentElement)),o(this,Jl,new ki(this,m)),o(this,jl,new ds(this)),o(this,Ql,new Di(m)),c(this,Ao,Qo).call(this),c(this,Jo,_h).call(this),c(this,Do,yh).call(this),c(this,zo,Rh).call(this),o(this,eo,new A),o(this,to,c(this,Ho,gh).bind(this)),c(this,Po,Ah).call(this,l(this,eo),"message",l(this,to)),l(this,eo).postMessage({id:"userConfig",config:l(this,pl)}),N(l(this,pl).logLevel),this.resetBuffer(),l(this,pl).logo&&c(this,go,jo).call(this),c(this,Ro,qo).call(this),window.__lcevcDecResizer||(window.__lcevcDecResizer=l(this,Mo).call(this)),window.__lcevcDecResizer(t.parentElement,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(s,Vo,dh).call(s,...t)})),window.LCEVCdec.instance=this}get video(){return l(this,ol)}get currentBrowser(){return c(this,Ao,Qo).call(this),l(this,Rl)}get isFullscreen(){return l(this,Zl)||l(this,$l)._isFullscreen}get isLcevcPresentlyDecoded(){return l(this,_l)}get isLive(){return l(this,$l)._isLive}get controls(){return l(this,$l)}get isPerformanceScalingEnabled(){return l(this,Bl).enabled}get videoFrameCallbackEnabled(){return l(this,zl)}enablePerformanceScaling(e){l(this,Bl).enabled=e}get isLcevcEnabled(){return l(this,vl)}get isPerformanceScalingActive(){return l(this,Bl).active}get lcevcDataDetected(){return l(this,xl)}get frameWidth(){return l(this,Ql)&&l(this,Ql)._presentationFrameWidth}get frameHeight(){return l(this,Ql)&&l(this,Ql)._presentationFrameHeight}get currentLevel(){return l(this,wl)}get nextLevel(){return l(this,Sl)}get firstLcevcSegmentLoaded(){return l(this,fl)}get aspectRatio(){return l(this,bl)._lcevcAspectRatio}get is1D(){return l(this,Jl)._is1D}get frameRate(){return l(this,Wl)}get firstKeyframeOffset(){return l(this,Xl)}get timestampOffset(){return l(this,Fl)}get totalOffset(){return l(this,Xl)+l(this,Fl)}get rtpTimestampSync(){return l(this,Ml)}get renderBufferCheck(){return l(this,fo)}set shaderKernel0(e){l(this,bl).shaderKernel0=e}set shaderKernel1(e){l(this,bl).shaderKernel1=e}setFirstKeyframeOffset(e){o(this,Xl,e)}setTimestampOffset(e){o(this,Fl,e)}useTimestampOffsetForNextProfile(){this.setTimestampOffset(l(this,Il))}getConfigOption(e){return l(this,pl)[e]}setConfigOption(e,t){Object.prototype.hasOwnProperty.call(l(this,pl),e)&&(l(this,pl)[e]=t)}get profileIn(){return l(this,bl)._profileIn}setProfileIn(e){l(this,bl)._setProfileIn=e}get profileOut(){return l(this,bl)._profileOut}setProfileOut(e){l(this,bl)._setProfileOut=e}_internal_setVideoLoop(e){l(this,ol).loop=e}newPts(e,t,i,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NaN;(!s||s&&"video"===s)&&(o(this,ao,e),o(this,no,t)),Number.isNaN(r)||c(this,Co,mh).call(this,s,r,e,t,i)}_internal_setDebugStats(e){return l(this,pl).debugStats=e,l(this,Nl)._enable(l(this,pl).debugStats,l(this,ul).parentElement),w.OK}onFullscreen(e){o(this,Zl,e),e&&c(this,ko,lh).call(this)}_toggleLogo(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l(this,pl).logo&&l(this,lo)&&l(this,lo).hidden!==!e?(t&&(e||o(this,ho,l(this,ho)+1),!e&&l(this,ho)<=3)||(o(this,ho,0),l(this,lo).hidden=!e,o(this,_l,e)),w.OK):w.ERROR}_enableLcevc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,vl,e),t?(this._toggleLogo(e,!1),this.setConfigOption("shaderPath",0===this.getConfigOption("shaderPath")?1:0),this.video.dispatchEvent(new Event("render"))):this._toggleLogo(e)}get _internal_decoderParseStats(){return l(this,bl)._parseStats}_updateAudioParams(e){return null!==l(this,Al)&&(this.audioNodeDelay.delayTime.value=e>0?e:0),w.OK}clearTemporal(){if(!l(this,bl)||!l(this,Jl)._isLcevcParsed)return w.ERROR;var e=l(this,bl)._lcevcDecoderPointer;return P._perseus_decoder_clear_temporal(e,0),w.OK}setCurrentLevel(e){return o(this,wl,e),this.clearTemporal(),l(this,Jl)._resetQueue(),w.OK}setCurrentLevelBufferSwitch(){return o(this,wl,l(this,Sl)),this.clearTemporal(),w.OK}setContainerFormat(e){return this.containerFormat=e,w.OK}setStreamingFormat(e){return this.streamingFormat=e,w.OK}setLevelSwitching(e,t){return o(this,Sl,e),t&&o(this,fo,1),w.OK}static get logLevel(){return D}set logLevel(e){N(e),l(this,eo).postMessage({id:"config",level:e})}appendBuffer(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("video"!==t&&"audiovideo"!==t)throw new Error('Type should be "video" or "audiovideo"');if("ArrayBuffer"!==e.constructor.name&&"Uint8Array"!==e.constructor.name)throw new TypeError("The passed argument is not of type: ArrayBuffer");l(this,Ll)||(o(this,Ll,!0),this.setTimestampOffset(s)),i!==l(this,xo)&&(o(this,xo,i),o(this,Il,s));var r=new Uint8Array(e).slice();return l(this,eo).postMessage({id:"demux",videoData:r,level:i,type:t,containerFormat:this.containerFormat},[r.buffer]),w.OK}resetBuffer(){return l(this,eo).postMessage({id:"reset"}),l(this,bl)._reset(l(this,jl),Math.trunc(l(this,ol).currentTime)),w.OK}flushBuffer(e,t){return Number.isFinite(t)?(l(this,jl)._flushDataRange(e,t),c(this,Uo,bh).call(this,e,t),l(this,Jl)._resetQueue(),w.OK):-1}addRawLcevcData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NaN;return l(this,eo).postMessage({id:"rawLCEVC",lcevcData:e,timestamp:t,timescale:i,duration:s,baseDecodeTime:r},[e.buffer]),w.OK}addRawNalLcevcData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return l(this,eo).postMessage({id:"rawNalLCEVC",lcevcData:e,timestamp:t,naluFormat:s},[e.buffer]),o(this,Ml,i),w.OK}internal_dumpFrame(){var e={};return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(l(this,Jl)._resetQueue(),e=l(this,Jl)._inputFrame(l(this,Ql),l(this,jl),l(this,ol),l(this,ol).frameMetadata,l(this,bl),!1,!0)),{queueFrame:e,textures:l(this,Jl).getInternalTextures(),fboStates:l(this,Ql)._getInternalFrameBufferStates()}}displayError(e){if(!l(this,cl)){o(this,cl,document.createElement("div"));l(this,cl).id="lcevc-error-infobox",l(this,cl).style.cssText="\n      position: absolute;\n      z-index: 9999;\n      top:0;\n      left:0;\n      color: #fff;\n      background-color: rgba(0,0,0,0.8);\n      padding:10px;\n      font-family:Arial;\n      font-size:1.25em;",l(this,ul).parentElement.appendChild(l(this,cl))}return l(this,cl).innerHTML=`&#x26A0; Error<br/>${e}`,J.error(e),l(this,cl)}clearError(){return l(this,cl)&&l(this,cl).remove(),w.OK}close(){c(this,wo,th).call(this),l(this,Ol)&&o(this,zl,!1),l(this,eo)&&(c(this,Oo,Th).call(this,l(this,eo),"message"),l(this,eo).terminate(),o(this,eo,null)),c(this,Do,yh).call(this),o(this,Vl,null),o(this,io,{}),l(this,bl)&&(l(this,bl)._close(),o(this,bl,null)),l(this,Jl)&&(l(this,Jl)._close(),o(this,Jl,null)),l(this,jl)&&(l(this,jl)._close(),o(this,jl,null)),l(this,Ql)&&(l(this,Ql)._close(),o(this,Ql,null)),l(this,$l)&&(l(this,$l)._close(),o(this,$l,null)),l(this,Nl)&&(l(this,Nl)._close(),o(this,Nl,null)),l(this,dl)&&(l(this,dl)._close(),o(this,dl,null)),l(this,lo)&&(l(this,lo).remove(),o(this,lo,null));var e=document.querySelectorAll("[data-dec-drop-down-img]");return e&&[...e].forEach((e=>{e.remove()})),console.info("::::: closing LCEVCdec :::::"),w.OK}on(e,t){return l(this,io)[e]||(l(this,io)[e]=[]),l(this,io)[e].push(t),w.OK}off(e,t){if(!l(this,io)[e])return w.FAIL;if(t){l(this,io)[e]=l(this,io)[e].filter((e=>e!==t))}else l(this,io)[e]=[];return w.OK}},Wh=new WeakMap,Gh=new WeakMap,Eh=new WeakMap,kh=new WeakMap,Xh=new WeakMap,Fh=new WeakMap,Lh=new WeakMap,Ih=new WeakMap,Mh=new WeakMap;class Vh{constructor(){p(this,Wh,{writable:!0,value:!0}),p(this,Gh,{writable:!0,value:!0}),p(this,Eh,{writable:!0,value:!0}),p(this,kh,{writable:!0,value:!1}),p(this,Xh,{writable:!0,value:!1}),p(this,Fh,{writable:!0,value:!0}),p(this,Lh,{writable:!0,value:!1}),p(this,Ih,{writable:!0,value:!1}),p(this,Mh,{writable:!0,value:""}),o(this,Wh,!0),o(this,Gh,!0),o(this,Eh,!0),o(this,kh,!1),o(this,Xh,!1),o(this,Fh,!0),o(this,Lh,"")}get osSupport(){return(Vh.userAgentContains_("Tizen")||Vh.userAgentContains_("Web0S")||Vh.userAgentContains_("Roku"))&&o(this,Wh,!1),l(this,Wh)}get deviceSupport(){return l(this,Gh)}get browserSupport(){return l(this,Eh)}webAssemblySupport(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(t){return o(this,kh,!1),o(this,Lh,"LCEVC Error: WebAssembly Verification failed is not supported!"),l(this,kh)}return l(this,kh)}webGLSupport(e){try{return o(this,Xh,(e.getContext("webgl")||e.getContext("experimental-webgl"))&&!!window.WebGLRenderingContext),l(this,Xh)}catch(t){return o(this,Lh,"LCEVC Error: WebAssembly Verification failed is not supported!"),l(this,Xh)}}get mediasourceSupport(){return o(this,Fh,!0),!0}get Error(){return l(this,Lh)}set SetSupportStatus(e){o(this,Ih,e)}set SetSupportError(e){o(this,Mh,e)}get SupportStatus(){return l(this,Ih)}get SupportError(){return l(this,Mh)}static userAgentContains_(e){return(navigator.userAgent||"").includes(e)}}var Zh=new Vh,Kh=!1,Yh="",Ch=Zh.osSupport,Uh=Zh.deviceSupport,Bh=Zh.browserSupport,Hh=Zh.webAssemblySupport,Ph=Zh.mediasourceSupport;Ch&&Uh&&Bh&&Hh()&&Ph?(Kh=!0,Yh="No Errors"):(Yh=Zh.Error,Hh()||(Yh="LCEVC Error: WebAssembly Verification failed is not supported!")),Zh.SetSupportStatus=Kh,Zh.SetSupportError=Yh;var Oh=Sh,zh={SupportObject:Zh}.SupportObject;e.Events=T,e.LCEVC_DEC_BUILD_DATE="4/11/2024",e.LCEVCdec=Oh,e.SupportObject=zh,e.ready=O,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lcevc_dec.min.js.map
